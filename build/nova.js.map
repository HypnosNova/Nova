{"version":3,"file":"nova.js","sources":["../src/core/settings/DefaultSettings.js","../src/error/NotFunctionError.js","../src/core/LoopManager.js","../src/events/EventManager.js","../src/core/World.js","../src/constant.js","../src/core/VR.js","../src/core/App.js","../src/core/Bind.js","../src/core/FBOWorld.js","../src/core/Monitor.js","../src/core/QRCode.js","../src/core/Transitioner.js","../src/core/View.js","../src/events/Signal.js","../src/events/Events.js","../src/events/FBOEventMapper.js","../src/gui/GUI.js","../src/loader/LoaderFactory.js","../src/postprocessing/shader/CopyShader.js","../src/postprocessing/Pass.js","../src/postprocessing/ShaderPass.js","../src/postprocessing/RenderPass.js","../src/postprocessing/MaskPass.js","../src/postprocessing/ClearMaskPass.js","../src/postprocessing/EffectComposer.js","../src/postprocessing/shader/AfterimageShader.js","../src/postprocessing/AfterimagePass.js","../src/postprocessing/shader/DotScreenShader.js","../src/postprocessing/DotScreenPass.js","../src/postprocessing/shader/GlitchShader.js","../src/postprocessing/GlitchPass.js","../src/postprocessing/OutlinePass.js","../src/postprocessing/shader/WatercolorShader.js","../src/postprocessing/WatercolorPass.js","../src/postprocessing/shader/TestShader.js","../src/postprocessing/TestPass.js","../src/postprocessing/shader/FXAAShader.js","../src/util/extends.js","../src/util/rndInt.js","../src/util/rndString.js","../src/util/geoToCartesian.js","../src/util/Util.js","../src/Nova.js"],"sourcesContent":["//适合大部分WebGL的APP设置\r\nlet DefaultSettings = {\r\n\tparent: document.body, //APP所在DOM容器\r\n\tsetCommonCSS: true, //设置默认CSS样式，无法滚动，超出区域不显示，取消所有内外边距\r\n\tautoStart: true, //自动执行渲染循环和逻辑循环\r\n\tautoResize: true, //自动拉伸自适应不同屏幕分辨率\r\n\tVRSupport: false, //是否加载VR支持模块\r\n\trenderer: {\r\n\t\tclearColor: 0x000000, //渲染器的默认清除颜色\r\n\t\tclearAlpha: 1, //渲染器的默认清除颜色的透明度\r\n\t\tpixelRatio: window.devicePixelRatio || 1, //用于移动平台的清晰度\r\n\t\tprecision: \"highp\", // 渲染精细度，默认为高\r\n\t\tantialias: true, //是否开启抗锯齿\r\n\t\talpha: false, // 渲染器是否保存alpha缓冲\r\n\t\tlogarithmicDepthBuffer: false, // 逻辑深度缓冲\r\n\t\tpreserveDrawingBuffer: false\r\n\t},\r\n\tnormalEventList: [ \"click\", \"mousedown\", \"mouseup\", \"touchstart\",\r\n\t\t\"touchend\", \"touchmove\", \"mousemove\"\r\n\t], //默认开启的原生事件监听，不建议将所有的事件监听都写在里面，每一个事件监听都会增加一次射线法碰撞检测，如果不必要的事件过多会降低性能\r\n\thammerEventList: \"press tap pressup pan swipe\", //默认hammer手势事件的监听，同normalEventList一样，用到什么加入什么，不要一大堆东西全塞进去\r\n};\r\n\r\nexport {\r\n\tDefaultSettings\r\n};\r\n","class NotFunctionError extends Error {\r\n\r\n\tconstructor( message ) {\r\n\r\n\t\tsuper( message );\r\n\t\tthis.name = 'NotFunctionError';\r\n\t\tthis.message = message || 'The object is not a function.';\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tNotFunctionError\r\n};\r\n","import { NotFunctionError } from './../error/NotFunctionError.js';\r\n\r\nclass LoopManager {\r\n\r\n\tconstructor( cycleLevel = 1 ) {\r\n\r\n\t\t//当它是true，不执行该循环\r\n\t\tthis.disable = false;\r\n\t\t//记录循环次数\r\n\t\tthis.times = 0;\r\n\t\t//每隔多少循环执行一次update，用于调整fps。数字越大，fps越低\r\n\t\tthis.cycleLevel = cycleLevel <= 1 ? 1 : cycleLevel;\r\n\t\tthis.functionMap = new Map();\r\n\r\n\t}\r\n\r\n\tupdate( time ) {\r\n\r\n\t\tthis.times ++;\r\n\t\tif ( this.disable || ( this.times % this.cycleLevel ) !== 0 ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\tthis.functionMap.forEach( ( value ) => {\r\n\r\n\t\t\tvalue( time );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tadd( func, key ) {\r\n\r\n\t\tif ( typeof func !== 'function' ) {\r\n\r\n\t\t\tthrow new NotFunctionError();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( key ) {\r\n\r\n\t\t\t\tthis.functionMap.set( key, func );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tkey = Symbol();\r\n\t\t\t\tthis.functionMap.set( key, func );\r\n\t\t\t\treturn key;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tremoveAll() {\r\n\r\n\t\tthis.functionMap.clear();\r\n\r\n\t}\r\n\r\n\tremove( funcOrKey ) {\r\n\r\n\t\tif ( typeof funcOrKey === 'function' ) {\r\n\r\n\t\t\tthis.functionMap.forEach( ( value, key ) => {\r\n\r\n\t\t\t\tif ( value === funcOrKey ) {\r\n\r\n\t\t\t\t\treturn this.functionMap.delete( key );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\t\t\treturn false;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn this.functionMap.delete( funcOrKey );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tLoopManager\r\n};\r\n","import { Raycaster, Vector2 } from \"three\";\r\n\r\nclass EventManager {\r\n\r\n\tconstructor( world ) {\r\n\r\n\t\tworld.eventManager = this;\r\n\t\tthis.world = world;\r\n\t\tthis.disable = false;\r\n\t\tthis.isDeep = true;\r\n\t\tthis.receivers = world.receivers;\r\n\t\tthis.raycaster = new Raycaster();\r\n\t\tthis.centerRaycaster = new Raycaster();\r\n\t\tthis.selectedObj = null;\r\n\t\tthis.centerSelectedObj = null;\r\n\t\tthis.isDetectingEnter = true;\r\n\t\tlet normalEventList = world.app.options.normalEventList;\r\n\r\n\t\tfor ( let eventItem of normalEventList ) {\r\n\r\n\t\t\tworld.app.parent.addEventListener( eventItem, ( event ) => {\r\n\r\n\t\t\t\tif ( this.disable ) return;\r\n\t\t\t\tthis.raycastCheck( this.toNovaEvent( event ) );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\ttry {\r\n\r\n\t\t\tif ( window.Hammer === undefined ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t} catch ( e ) {\r\n\r\n\t\t\tconsole.warn( 'Hammer没有引入，手势事件无法使用，只能使用基础的交互事件。' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\tthis.hammer = new window.Hammer( world.app.renderer.domElement );\r\n\t\tthis.hammer.on( world.app.options.hammerEventList, ( event ) => {\r\n\r\n\t\t\tif ( this.disable ) return;\r\n\t\t\tthis.raycastCheck( event );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\ttoNovaEvent( event ) {\r\n\r\n\t\treturn {\r\n\t\t\tchangedPointers: [ event ],\r\n\t\t\tcenter: new Vector2( event.clientX, event.clientY ),\r\n\t\t\ttype: event.type,\r\n\t\t\ttarget: event.target\r\n\t\t};\r\n\r\n\t}\r\n\r\n\traycastCheck( event ) {\r\n\r\n\t\tlet vec2 = new Vector2( event.center.x / this.world.app.getWorldWidth() *\r\n\t\t\t2 - 1, 1 - event.center.y / this.world.app.getWorldHeight() * 2 );\r\n\t\tthis.raycaster.setFromCamera( vec2, this.world.camera );\r\n\t\tlet receiverMap;\r\n\t\tif ( this.world.receivers instanceof Array ) {\r\n\r\n\t\t\treceiverMap = new Map();\r\n\t\t\treceiverMap.set( Symbol(), this.world.receivers );\r\n\r\n\t\t} else if ( this.world.receivers instanceof Map ) {\r\n\r\n\t\t\treceiverMap = this.world.receivers;\r\n\r\n\t\t}\r\n\t\tlet intersect;\r\n\t\tfor ( let receivers of receiverMap.values() ) {\r\n\r\n\t\t\tlet intersects = this.raycaster.intersectObjects( receivers, this.isDeep );\r\n\t\t\tfor ( let i = 0; i < intersects.length; i ++ ) {\r\n\r\n\t\t\t\tif ( intersects[ i ].object.isPenetrated ||\r\n\t\t\t\t\t! intersects[ i ].object.events ||\r\n\t\t\t\t\t! intersects[ i ].object.events[ event.type ] ) {\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tintersect = intersects[ i ];\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif ( intersect ) {\r\n\r\n\t\t\t\tintersect.object.events[ event.type ].run( event, intersect );\r\n\r\n\t\t\t}\r\n\t\t\treturn intersect;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tEventManager\r\n};\r\n","import { LoopManager } from './LoopManager.js';\r\nimport { EventManager } from './../events/EventManager';\r\nimport { Scene, PerspectiveCamera, WebGLRenderTarget, LinearFilter, RGBFormat } from \"three\";\r\n\r\nclass World {\r\n\r\n\tconstructor( app, camera, clearColor ) {\r\n\r\n\t\tthis.app = app;\r\n\t\tthis.scene = new Scene();\r\n\t\tthis.logicLoop = new LoopManager();\r\n\t\tthis.renderLoop = new LoopManager();\r\n\t\tthis.camera = camera || new PerspectiveCamera( 45, app.getWorldWidth() /\r\n\t\t\tapp.getWorldHeight(), 0.01, 5000 );\r\n\t\tthis.receivers = this.scene.children;\r\n\t\tthis.eventManager = new EventManager( this );\r\n\t\tthis.renderTargetParameters = {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tformat: RGBFormat,\r\n\t\t\tstencilBuffer: false\r\n\t\t};\r\n\t\tthis.isRTT = false;\r\n\t\tthis.clearColor = clearColor || 0;\r\n\t\tthis.fbo = new WebGLRenderTarget( this.app.getWorldWidth(),\r\n\t\t\tthis.app.getWorldHeight(), this.renderTargetParameters );\r\n\t\tthis.defaultRenderID = Symbol();\r\n\t\tthis.renderLoop.add( () => {\r\n\r\n\t\t\tif ( this.isRTT ) {\r\n\r\n\t\t\t\tthis.app.renderer.render( this.scene, this.camera, this.fbo, true );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.app.renderer.render( this.scene, this.camera );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, this.defaultRenderID );\r\n\t\tthis.defaultUpdateID = Symbol();\r\n\r\n\t}\r\n\r\n\tupdate( time ) {\r\n\r\n\t\tthis.logicLoop.update( time );\r\n\t\tthis.renderLoop.update( time );\r\n\r\n\t}\r\n\r\n\tresize( width, height ) {\r\n\r\n\t\tif ( this.camera.type === 'PerspectiveCamera' ) {\r\n\r\n\t\t\tthis.camera.aspect = width / height;\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.camera.left = - width / 2;\r\n\t\t\tthis.camera.right = width / 2;\r\n\t\t\tthis.camera.top = height / 2;\r\n\t\t\tthis.camera.bottom = - height / 2;\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tWorld\r\n};\r\n","const APP_STOP = 0;\r\nconst APP_RUNNING = 1;\r\nconst APP_PAUSE = 2;\r\nconst WORLD_RUNNING = 1;\r\nconst WORLD_PAUSE = 2;\r\nconst VERSION = '0.1.3';\r\n\r\nconsole.log( \"Nova framework for Three.js, version: %c \" + VERSION, \"color:blue\" );\r\n\r\nexport {\r\n\tAPP_STOP,\r\n\tAPP_RUNNING,\r\n\tAPP_PAUSE,\r\n\tWORLD_RUNNING,\r\n\tWORLD_PAUSE\r\n};\r\n","class VR {\r\n\r\n\tconstructor( app ) {\r\n\r\n\t\tthis.app = app;\r\n\t\tthis.display = undefined;\r\n\t\tthis.polyfill = undefined;\r\n\t\tthis.isOpenVR = false;\r\n\t\tthis.vrEffect = undefined;\r\n\t\tthis.getVRDisplay();\r\n\t\tthis.createVREffect();\r\n\r\n\t}\r\n\r\n\tcreateVREffect() {\r\n\r\n\t\tif ( this.vrEffect ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\tif ( ! window.THREE.VREffect ) {\r\n\r\n\t\t\tconsole.warn( \"未引入VREffect.js，无法创建VR模式。\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\tthis.vrEffect = new window.THREE.VREffect( this.app.renderer );\r\n\t\tthis.vrEffect.setSize( this.app.renderer.domElement.clientWidth,\r\n\t\t\tthis.app.renderer.domElement.clientHeight, false );\r\n\t\tthis.vrEffect.isOpened = false;\r\n\t\tthis.vrEffect.updateId = Symbol();\r\n\r\n\t}\r\n\r\n\tsetPolyfill() {\r\n\r\n\t\tif ( this.polyfill ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\tif ( ! window.WebVRPolyfill ) {\r\n\r\n\t\t\tconsole.warn( \"未引入WebVRPolyfill.js，无法创建VR兼容模式。\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\tlet config = ( function () {\r\n\r\n\t\t\tlet config = {};\r\n\t\t\tlet q = window.location.search.substring( 1 );\r\n\t\t\tif ( q === '' ) {\r\n\r\n\t\t\t\treturn config;\r\n\r\n\t\t\t}\r\n\t\t\tlet params = q.split( '&' );\r\n\t\t\tlet param, name, value;\r\n\t\t\tfor ( let i = 0; i < params.length; i ++ ) {\r\n\r\n\t\t\t\tparam = params[ i ].split( '=' );\r\n\t\t\t\tname = param[ 0 ];\r\n\t\t\t\tvalue = param[ 1 ];\r\n\r\n\t\t\t\t// All config values are either boolean or float\r\n\t\t\t\tconfig[ name ] = value === 'true' ? true :\r\n\t\t\t\t\tvalue === 'false' ? false :\r\n\t\t\t\t\t\tparseFloat( value );\r\n\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\r\n\t\t} )();\r\n\t\tthis.polyfill = new window.WebVRPolyfill( config );\r\n\r\n\t}\r\n\r\n\tgetVRDisplay() {\r\n\r\n\t\tif ( ! navigator.getVRDisplays ) {\r\n\r\n\t\t\tthis.setPolyfill();\r\n\r\n\t\t}\r\n\t\tif ( ! navigator.getVRDisplays ) {\r\n\r\n    \treturn;\r\n\r\n\t\t}\r\n\t\treturn navigator.getVRDisplays()\r\n\t\t\t.then( ( vrDisplays ) => {\r\n\r\n\t\t\t\tif ( vrDisplays.length ) {\r\n\r\n\t\t\t\t\tthis.display = vrDisplays[ 0 ];\r\n\t\t\t\t\treturn this.display;\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn \"no\";\r\n\r\n\t\t\t}, () => {\r\n\r\n\t\t\t\treturn \"no\";\r\n\r\n\t\t\t} );\r\n\r\n\t}\r\n\r\n\topen() {\r\n\r\n\t\tif ( ! this.display || ! this.vrEffect ) {\r\n\r\n\t\t\tconsole.warn( \"未发现VR设备或浏览器不兼容，无法进入VR模式。\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\tthis.app.renderLoop.add( () => {\r\n\r\n\t\t\tthis.vrEffect.render( this.app.world.scene, this.app.world.camera );\r\n\r\n\t\t}, this.vrEffect.updateId );\r\n\t\tthis.display.requestPresent( [ { source: this.app.renderer.domElement } ] );\r\n\r\n\t}\r\n\r\n\tclose() {\r\n\r\n\t\tthis.app.renderLoop.remove( this.vrEffect.updateId );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tVR\r\n};\r\n","import { World } from './World.js';\r\nimport { APP_RUNNING, APP_STOP, APP_PAUSE } from './../constant.js';\r\nimport { LoopManager } from './LoopManager.js';\r\nimport { VR } from './VR.js';\r\nimport { DefaultSettings } from './settings/DefaultSettings.js';\r\nimport { Vector2, Vector3, WebGLRenderer } from 'three';\r\nimport { defaultsDeep } from \"lodash\";\r\n\r\nclass App {\r\n\r\n\tconstructor( settings = {} ) {\r\n\r\n\t\tthis.options = defaultsDeep( settings, DefaultSettings );\r\n\t\tif ( this.options.setCommonCSS ) {\r\n\r\n\t\t\tthis.setCommonCSS();\r\n\r\n\t\t}\r\n\t\tthis.parent = this.options.parent;\r\n\t\tthis.renderer = new WebGLRenderer( {\r\n\t\t\tantialias: this.options.renderer.antialias,\r\n\t\t\tprecision: this.options.renderer.precision,\r\n\t\t\talpha: this.options.renderer.alpha,\r\n\t\t\tlogarithmicDepthBuffer: this.options.renderer.logarithmicDepthBuffer,\r\n\t\t\tpreserveDrawingBuffer: this.options.renderer.preserveDrawingBuffer\r\n\t\t} );\r\n\t\tthis.renderer.setClearColor( this.options.renderer.clearColor,\r\n\t\t\tthis.options.renderer.clearAlpha );\r\n\t\tthis.world = new World( this );\r\n\r\n\t\tthis.state = APP_STOP;\r\n\t\tthis.logicLoop = new LoopManager();\r\n\t\tthis.renderLoop = new LoopManager();\r\n\t\twindow.addEventListener( 'resize', () => {\r\n\r\n\t\t\tthis.resize();\r\n\r\n\t\t} );\r\n\t\tif ( this.options.autoStart ) {\r\n\r\n\t\t\tthis.start();\r\n\r\n\t\t}\r\n\t\tif ( this.options.VRSupport ) {\r\n\r\n\t\t\tthis.VR = new VR( this );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tresize() {\r\n\r\n\t\tlet width = this.getWorldWidth();\r\n\t\tlet height = this.getWorldHeight();\r\n\t\tthis.world.resize( width, height );\r\n\t\tthis.renderer.setSize( width, height );\r\n\t\tthis.renderer.setPixelRatio( this.options.renderer.pixelRatio );\r\n\r\n\t}\r\n\r\n\tupdate( time ) {\r\n\r\n\t\tif ( this.state === APP_RUNNING ) {\r\n\r\n\t\t\tthis.logicLoop.update( time );\r\n\t\t\tthis.world.update( time );\r\n\t\t\tthis.renderLoop.update( time );\r\n\r\n\t\t}\r\n\r\n\t\trequestAnimationFrame(\r\n\t\t\t() => {\r\n\r\n\t\t\t\tthis.update();\r\n\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tsetCommonCSS() {\r\n\r\n\t\tdocument.write(\r\n\t\t\t`<style>*{margin:0;padding:0} body{overflow:hidden}</style>` );\r\n\r\n\t}\r\n\r\n\tgetWorldWidth() {\r\n\r\n\t\treturn this.parent === document.body ? window.innerWidth :\r\n\t\t\tthis.parent.offsetWidth;\r\n\r\n\t}\r\n\r\n\tgetWorldHeight() {\r\n\r\n\t\treturn this.parent === document.body ? window.innerHeight :\r\n\t\t\tthis.parent.offsetHeight;\r\n\r\n\t}\r\n\r\n\tstart() {\r\n\r\n\t\tif ( this.state === APP_STOP ) {\r\n\r\n\t\t\tthis.state = APP_RUNNING;\r\n\t\t\tthis.parent.appendChild( this.renderer.domElement );\r\n\t\t\tthis.resize();\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tresume() {\r\n\r\n\t\tif ( this.state === APP_PAUSE ) {\r\n\r\n\t\t\tthis.state = APP_RUNNING;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpause() {\r\n\r\n\t\tif ( this.state === APP_RUNNING ) {\r\n\r\n\t\t\tthis.state = APP_PAUSE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdestroy() {\r\n\r\n\t\tthis.world.destroy();\r\n\r\n\t}\r\n\r\n\topenFullScreen() {\r\n\r\n\t\tlet container = this.parent;\r\n\t\tthis.isFullScreen = true;\r\n\t\tif ( container.requestFullscreen ) {\r\n\r\n\t\t\tcontainer.requestFullscreen();\r\n\r\n\t\t} else if ( container.msRequestFullscreen ) {\r\n\r\n\t\t\tcontainer.msRequestFullscreen();\r\n\r\n\t\t} else if ( container.mozRequestFullScreen ) {\r\n\r\n\t\t\tcontainer.mozRequestFullScreen();\r\n\r\n\t\t} else if ( container.webkitRequestFullscreen ) {\r\n\r\n\t\t\tcontainer.webkitRequestFullscreen();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.isFullScreen = false;\r\n\r\n\t\t}\r\n\t\treturn this.isFullScreen;\r\n\r\n\t}\r\n\r\n\tcloseFullScreen() {\r\n\r\n\t\tlet container = document;\r\n\t\tthis.isFullScreen = false;\r\n\t\tif ( container.exitFullscreen ) {\r\n\r\n\t\t\tcontainer.exitFullscreen();\r\n\r\n\t\t} else if ( container.mozCancelFullScreen ) {\r\n\r\n\t\t\tcontainer.mozCancelFullScreen();\r\n\r\n\t\t} else if ( container.webkitExitFullScreen ) {\r\n\r\n\t\t\tcontainer.webkitExitFullScreen();\r\n\r\n\t\t} else if ( container.msExitFullscreen ) {\r\n\r\n\t\t\tcontainer.msExitFullscreen();\r\n\r\n\t\t} else if ( container.webkitCancelFullScreen ) {\r\n\r\n\t\t\tcontainer.webkitCancelFullScreen();\r\n\r\n\t\t} else if ( container.webkitExitFullScreen ) {\r\n\r\n\t\t\tcontainer.webkitCancelFullScreen();\r\n\r\n\t\t}\r\n\t\treturn this.isFullScreen;\r\n\r\n\t}\r\n\r\n\ttoggleFullScreen() {\r\n\r\n\t\tif ( this.isFullScreen ) {\r\n\r\n\t\t\tthis.closeFullScreen();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.openFullScreen();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tscreenshot() {\r\n\r\n\t\tlet img = new Image();\r\n\t\tthis.renderer.render( this.world.scene, this.world.camera );\r\n\t\timg.src = this.renderer.domElement.toDataURL();\r\n\t\tlet w = window.open( '', '' );\r\n\t\tw.document.title = \"Nova Screenshot\";\r\n\t\tw.document.body.appendChild( img );\r\n\r\n\t}\r\n\r\n\tsceneCoordinateToCanvasCoordinate( obj, camera = this.world.camera ) {\r\n\r\n\t\tlet worldVector = obj instanceof Vector3 ? obj.clone() : obj.position.clone();\r\n\t\tlet vector = worldVector.project( camera );\r\n\t\tlet halfWidth = this.getWorldWidth() / 2;\r\n\t\tlet halfHeight = this.getWorldHeight() / 2;\r\n\r\n\t\treturn new Vector2( Math.round( vector.x * halfWidth + halfWidth ),\r\n\t\t\tMath.round( - vector.y * halfHeight + halfHeight ) );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tApp\r\n};\r\n","class Bind {\r\n\r\n\tconstructor( obj ) {\r\n\r\n\t\tfor ( let i in obj ) {\r\n\r\n\t\t\tthis[ i ] = obj[ i ];\r\n\t\t\tthis.bindMap = new Map();\r\n\t\t\tthis.defineReactive( this, i, this[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tadd( obj, funcs = {} ) {\r\n\r\n\t\tthis.bindMap.set( obj, funcs );\r\n\r\n\t}\r\n\r\n\tremove( obj ) {\r\n\r\n\t\tthis.bindMap.delete( obj );\r\n\r\n\t}\r\n\r\n\tdefineReactive( data, key, val ) {\r\n\r\n\t\tObject.defineProperty( data, key, {\r\n\t\t\tenumerable: true,\r\n\t\t\tconfigurable: false,\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn val;\r\n\r\n\t\t\t},\r\n\t\t\tset: function ( newVal ) {\r\n\r\n\t\t\t\tval = newVal;\r\n\t\t\t\tlet bindMap = data.bindMap;\r\n\t\t\t\tfor ( let [ obj, funcs ] of bindMap ) {\r\n\r\n\t\t\t\t\tif ( obj[ key ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tobj[ key ] = funcs[ key ] ? funcs[ key ]( val, obj ) : val;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\nexport {\r\n\tBind\r\n};\r\n","import { LoopManager } from './LoopManager';\r\nimport { Scene, PerspectiveCamera, LinearFilter, WebGLRenderTarget, RGBFormat } from \"three\";\r\n\r\nclass FBOWorld {\r\n\r\n\tconstructor( app, camera, width, height ) {\r\n\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.app = app;\r\n\t\tthis.scene = new Scene();\r\n\t\tthis.logicLoop = new LoopManager();\r\n\t\tthis.renderLoop = new LoopManager();\r\n\t\tthis.camera = camera || new PerspectiveCamera( 45, this.width /\r\n      this.height, 0.01, 5000 );\r\n\t\tthis.receivers = this.scene.children;\r\n\r\n\t\tthis.renderTargetParameters = {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tformat: RGBFormat,\r\n\t\t\tstencilBuffer: false\r\n\t\t};\r\n\t\tthis.clearColor = 0;\r\n\t\tthis.fbo = new WebGLRenderTarget( this.width,\r\n\t\t\tthis.height, this.renderTargetParameters );\r\n\t\tthis.defaultRenderID = Symbol();\r\n\t\tthis.defaultUpdateID = Symbol();\r\n\t\tthis.resize();\r\n\t\tthis.renderLoop.add( () => {\r\n\r\n\t\t\tthis.app.renderer.render( this.scene, this.camera, this.fbo, true );\r\n\r\n\t\t}, this.defaultRenderID );\r\n\r\n\t}\r\n\r\n\tupdate( time ) {\r\n\r\n\t\tthis.logicLoop.update( time );\r\n\t\tthis.renderLoop.update( time );\r\n\r\n\t}\r\n\r\n\tresize() {\r\n\r\n\t\tif ( this.camera.type === 'PerspectiveCamera' ) {\r\n\r\n\t\t\tthis.camera.aspect = this.width / this.height;\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.camera.left = - this.width / 2;\r\n\t\t\tthis.camera.right = this.width / 2;\r\n\t\t\tthis.camera.top = this.height / 2;\r\n\t\t\tthis.camera.bottom = - this.height / 2;\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tFBOWorld\r\n};\r\n","import { WebGLRenderer } from \"three\";\r\n\r\nclass Monitor {\r\n\r\n\tconstructor( world, option ) {\r\n\r\n\t\tthis.option = option;\r\n\t\tthis.fullWidth = world.app.getWorldWidth();\r\n\t\tthis.fullHeight = world.app.getWorldHeight();\r\n\t\tthis.renderer = new WebGLRenderer();\r\n\t\tthis.world = world;\r\n\t\tthis.canvas = this.renderer.domElement;\r\n\t\tthis.renderer.setSize( this.fullWidth * option.width, this.fullHeight *\r\n\t\t\toption.height );\r\n\t\tthis.renderer.setPixelRatio( window.devicePixelRatio );\r\n\r\n\t}\r\n\r\n\tresize( option ) {\r\n\r\n\t\tthis.option = option;\r\n\t\tthis.fullWidth = this.world.app.getWorldWidth();\r\n\t\tthis.fullHeight = this.world.app.getWorldHeight();\r\n\t\tthis.renderer.setSize( this.fullWidth * option.width, this.fullHeight *\r\n\t\t\toption.height );\r\n\t\tthis.setViewOffset();\r\n\r\n\t}\r\n\r\n\tsetViewOffset() {\r\n\r\n\t\tlet viewX = this.fullWidth * this.option.left;\r\n\t\tlet viewY = this.fullHeight * this.option.top;\r\n\t\tlet viewWidth = this.fullWidth * this.option.width;\r\n\t\tlet viewHeight = this.fullHeight * this.option.height;\r\n\t\tthis.world.camera.setViewOffset( this.fullWidth, this.fullHeight, viewX,\r\n\t\t\tviewY, viewWidth, viewHeight );\r\n\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tthis.setViewOffset();\r\n\t\tthis.renderer.render( this.world.scene, this.world.camera );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tMonitor\r\n};\r\n","const QRMode = {\r\n\tMODE_NUMBER: 1 << 0,\r\n\tMODE_ALPHA_NUM: 1 << 1,\r\n\tMODE_8BIT_BYTE: 1 << 2,\r\n\tMODE_KANJI: 1 << 3\r\n};\r\n\r\nclass QR8bitByte {\r\n\r\n\tconstructor( data ) {\r\n\r\n\t\tthis.mode = QRMode.MODE_8BIT_BYTE;\r\n\t\tthis.data = data;\r\n\t\tthis.parsedData = [];\r\n\r\n\t\tfor ( let i = 0, l = this.data.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet byteArray = [];\r\n\t\t\tlet code = this.data.charCodeAt( i );\r\n\r\n\t\t\tif ( code > 0x10000 ) {\r\n\r\n\t\t\t\tbyteArray[ 0 ] = 0xF0 | ( ( code & 0x1C0000 ) >>> 18 );\r\n\t\t\t\tbyteArray[ 1 ] = 0x80 | ( ( code & 0x3F000 ) >>> 12 );\r\n\t\t\t\tbyteArray[ 2 ] = 0x80 | ( ( code & 0xFC0 ) >>> 6 );\r\n\t\t\t\tbyteArray[ 3 ] = 0x80 | ( code & 0x3F );\r\n\r\n\t\t\t} else if ( code > 0x800 ) {\r\n\r\n\t\t\t\tbyteArray[ 0 ] = 0xE0 | ( ( code & 0xF000 ) >>> 12 );\r\n\t\t\t\tbyteArray[ 1 ] = 0x80 | ( ( code & 0xFC0 ) >>> 6 );\r\n\t\t\t\tbyteArray[ 2 ] = 0x80 | ( code & 0x3F );\r\n\r\n\t\t\t} else if ( code > 0x80 ) {\r\n\r\n\t\t\t\tbyteArray[ 0 ] = 0xC0 | ( ( code & 0x7C0 ) >>> 6 );\r\n\t\t\t\tbyteArray[ 1 ] = 0x80 | ( code & 0x3F );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbyteArray[ 0 ] = code;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.parsedData.push( byteArray );\r\n\r\n\t\t}\r\n\r\n\t\tthis.parsedData = Array.prototype.concat.apply( [], this.parsedData );\r\n\r\n\t\tif ( this.parsedData.length !== this.data.length ) {\r\n\r\n\t\t\tthis.parsedData.unshift( 191 );\r\n\t\t\tthis.parsedData.unshift( 187 );\r\n\t\t\tthis.parsedData.unshift( 239 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetLength() {\r\n\r\n\t\treturn this.parsedData.length;\r\n\r\n\t}\r\n\r\n\twrite( buffer ) {\r\n\r\n\t\tfor ( let i = 0, l = this.parsedData.length; i < l; i ++ ) {\r\n\r\n\t\t\tbuffer.put( this.parsedData[ i ], 8 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass QRCodeModel {\r\n\r\n\tconstructor( typeNumber, errorCorrectLevel ) {\r\n\r\n\t\tthis.typeNumber = typeNumber;\r\n\t\tthis.errorCorrectLevel = errorCorrectLevel;\r\n\t\tthis.modules = undefined;\r\n\t\tthis.moduleCount = 0;\r\n\t\tthis.dataCache = undefined;\r\n\t\tthis.dataList = [];\r\n\r\n\t}\r\n\taddData( data ) {\r\n\r\n\t\tlet newData = new QR8bitByte( data );\r\n\t\tthis.dataList.push( newData );\r\n\t\tthis.dataCache = undefined;\r\n\r\n\t}\r\n\r\n\tisDark( row, col ) {\r\n\r\n\t\tif ( row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <=\r\n      col ) {\r\n\r\n\t\t\tthrow new Error( row + \",\" + col );\r\n\r\n\t\t}\r\n\t\treturn this.modules[ row ][ col ];\r\n\r\n\t}\r\n\r\n\tgetModuleCount() {\r\n\r\n\t\treturn this.moduleCount;\r\n\r\n\t}\r\n\r\n\tmake() {\r\n\r\n\t\tthis.makeImpl( false, this.getBestMaskPattern() );\r\n\r\n\t}\r\n\r\n\tmakeImpl( test, maskPattern ) {\r\n\r\n\t\tthis.moduleCount = this.typeNumber * 4 + 17;\r\n\t\tthis.modules = new Array( this.moduleCount );\r\n\t\tfor ( let row = 0; row < this.moduleCount; row ++ ) {\r\n\r\n\t\t\tthis.modules[ row ] = new Array( this.moduleCount );\r\n\t\t\tfor ( let col = 0; col < this.moduleCount; col ++ ) {\r\n\r\n\t\t\t\tthis.modules[ row ][ col ] = undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.setupPositionProbePattern( 0, 0 );\r\n\t\tthis.setupPositionProbePattern( this.moduleCount - 7, 0 );\r\n\t\tthis.setupPositionProbePattern( 0, this.moduleCount - 7 );\r\n\t\tthis.setupPositionAdjustPattern();\r\n\t\tthis.setupTimingPattern();\r\n\t\tthis.setupTypeInfo( test, maskPattern );\r\n\t\tif ( this.typeNumber >= 7 ) {\r\n\r\n\t\t\tthis.setupTypeNumber( test );\r\n\r\n\t\t}\r\n\t\tif ( this.dataCache === undefined ) {\r\n\r\n\t\t\tthis.dataCache = QRCodeModel.createData( this.typeNumber, this.errorCorrectLevel,\r\n\t\t\t\tthis.dataList );\r\n\r\n\t\t}\r\n\t\tthis.mapData( this.dataCache, maskPattern );\r\n\r\n\t}\r\n\r\n\tsetupPositionProbePattern( row, col ) {\r\n\r\n\t\tfor ( let r = - 1; r <= 7; r ++ ) {\r\n\r\n\t\t\tif ( row + r <= - 1 || this.moduleCount <= row + r ) continue;\r\n\t\t\tfor ( let c = - 1; c <= 7; c ++ ) {\r\n\r\n\t\t\t\tif ( col + c <= - 1 || this.moduleCount <= col + c ) continue;\r\n\t\t\t\tif ( ( 0 <= r && r <= 6 && ( c === 0 || c === 6 ) ) || ( 0 <= c && c <=\r\n            6 && ( r === 0 || r === 6 ) ) || ( 2 <= r && r <= 4 && 2 <= c &&\r\n            c <= 4 ) ) {\r\n\r\n\t\t\t\t\tthis.modules[ row + r ][ col + c ] = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.modules[ row + r ][ col + c ] = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetBestMaskPattern() {\r\n\r\n\t\tlet minLostPoint = 0;\r\n\t\tlet pattern = 0;\r\n\t\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tthis.makeImpl( true, i );\r\n\t\t\tlet lostPoint = QRUtil.getLostPoint( this );\r\n\t\t\tif ( i === 0 || minLostPoint > lostPoint ) {\r\n\r\n\t\t\t\tminLostPoint = lostPoint;\r\n\t\t\t\tpattern = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn pattern;\r\n\r\n\t}\r\n\r\n\tcreateMovieClip( target_mc, instance_name, depth ) {\r\n\r\n\t\tlet qr_mc = target_mc.createEmptyMovieClip( instance_name, depth );\r\n\t\tlet cs = 1;\r\n\t\tthis.make();\r\n\t\tfor ( let row = 0; row < this.modules.length; row ++ ) {\r\n\r\n\t\t\tlet y = row * cs;\r\n\t\t\tfor ( let col = 0; col < this.modules[ row ].length; col ++ ) {\r\n\r\n\t\t\t\tlet x = col * cs;\r\n\t\t\t\tlet dark = this.modules[ row ][ col ];\r\n\t\t\t\tif ( dark ) {\r\n\r\n\t\t\t\t\tqr_mc.beginFill( 0, 100 );\r\n\t\t\t\t\tqr_mc.moveTo( x, y );\r\n\t\t\t\t\tqr_mc.lineTo( x + cs, y );\r\n\t\t\t\t\tqr_mc.lineTo( x + cs, y + cs );\r\n\t\t\t\t\tqr_mc.lineTo( x, y + cs );\r\n\t\t\t\t\tqr_mc.endFill();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn qr_mc;\r\n\r\n\t}\r\n\r\n\tsetupTimingPattern() {\r\n\r\n\t\tfor ( let r = 8; r < this.moduleCount - 8; r ++ ) {\r\n\r\n\t\t\tif ( this.modules[ r ][ 6 ] !== undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\t\t\tthis.modules[ r ][ 6 ] = ( r % 2 === 0 );\r\n\r\n\t\t}\r\n\t\tfor ( let c = 8; c < this.moduleCount - 8; c ++ ) {\r\n\r\n\t\t\tif ( this.modules[ 6 ][ c ] !== undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\t\t\tthis.modules[ 6 ][ c ] = ( c % 2 === 0 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsetupPositionAdjustPattern() {\r\n\r\n\t\tlet pos = QRUtil.getPatternPosition( this.typeNumber );\r\n\t\tfor ( let i = 0; i < pos.length; i ++ ) {\r\n\r\n\t\t\tfor ( let j = 0; j < pos.length; j ++ ) {\r\n\r\n\t\t\t\tlet row = pos[ i ];\r\n\t\t\t\tlet col = pos[ j ];\r\n\t\t\t\tif ( this.modules[ row ][ col ] !== undefined ) {\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tfor ( let r = - 2; r <= 2; r ++ ) {\r\n\r\n\t\t\t\t\tfor ( let c = - 2; c <= 2; c ++ ) {\r\n\r\n\t\t\t\t\t\tif ( r === - 2 || r === 2 || c === - 2 || c === 2 || ( r === 0 && c ==\r\n                0 ) ) {\r\n\r\n\t\t\t\t\t\t\tthis.modules[ row + r ][ col + c ] = true;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tthis.modules[ row + r ][ col + c ] = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsetupTypeNumber( test ) {\r\n\r\n\t\tlet bits = QRUtil.getBCHTypeNumber( this.typeNumber );\r\n\t\tfor ( let i = 0; i < 18; i ++ ) {\r\n\r\n\t\t\tlet mod = ( ! test && ( ( bits >> i ) & 1 ) === 1 );\r\n\t\t\tthis.modules[ Math.floor( i / 3 ) ][ i % 3 + this.moduleCount - 8 - 3 ] =\r\n        mod;\r\n\r\n\t\t}\r\n\t\tfor ( let i = 0; i < 18; i ++ ) {\r\n\r\n\t\t\tlet mod = ( ! test && ( ( bits >> i ) & 1 ) === 1 );\r\n\t\t\tthis.modules[ i % 3 + this.moduleCount - 8 - 3 ][ Math.floor( i / 3 ) ] =\r\n        mod;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsetupTypeInfo( test, maskPattern ) {\r\n\r\n\t\tlet data = ( this.errorCorrectLevel << 3 ) | maskPattern;\r\n\t\tlet bits = QRUtil.getBCHTypeInfo( data );\r\n\t\tfor ( let i = 0; i < 15; i ++ ) {\r\n\r\n\t\t\tlet mod = ( ! test && ( ( bits >> i ) & 1 ) === 1 );\r\n\t\t\tif ( i < 6 ) {\r\n\r\n\t\t\t\tthis.modules[ i ][ 8 ] = mod;\r\n\r\n\t\t\t} else if ( i < 8 ) {\r\n\r\n\t\t\t\tthis.modules[ i + 1 ][ 8 ] = mod;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.modules[ this.moduleCount - 15 + i ][ 8 ] = mod;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfor ( let i = 0; i < 15; i ++ ) {\r\n\r\n\t\t\tlet mod = ( ! test && ( ( bits >> i ) & 1 ) === 1 );\r\n\t\t\tif ( i < 8 ) {\r\n\r\n\t\t\t\tthis.modules[ 8 ][ this.moduleCount - i - 1 ] = mod;\r\n\r\n\t\t\t} else if ( i < 9 ) {\r\n\r\n\t\t\t\tthis.modules[ 8 ][ 15 - i - 1 + 1 ] = mod;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.modules[ 8 ][ 15 - i - 1 ] = mod;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.modules[ this.moduleCount - 8 ][ 8 ] = ( ! test );\r\n\r\n\t}\r\n\r\n\tmapData( data, maskPattern ) {\r\n\r\n\t\tlet inc = - 1;\r\n\t\tlet row = this.moduleCount - 1;\r\n\t\tlet bitIndex = 7;\r\n\t\tlet byteIndex = 0;\r\n\t\tfor ( let col = this.moduleCount - 1; col > 0; col -= 2 ) {\r\n\r\n\t\t\tif ( col === 6 ) col --;\r\n\t\t\twhile ( true ) {\r\n\r\n\t\t\t\tfor ( let c = 0; c < 2; c ++ ) {\r\n\r\n\t\t\t\t\tif ( this.modules[ row ][ col - c ] === undefined ) {\r\n\r\n\t\t\t\t\t\tlet dark = false;\r\n\t\t\t\t\t\tif ( byteIndex < data.length ) {\r\n\r\n\t\t\t\t\t\t\tdark = ( ( ( data[ byteIndex ] >>> bitIndex ) & 1 ) === 1 );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet mask = QRUtil.getMask( maskPattern, row, col - c );\r\n\t\t\t\t\t\tif ( mask ) {\r\n\r\n\t\t\t\t\t\t\tdark = ! dark;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.modules[ row ][ col - c ] = dark;\r\n\t\t\t\t\t\tbitIndex --;\r\n\t\t\t\t\t\tif ( bitIndex === - 1 ) {\r\n\r\n\t\t\t\t\t\t\tbyteIndex ++;\r\n\t\t\t\t\t\t\tbitIndex = 7;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\trow += inc;\r\n\t\t\t\tif ( row < 0 || this.moduleCount <= row ) {\r\n\r\n\t\t\t\t\trow -= inc;\r\n\t\t\t\t\tinc = - inc;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nQRCodeModel.PAD0 = 0xEC;\r\nQRCodeModel.PAD1 = 0x11;\r\nQRCodeModel.createData = function ( typeNumber, errorCorrectLevel, dataList ) {\r\n\r\n\tlet rsBlocks = QRRSBlock.getRSBlocks( typeNumber, errorCorrectLevel );\r\n\tlet buffer = new QRBitBuffer();\r\n\tfor ( let i = 0; i < dataList.length; i ++ ) {\r\n\r\n\t\tlet data = dataList[ i ];\r\n\t\tbuffer.put( data.mode, 4 );\r\n\t\tbuffer.put( data.getLength(), QRUtil.getLengthInBits( data.mode,\r\n\t\t\ttypeNumber ) );\r\n\t\tdata.write( buffer );\r\n\r\n\t}\r\n\tlet totalDataCount = 0;\r\n\tfor ( let i = 0; i < rsBlocks.length; i ++ ) {\r\n\r\n\t\ttotalDataCount += rsBlocks[ i ].dataCount;\r\n\r\n\t}\r\n\tif ( buffer.getLengthInBits() > totalDataCount * 8 ) {\r\n\r\n\t\tthrow new Error( \"code length overflow. (\" +\r\n      buffer.getLengthInBits() +\r\n      \">\" +\r\n      totalDataCount * 8 +\r\n      \")\" );\r\n\r\n\t}\r\n\tif ( buffer.getLengthInBits() + 4 <= totalDataCount * 8 ) {\r\n\r\n\t\tbuffer.put( 0, 4 );\r\n\r\n\t}\r\n\twhile ( buffer.getLengthInBits() % 8 !== 0 ) {\r\n\r\n\t\tbuffer.putBit( false );\r\n\r\n\t}\r\n\twhile ( true ) {\r\n\r\n\t\tif ( buffer.getLengthInBits() >= totalDataCount * 8 ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\t\tbuffer.put( QRCodeModel.PAD0, 8 );\r\n\t\tif ( buffer.getLengthInBits() >= totalDataCount * 8 ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\t\tbuffer.put( QRCodeModel.PAD1, 8 );\r\n\r\n\t}\r\n\treturn QRCodeModel.createBytes( buffer, rsBlocks );\r\n\r\n};\r\nQRCodeModel.createBytes = function ( buffer, rsBlocks ) {\r\n\r\n\tlet offset = 0;\r\n\tlet maxDcCount = 0;\r\n\tlet maxEcCount = 0;\r\n\tlet dcdata = new Array( rsBlocks.length );\r\n\tlet ecdata = new Array( rsBlocks.length );\r\n\tfor ( let r = 0; r < rsBlocks.length; r ++ ) {\r\n\r\n\t\tlet dcCount = rsBlocks[ r ].dataCount;\r\n\t\tlet ecCount = rsBlocks[ r ].totalCount - dcCount;\r\n\t\tmaxDcCount = Math.max( maxDcCount, dcCount );\r\n\t\tmaxEcCount = Math.max( maxEcCount, ecCount );\r\n\t\tdcdata[ r ] = new Array( dcCount );\r\n\t\tfor ( let i = 0; i < dcdata[ r ].length; i ++ ) {\r\n\r\n\t\t\tdcdata[ r ][ i ] = 0xff & buffer.buffer[ i + offset ];\r\n\r\n\t\t}\r\n\t\toffset += dcCount;\r\n\t\tlet rsPoly = QRUtil.getErrorCorrectPolynomial( ecCount );\r\n\t\tlet rawPoly = new QRPolynomial( dcdata[ r ], rsPoly.getLength() - 1 );\r\n\t\tlet modPoly = rawPoly.mod( rsPoly );\r\n\t\tecdata[ r ] = new Array( rsPoly.getLength() - 1 );\r\n\t\tfor ( let i = 0; i < ecdata[ r ].length; i ++ ) {\r\n\r\n\t\t\tlet modIndex = i + modPoly.getLength() - ecdata[ r ].length;\r\n\t\t\tecdata[ r ][ i ] = ( modIndex >= 0 ) ? modPoly.get( modIndex ) : 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\tlet totalCodeCount = 0;\r\n\tfor ( let i = 0; i < rsBlocks.length; i ++ ) {\r\n\r\n\t\ttotalCodeCount += rsBlocks[ i ].totalCount;\r\n\r\n\t}\r\n\tlet data = new Array( totalCodeCount );\r\n\tlet index = 0;\r\n\tfor ( let i = 0; i < maxDcCount; i ++ ) {\r\n\r\n\t\tfor ( let r = 0; r < rsBlocks.length; r ++ ) {\r\n\r\n\t\t\tif ( i < dcdata[ r ].length ) {\r\n\r\n\t\t\t\tdata[ index ++ ] = dcdata[ r ][ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\tfor ( let i = 0; i < maxEcCount; i ++ ) {\r\n\r\n\t\tfor ( let r = 0; r < rsBlocks.length; r ++ ) {\r\n\r\n\t\t\tif ( i < ecdata[ r ].length ) {\r\n\r\n\t\t\t\tdata[ index ++ ] = ecdata[ r ][ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\treturn data;\r\n\r\n};\r\n\r\nconst QRErrorCorrectLevel = {\r\n\tL: 1,\r\n\tM: 0,\r\n\tQ: 3,\r\n\tH: 2\r\n};\r\nconst QRMaskPattern = {\r\n\tPATTERN000: 0,\r\n\tPATTERN001: 1,\r\n\tPATTERN010: 2,\r\n\tPATTERN011: 3,\r\n\tPATTERN100: 4,\r\n\tPATTERN101: 5,\r\n\tPATTERN110: 6,\r\n\tPATTERN111: 7\r\n};\r\nlet QRUtil = {\r\n\tPATTERN_POSITION_TABLE: [\r\n\t\t[],\r\n\t\t[ 6, 18 ],\r\n\t\t[ 6, 22 ],\r\n\t\t[ 6, 26 ],\r\n\t\t[ 6, 30 ],\r\n\t\t[ 6, 34 ],\r\n\t\t[ 6, 22, 38 ],\r\n\t\t[ 6, 24, 42 ],\r\n\t\t[ 6, 26, 46 ],\r\n\t\t[ 6, 28, 50 ],\r\n\t\t[ 6, 30, 54 ],\r\n\t\t[ 6, 32, 58 ],\r\n\t\t[ 6, 34, 62 ],\r\n\t\t[ 6, 26, 46, 66 ],\r\n\t\t[ 6, 26, 48, 70 ],\r\n\t\t[ 6, 26, 50, 74 ],\r\n\t\t[ 6, 30, 54, 78 ],\r\n\t\t[ 6, 30, 56, 82 ],\r\n\t\t[ 6, 30, 58, 86 ],\r\n\t\t[ 6, 34, 62, 90 ],\r\n\t\t[ 6, 28, 50, 72, 94 ],\r\n\t\t[ 6, 26, 50, 74, 98 ],\r\n\t\t[ 6, 30, 54, 78, 102 ],\r\n\t\t[ 6, 28, 54, 80, 106 ],\r\n\t\t[ 6, 32, 58, 84, 110 ],\r\n\t\t[ 6, 30, 58, 86, 114 ],\r\n\t\t[ 6, 34, 62, 90, 118 ],\r\n\t\t[ 6, 26, 50, 74, 98, 122 ],\r\n\t\t[ 6, 30, 54, 78, 102, 126 ],\r\n\t\t[ 6, 26, 52, 78, 104, 130 ],\r\n\t\t[ 6, 30, 56, 82, 108, 134 ],\r\n\t\t[ 6, 34, 60, 86, 112, 138 ],\r\n\t\t[ 6, 30, 58, 86, 114, 142 ],\r\n\t\t[ 6, 34, 62, 90, 118, 146 ],\r\n\t\t[ 6, 30, 54, 78, 102, 126, 150 ],\r\n\t\t[ 6, 24, 50, 76, 102, 128, 154 ],\r\n\t\t[ 6, 28, 54, 80, 106, 132, 158 ],\r\n\t\t[ 6, 32, 58, 84, 110, 136, 162 ],\r\n\t\t[ 6, 26, 54, 82, 110, 138, 166 ],\r\n\t\t[ 6, 30, 58, 86, 114, 142, 170 ]\r\n\t],\r\n\tG15: ( 1 << 10 ) | ( 1 << 8 ) | ( 1 << 5 ) | ( 1 << 4 ) | ( 1 << 2 ) | ( 1 << 1 ) |\r\n    ( 1 << 0 ),\r\n\tG18: ( 1 << 12 ) | ( 1 << 11 ) | ( 1 << 10 ) | ( 1 << 9 ) | ( 1 << 8 ) | ( 1 << 5 ) |\r\n    ( 1 << 2 ) | ( 1 << 0 ),\r\n\tG15_MASK: ( 1 << 14 ) | ( 1 << 12 ) | ( 1 << 10 ) | ( 1 << 4 ) | ( 1 << 1 ),\r\n\tgetBCHTypeInfo: function ( data ) {\r\n\r\n\t\tlet d = data << 10;\r\n\t\twhile ( QRUtil.getBCHDigit( d ) - QRUtil.getBCHDigit( QRUtil.G15 ) >= 0 ) {\r\n\r\n\t\t\td ^= ( QRUtil.G15 << ( QRUtil.getBCHDigit( d ) - QRUtil.getBCHDigit(\r\n\t\t\t\tQRUtil.G15 ) ) );\r\n\r\n\t\t}\r\n\t\treturn ( ( data << 10 ) | d ) ^ QRUtil.G15_MASK;\r\n\r\n\t},\r\n\tgetBCHTypeNumber: function ( data ) {\r\n\r\n\t\tlet d = data << 12;\r\n\t\twhile ( QRUtil.getBCHDigit( d ) - QRUtil.getBCHDigit( QRUtil.G18 ) >= 0 ) {\r\n\r\n\t\t\td ^= ( QRUtil.G18 << ( QRUtil.getBCHDigit( d ) - QRUtil.getBCHDigit(\r\n\t\t\t\tQRUtil.G18 ) ) );\r\n\r\n\t\t}\r\n\t\treturn ( data << 12 ) | d;\r\n\r\n\t},\r\n\tgetBCHDigit: function ( data ) {\r\n\r\n\t\tlet digit = 0;\r\n\t\twhile ( data !== 0 ) {\r\n\r\n\t\t\tdigit ++;\r\n\t\t\tdata >>>= 1;\r\n\r\n\t\t}\r\n\t\treturn digit;\r\n\r\n\t},\r\n\tgetPatternPosition: function ( typeNumber ) {\r\n\r\n\t\treturn QRUtil.PATTERN_POSITION_TABLE[ typeNumber - 1 ];\r\n\r\n\t},\r\n\tgetMask: function ( maskPattern, i, j ) {\r\n\r\n\t\tswitch ( maskPattern ) {\r\n\r\n\t\t\tcase QRMaskPattern.PATTERN000:\r\n\t\t\t\treturn ( i + j ) % 2 === 0;\r\n\t\t\tcase QRMaskPattern.PATTERN001:\r\n\t\t\t\treturn i % 2 === 0;\r\n\t\t\tcase QRMaskPattern.PATTERN010:\r\n\t\t\t\treturn j % 3 === 0;\r\n\t\t\tcase QRMaskPattern.PATTERN011:\r\n\t\t\t\treturn ( i + j ) % 3 === 0;\r\n\t\t\tcase QRMaskPattern.PATTERN100:\r\n\t\t\t\treturn ( Math.floor( i / 2 ) + Math.floor( j / 3 ) ) % 2 === 0;\r\n\t\t\tcase QRMaskPattern.PATTERN101:\r\n\t\t\t\treturn ( i * j ) % 2 + ( i * j ) % 3 === 0;\r\n\t\t\tcase QRMaskPattern.PATTERN110:\r\n\t\t\t\treturn ( ( i * j ) % 2 + ( i * j ) % 3 ) % 2 === 0;\r\n\t\t\tcase QRMaskPattern.PATTERN111:\r\n\t\t\t\treturn ( ( i * j ) % 3 + ( i + j ) % 2 ) % 2 === 0;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( \"bad maskPattern:\" + maskPattern );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\tgetErrorCorrectPolynomial: function ( errorCorrectLength ) {\r\n\r\n\t\tlet a = new QRPolynomial( [ 1 ], 0 );\r\n\t\tfor ( let i = 0; i < errorCorrectLength; i ++ ) {\r\n\r\n\t\t\ta = a.multiply( new QRPolynomial( [ 1, QRMath.gexp( i ) ], 0 ) );\r\n\r\n\t\t}\r\n\t\treturn a;\r\n\r\n\t},\r\n\tgetLengthInBits: function ( mode, type ) {\r\n\r\n\t\tif ( 1 <= type && type < 10 ) {\r\n\r\n\t\t\tswitch ( mode ) {\r\n\r\n\t\t\t\tcase QRMode.MODE_NUMBER:\r\n\t\t\t\t\treturn 10;\r\n\t\t\t\tcase QRMode.MODE_ALPHA_NUM:\r\n\t\t\t\t\treturn 9;\r\n\t\t\t\tcase QRMode.MODE_8BIT_BYTE:\r\n\t\t\t\t\treturn 8;\r\n\t\t\t\tcase QRMode.MODE_KANJI:\r\n\t\t\t\t\treturn 8;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error( \"mode:\" + mode );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( type < 27 ) {\r\n\r\n\t\t\tswitch ( mode ) {\r\n\r\n\t\t\t\tcase QRMode.MODE_NUMBER:\r\n\t\t\t\t\treturn 12;\r\n\t\t\t\tcase QRMode.MODE_ALPHA_NUM:\r\n\t\t\t\t\treturn 11;\r\n\t\t\t\tcase QRMode.MODE_8BIT_BYTE:\r\n\t\t\t\t\treturn 16;\r\n\t\t\t\tcase QRMode.MODE_KANJI:\r\n\t\t\t\t\treturn 10;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error( \"mode:\" + mode );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( type < 41 ) {\r\n\r\n\t\t\tswitch ( mode ) {\r\n\r\n\t\t\t\tcase QRMode.MODE_NUMBER:\r\n\t\t\t\t\treturn 14;\r\n\t\t\t\tcase QRMode.MODE_ALPHA_NUM:\r\n\t\t\t\t\treturn 13;\r\n\t\t\t\tcase QRMode.MODE_8BIT_BYTE:\r\n\t\t\t\t\treturn 16;\r\n\t\t\t\tcase QRMode.MODE_KANJI:\r\n\t\t\t\t\treturn 12;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error( \"mode:\" + mode );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthrow new Error( \"type:\" + type );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\tgetLostPoint: function ( qrCode ) {\r\n\r\n\t\tlet moduleCount = qrCode.getModuleCount();\r\n\t\tlet lostPoint = 0;\r\n\t\tfor ( let row = 0; row < moduleCount; row ++ ) {\r\n\r\n\t\t\tfor ( let col = 0; col < moduleCount; col ++ ) {\r\n\r\n\t\t\t\tlet sameCount = 0;\r\n\t\t\t\tlet dark = qrCode.isDark( row, col );\r\n\t\t\t\tfor ( let r = - 1; r <= 1; r ++ ) {\r\n\r\n\t\t\t\t\tif ( row + r < 0 || moduleCount <= row + r ) {\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor ( let c = - 1; c <= 1; c ++ ) {\r\n\r\n\t\t\t\t\t\tif ( col + c < 0 || moduleCount <= col + c ) {\r\n\r\n\t\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( r === 0 && c === 0 ) {\r\n\r\n\t\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( dark === qrCode.isDark( row + r, col + c ) ) {\r\n\r\n\t\t\t\t\t\t\tsameCount ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( sameCount > 5 ) {\r\n\r\n\t\t\t\t\tlostPoint += ( 3 + sameCount - 5 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfor ( let row = 0; row < moduleCount - 1; row ++ ) {\r\n\r\n\t\t\tfor ( let col = 0; col < moduleCount - 1; col ++ ) {\r\n\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif ( qrCode.isDark( row, col ) ) count ++;\r\n\t\t\t\tif ( qrCode.isDark( row + 1, col ) ) count ++;\r\n\t\t\t\tif ( qrCode.isDark( row, col + 1 ) ) count ++;\r\n\t\t\t\tif ( qrCode.isDark( row + 1, col + 1 ) ) count ++;\r\n\t\t\t\tif ( count === 0 || count === 4 ) {\r\n\r\n\t\t\t\t\tlostPoint += 3;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfor ( let row = 0; row < moduleCount; row ++ ) {\r\n\r\n\t\t\tfor ( let col = 0; col < moduleCount - 6; col ++ ) {\r\n\r\n\t\t\t\tif ( qrCode.isDark( row, col ) && ! qrCode.isDark( row, col + 1 ) &&\r\n          qrCode.isDark( row, col + 2 ) && qrCode.isDark( row, col + 3 ) &&\r\n          qrCode.isDark( row, col + 4 ) && ! qrCode.isDark( row, col + 5 ) &&\r\n          qrCode.isDark( row, col + 6 ) ) {\r\n\r\n\t\t\t\t\tlostPoint += 40;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfor ( let col = 0; col < moduleCount; col ++ ) {\r\n\r\n\t\t\tfor ( let row = 0; row < moduleCount - 6; row ++ ) {\r\n\r\n\t\t\t\tif ( qrCode.isDark( row, col ) && ! qrCode.isDark( row + 1, col ) &&\r\n          qrCode.isDark( row + 2, col ) && qrCode.isDark( row + 3, col ) &&\r\n          qrCode.isDark( row + 4, col ) && ! qrCode.isDark( row + 5, col ) &&\r\n          qrCode.isDark( row + 6, col ) ) {\r\n\r\n\t\t\t\t\tlostPoint += 40;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tlet darkCount = 0;\r\n\t\tfor ( let col = 0; col < moduleCount; col ++ ) {\r\n\r\n\t\t\tfor ( let row = 0; row < moduleCount; row ++ ) {\r\n\r\n\t\t\t\tif ( qrCode.isDark( row, col ) ) {\r\n\r\n\t\t\t\t\tdarkCount ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tlet ratio = Math.abs( 100 * darkCount / moduleCount / moduleCount -\r\n      50 ) / 5;\r\n\t\tlostPoint += ratio * 10;\r\n\t\treturn lostPoint;\r\n\r\n\t}\r\n};\r\nlet QRMath = {\r\n\tglog: function ( n ) {\r\n\r\n\t\tif ( n < 1 ) {\r\n\r\n\t\t\tthrow new Error( \"glog(\" + n + \")\" );\r\n\r\n\t\t}\r\n\t\treturn QRMath.LOG_TABLE[ n ];\r\n\r\n\t},\r\n\tgexp: function ( n ) {\r\n\r\n\t\twhile ( n < 0 ) {\r\n\r\n\t\t\tn += 255;\r\n\r\n\t\t}\r\n\t\twhile ( n >= 256 ) {\r\n\r\n\t\t\tn -= 255;\r\n\r\n\t\t}\r\n\t\treturn QRMath.EXP_TABLE[ n ];\r\n\r\n\t},\r\n\tEXP_TABLE: new Array( 256 ),\r\n\tLOG_TABLE: new Array( 256 )\r\n};\r\nfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\tQRMath.EXP_TABLE[ i ] = 1 << i;\r\n\r\n}\r\nfor ( let i = 8; i < 256; i ++ ) {\r\n\r\n\tQRMath.EXP_TABLE[ i ] = QRMath.EXP_TABLE[ i - 4 ] ^ QRMath.EXP_TABLE[ i - 5 ] ^\r\n    QRMath.EXP_TABLE[ i - 6 ] ^ QRMath.EXP_TABLE[ i - 8 ];\r\n\r\n}\r\nfor ( let i = 0; i < 255; i ++ ) {\r\n\r\n\tQRMath.LOG_TABLE[ QRMath.EXP_TABLE[ i ] ] = i;\r\n\r\n}\r\n\r\nfunction QRPolynomial( num, shift ) {\r\n\r\n\tif ( num.length === undefined ) {\r\n\r\n\t\tthrow new Error( num.length + \"/\" + shift );\r\n\r\n\t}\r\n\tlet offset = 0;\r\n\twhile ( offset < num.length && num[ offset ] === 0 ) {\r\n\r\n\t\toffset ++;\r\n\r\n\t}\r\n\tthis.num = new Array( num.length - offset + shift );\r\n\tfor ( let i = 0; i < num.length - offset; i ++ ) {\r\n\r\n\t\tthis.num[ i ] = num[ i + offset ];\r\n\r\n\t}\r\n\r\n}\r\nQRPolynomial.prototype = {\r\n\tget: function ( index ) {\r\n\r\n\t\treturn this.num[ index ];\r\n\r\n\t},\r\n\tgetLength: function () {\r\n\r\n\t\treturn this.num.length;\r\n\r\n\t},\r\n\tmultiply: function ( e ) {\r\n\r\n\t\tlet num = new Array( this.getLength() + e.getLength() - 1 );\r\n\t\tfor ( let i = 0; i < this.getLength(); i ++ ) {\r\n\r\n\t\t\tfor ( let j = 0; j < e.getLength(); j ++ ) {\r\n\r\n\t\t\t\tnum[ i + j ] ^= QRMath.gexp( QRMath.glog( this.get( i ) ) + QRMath.glog(\r\n\t\t\t\t\te.get( j ) ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn new QRPolynomial( num, 0 );\r\n\r\n\t},\r\n\tmod: function ( e ) {\r\n\r\n\t\tif ( this.getLength() - e.getLength() < 0 ) {\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t\tlet ratio = QRMath.glog( this.get( 0 ) ) - QRMath.glog( e.get( 0 ) );\r\n\t\tlet num = new Array( this.getLength() );\r\n\t\tfor ( let i = 0; i < this.getLength(); i ++ ) {\r\n\r\n\t\t\tnum[ i ] = this.get( i );\r\n\r\n\t\t}\r\n\t\tfor ( let i = 0; i < e.getLength(); i ++ ) {\r\n\r\n\t\t\tnum[ i ] ^= QRMath.gexp( QRMath.glog( e.get( i ) ) + ratio );\r\n\r\n\t\t}\r\n\t\treturn new QRPolynomial( num, 0 )\r\n\t\t\t.mod( e );\r\n\r\n\t}\r\n};\r\n\r\nfunction QRRSBlock( totalCount, dataCount ) {\r\n\r\n\tthis.totalCount = totalCount;\r\n\tthis.dataCount = dataCount;\r\n\r\n}\r\nQRRSBlock.RS_BLOCK_TABLE = [\r\n\t[ 1, 26, 19 ],\r\n\t[ 1, 26, 16 ],\r\n\t[ 1, 26, 13 ],\r\n\t[ 1, 26, 9 ],\r\n\t[ 1, 44, 34 ],\r\n\t[ 1, 44, 28 ],\r\n\t[ 1, 44, 22 ],\r\n\t[ 1, 44, 16 ],\r\n\t[ 1, 70, 55 ],\r\n\t[ 1, 70, 44 ],\r\n\t[ 2, 35, 17 ],\r\n\t[ 2, 35, 13 ],\r\n\t[ 1, 100, 80 ],\r\n\t[ 2, 50, 32 ],\r\n\t[ 2, 50, 24 ],\r\n\t[ 4, 25, 9 ],\r\n\t[ 1, 134, 108 ],\r\n\t[ 2, 67, 43 ],\r\n\t[ 2, 33, 15, 2, 34, 16 ],\r\n\t[ 2, 33, 11, 2, 34, 12 ],\r\n\t[ 2, 86, 68 ],\r\n\t[ 4, 43, 27 ],\r\n\t[ 4, 43, 19 ],\r\n\t[ 4, 43, 15 ],\r\n\t[ 2, 98, 78 ],\r\n\t[ 4, 49, 31 ],\r\n\t[ 2, 32, 14, 4, 33, 15 ],\r\n\t[ 4, 39, 13, 1, 40, 14 ],\r\n\t[ 2, 121, 97 ],\r\n\t[ 2, 60, 38, 2, 61, 39 ],\r\n\t[ 4, 40, 18, 2, 41, 19 ],\r\n\t[ 4, 40, 14, 2, 41, 15 ],\r\n\t[ 2, 146, 116 ],\r\n\t[ 3, 58, 36, 2, 59, 37 ],\r\n\t[ 4, 36, 16, 4, 37, 17 ],\r\n\t[ 4, 36, 12, 4, 37, 13 ],\r\n\t[ 2, 86, 68, 2, 87, 69 ],\r\n\t[ 4, 69, 43, 1, 70, 44 ],\r\n\t[ 6, 43, 19, 2, 44, 20 ],\r\n\t[ 6, 43, 15, 2, 44, 16 ],\r\n\t[ 4, 101, 81 ],\r\n\t[ 1, 80, 50, 4, 81, 51 ],\r\n\t[ 4, 50, 22, 4, 51, 23 ],\r\n\t[ 3, 36, 12, 8, 37, 13 ],\r\n\t[ 2, 116, 92, 2, 117, 93 ],\r\n\t[ 6, 58, 36, 2, 59, 37 ],\r\n\t[ 4, 46, 20, 6, 47, 21 ],\r\n\t[ 7, 42, 14, 4, 43, 15 ],\r\n\t[ 4, 133, 107 ],\r\n\t[ 8, 59, 37, 1, 60, 38 ],\r\n\t[ 8, 44, 20, 4, 45, 21 ],\r\n\t[ 12, 33, 11, 4, 34, 12 ],\r\n\t[ 3, 145, 115, 1, 146, 116 ],\r\n\t[ 4, 64, 40, 5, 65, 41 ],\r\n\t[ 11, 36, 16, 5, 37, 17 ],\r\n\t[ 11, 36, 12, 5, 37, 13 ],\r\n\t[ 5, 109, 87, 1, 110, 88 ],\r\n\t[ 5, 65, 41, 5, 66, 42 ],\r\n\t[ 5, 54, 24, 7, 55, 25 ],\r\n\t[ 11, 36, 12 ],\r\n\t[ 5, 122, 98, 1, 123, 99 ],\r\n\t[ 7, 73, 45, 3, 74, 46 ],\r\n\t[ 15, 43, 19, 2, 44, 20 ],\r\n\t[ 3, 45, 15, 13, 46, 16 ],\r\n\t[ 1, 135, 107, 5, 136, 108 ],\r\n\t[ 10, 74, 46, 1, 75, 47 ],\r\n\t[ 1, 50, 22, 15, 51, 23 ],\r\n\t[ 2, 42, 14, 17, 43, 15 ],\r\n\t[ 5, 150, 120, 1, 151, 121 ],\r\n\t[ 9, 69, 43, 4, 70, 44 ],\r\n\t[ 17, 50, 22, 1, 51, 23 ],\r\n\t[ 2, 42, 14, 19, 43, 15 ],\r\n\t[ 3, 141, 113, 4, 142, 114 ],\r\n\t[ 3, 70, 44, 11, 71, 45 ],\r\n\t[ 17, 47, 21, 4, 48, 22 ],\r\n\t[ 9, 39, 13, 16, 40, 14 ],\r\n\t[ 3, 135, 107, 5, 136, 108 ],\r\n\t[ 3, 67, 41, 13, 68, 42 ],\r\n\t[ 15, 54, 24, 5, 55, 25 ],\r\n\t[ 15, 43, 15, 10, 44, 16 ],\r\n\t[ 4, 144, 116, 4, 145, 117 ],\r\n\t[ 17, 68, 42 ],\r\n\t[ 17, 50, 22, 6, 51, 23 ],\r\n\t[ 19, 46, 16, 6, 47, 17 ],\r\n\t[ 2, 139, 111, 7, 140, 112 ],\r\n\t[ 17, 74, 46 ],\r\n\t[ 7, 54, 24, 16, 55, 25 ],\r\n\t[ 34, 37, 13 ],\r\n\t[ 4, 151, 121, 5, 152, 122 ],\r\n\t[ 4, 75, 47, 14, 76, 48 ],\r\n\t[ 11, 54, 24, 14, 55, 25 ],\r\n\t[ 16, 45, 15, 14, 46, 16 ],\r\n\t[ 6, 147, 117, 4, 148, 118 ],\r\n\t[ 6, 73, 45, 14, 74, 46 ],\r\n\t[ 11, 54, 24, 16, 55, 25 ],\r\n\t[ 30, 46, 16, 2, 47, 17 ],\r\n\t[ 8, 132, 106, 4, 133, 107 ],\r\n\t[ 8, 75, 47, 13, 76, 48 ],\r\n\t[ 7, 54, 24, 22, 55, 25 ],\r\n\t[ 22, 45, 15, 13, 46, 16 ],\r\n\t[ 10, 142, 114, 2, 143, 115 ],\r\n\t[ 19, 74, 46, 4, 75, 47 ],\r\n\t[ 28, 50, 22, 6, 51, 23 ],\r\n\t[ 33, 46, 16, 4, 47, 17 ],\r\n\t[ 8, 152, 122, 4, 153, 123 ],\r\n\t[ 22, 73, 45, 3, 74, 46 ],\r\n\t[ 8, 53, 23, 26, 54, 24 ],\r\n\t[ 12, 45, 15, 28, 46, 16 ],\r\n\t[ 3, 147, 117, 10, 148, 118 ],\r\n\t[ 3, 73, 45, 23, 74, 46 ],\r\n\t[ 4, 54, 24, 31, 55, 25 ],\r\n\t[ 11, 45, 15, 31, 46, 16 ],\r\n\t[ 7, 146, 116, 7, 147, 117 ],\r\n\t[ 21, 73, 45, 7, 74, 46 ],\r\n\t[ 1, 53, 23, 37, 54, 24 ],\r\n\t[ 19, 45, 15, 26, 46, 16 ],\r\n\t[ 5, 145, 115, 10, 146, 116 ],\r\n\t[ 19, 75, 47, 10, 76, 48 ],\r\n\t[ 15, 54, 24, 25, 55, 25 ],\r\n\t[ 23, 45, 15, 25, 46, 16 ],\r\n\t[ 13, 145, 115, 3, 146, 116 ],\r\n\t[ 2, 74, 46, 29, 75, 47 ],\r\n\t[ 42, 54, 24, 1, 55, 25 ],\r\n\t[ 23, 45, 15, 28, 46, 16 ],\r\n\t[ 17, 145, 115 ],\r\n\t[ 10, 74, 46, 23, 75, 47 ],\r\n\t[ 10, 54, 24, 35, 55, 25 ],\r\n\t[ 19, 45, 15, 35, 46, 16 ],\r\n\t[ 17, 145, 115, 1, 146, 116 ],\r\n\t[ 14, 74, 46, 21, 75, 47 ],\r\n\t[ 29, 54, 24, 19, 55, 25 ],\r\n\t[ 11, 45, 15, 46, 46, 16 ],\r\n\t[ 13, 145, 115, 6, 146, 116 ],\r\n\t[ 14, 74, 46, 23, 75, 47 ],\r\n\t[ 44, 54, 24, 7, 55, 25 ],\r\n\t[ 59, 46, 16, 1, 47, 17 ],\r\n\t[ 12, 151, 121, 7, 152, 122 ],\r\n\t[ 12, 75, 47, 26, 76, 48 ],\r\n\t[ 39, 54, 24, 14, 55, 25 ],\r\n\t[ 22, 45, 15, 41, 46, 16 ],\r\n\t[ 6, 151, 121, 14, 152, 122 ],\r\n\t[ 6, 75, 47, 34, 76, 48 ],\r\n\t[ 46, 54, 24, 10, 55, 25 ],\r\n\t[ 2, 45, 15, 64, 46, 16 ],\r\n\t[ 17, 152, 122, 4, 153, 123 ],\r\n\t[ 29, 74, 46, 14, 75, 47 ],\r\n\t[ 49, 54, 24, 10, 55, 25 ],\r\n\t[ 24, 45, 15, 46, 46, 16 ],\r\n\t[ 4, 152, 122, 18, 153, 123 ],\r\n\t[ 13, 74, 46, 32, 75, 47 ],\r\n\t[ 48, 54, 24, 14, 55, 25 ],\r\n\t[ 42, 45, 15, 32, 46, 16 ],\r\n\t[ 20, 147, 117, 4, 148, 118 ],\r\n\t[ 40, 75, 47, 7, 76, 48 ],\r\n\t[ 43, 54, 24, 22, 55, 25 ],\r\n\t[ 10, 45, 15, 67, 46, 16 ],\r\n\t[ 19, 148, 118, 6, 149, 119 ],\r\n\t[ 18, 75, 47, 31, 76, 48 ],\r\n\t[ 34, 54, 24, 34, 55, 25 ],\r\n\t[ 20, 45, 15, 61, 46, 16 ]\r\n];\r\nQRRSBlock.getRSBlocks = function ( typeNumber, errorCorrectLevel ) {\r\n\r\n\tlet rsBlock = QRRSBlock.getRsBlockTable( typeNumber, errorCorrectLevel );\r\n\tif ( rsBlock === undefined ) {\r\n\r\n\t\tthrow new Error( \"bad rs block @ typeNumber:\" + typeNumber +\r\n      \"/errorCorrectLevel:\" + errorCorrectLevel );\r\n\r\n\t}\r\n\tlet length = rsBlock.length / 3;\r\n\tlet list = [];\r\n\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\tlet count = rsBlock[ i * 3 + 0 ];\r\n\t\tlet totalCount = rsBlock[ i * 3 + 1 ];\r\n\t\tlet dataCount = rsBlock[ i * 3 + 2 ];\r\n\t\tfor ( let j = 0; j < count; j ++ ) {\r\n\r\n\t\t\tlist.push( new QRRSBlock( totalCount, dataCount ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\treturn list;\r\n\r\n};\r\nQRRSBlock.getRsBlockTable = function ( typeNumber, errorCorrectLevel ) {\r\n\r\n\tswitch ( errorCorrectLevel ) {\r\n\r\n\t\tcase QRErrorCorrectLevel.L:\r\n\t\t\treturn QRRSBlock.RS_BLOCK_TABLE[ ( typeNumber - 1 ) * 4 + 0 ];\r\n\t\tcase QRErrorCorrectLevel.M:\r\n\t\t\treturn QRRSBlock.RS_BLOCK_TABLE[ ( typeNumber - 1 ) * 4 + 1 ];\r\n\t\tcase QRErrorCorrectLevel.Q:\r\n\t\t\treturn QRRSBlock.RS_BLOCK_TABLE[ ( typeNumber - 1 ) * 4 + 2 ];\r\n\t\tcase QRErrorCorrectLevel.H:\r\n\t\t\treturn QRRSBlock.RS_BLOCK_TABLE[ ( typeNumber - 1 ) * 4 + 3 ];\r\n\t\tdefault:\r\n\t\t\treturn undefined;\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction QRBitBuffer() {\r\n\r\n\tthis.buffer = [];\r\n\tthis.length = 0;\r\n\r\n}\r\nQRBitBuffer.prototype = {\r\n\tget: function ( index ) {\r\n\r\n\t\tlet bufIndex = Math.floor( index / 8 );\r\n\t\treturn ( ( this.buffer[ bufIndex ] >>> ( 7 - index % 8 ) ) & 1 ) === 1;\r\n\r\n\t},\r\n\tput: function ( num, length ) {\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tthis.putBit( ( ( num >>> ( length - i - 1 ) ) & 1 ) === 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\tgetLengthInBits: function () {\r\n\r\n\t\treturn this.length;\r\n\r\n\t},\r\n\tputBit: function ( bit ) {\r\n\r\n\t\tlet bufIndex = Math.floor( this.length / 8 );\r\n\t\tif ( this.buffer.length <= bufIndex ) {\r\n\r\n\t\t\tthis.buffer.push( 0 );\r\n\r\n\t\t}\r\n\t\tif ( bit ) {\r\n\r\n\t\t\tthis.buffer[ bufIndex ] |= ( 0x80 >>> ( this.length % 8 ) );\r\n\r\n\t\t}\r\n\t\tthis.length ++;\r\n\r\n\t}\r\n};\r\nlet QRCodeLimitLength = [\r\n\t[ 17, 14, 11, 7 ],\r\n\t[ 32, 26, 20, 14 ],\r\n\t[ 53, 42, 32, 24 ],\r\n\t[ 78, 62, 46, 34 ],\r\n\t[ 106, 84, 60, 44 ],\r\n\t[ 134, 106, 74, 58 ],\r\n\t[ 154, 122, 86, 64 ],\r\n\t[ 192, 152, 108, 84 ],\r\n\t[ 230, 180, 130, 98 ],\r\n\t[ 271, 213, 151, 119 ],\r\n\t[ 321, 251, 177, 137 ],\r\n\t[ 367, 287, 203, 155 ],\r\n\t[ 425, 331, 241, 177 ],\r\n\t[ 458, 362, 258, 194 ],\r\n\t[ 520, 412, 292, 220 ],\r\n\t[ 586, 450, 322, 250 ],\r\n\t[ 644, 504, 364, 280 ],\r\n\t[ 718, 560, 394, 310 ],\r\n\t[ 792, 624, 442, 338 ],\r\n\t[ 858, 666, 482, 382 ],\r\n\t[ 929, 711, 509, 403 ],\r\n\t[ 1003, 779, 565, 439 ],\r\n\t[ 1091, 857, 611, 461 ],\r\n\t[ 1171, 911, 661, 511 ],\r\n\t[ 1273, 997, 715, 535 ],\r\n\t[ 1367, 1059, 751, 593 ],\r\n\t[ 1465, 1125, 805, 625 ],\r\n\t[ 1528, 1190, 868, 658 ],\r\n\t[ 1628, 1264, 908, 698 ],\r\n\t[ 1732, 1370, 982, 742 ],\r\n\t[ 1840, 1452, 1030, 790 ],\r\n\t[ 1952, 1538, 1112, 842 ],\r\n\t[ 2068, 1628, 1168, 898 ],\r\n\t[ 2188, 1722, 1228, 958 ],\r\n\t[ 2303, 1809, 1283, 983 ],\r\n\t[ 2431, 1911, 1351, 1051 ],\r\n\t[ 2563, 1989, 1423, 1093 ],\r\n\t[ 2699, 2099, 1499, 1139 ],\r\n\t[ 2809, 2213, 1579, 1219 ],\r\n\t[ 2953, 2331, 1663, 1273 ]\r\n];\r\n\r\n/**\r\n * Get the type by string length\r\n *\r\n * @private\r\n * @param {String} sText\r\n * @param {Number} nCorrectLevel\r\n * @return {Number} type\r\n */\r\nfunction _getTypeNumber( sText, nCorrectLevel ) {\r\n\r\n\tlet nType = 1;\r\n\tlet length = _getUTF8Length( sText );\r\n\r\n\tfor ( let i = 0, len = QRCodeLimitLength.length; i <= len; i ++ ) {\r\n\r\n\t\tlet nLimit = 0;\r\n\r\n\t\tswitch ( nCorrectLevel ) {\r\n\r\n\t\t\tcase QRErrorCorrectLevel.L:\r\n\t\t\t\tnLimit = QRCodeLimitLength[ i ][ 0 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase QRErrorCorrectLevel.M:\r\n\t\t\t\tnLimit = QRCodeLimitLength[ i ][ 1 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase QRErrorCorrectLevel.Q:\r\n\t\t\t\tnLimit = QRCodeLimitLength[ i ][ 2 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase QRErrorCorrectLevel.H:\r\n\t\t\t\tnLimit = QRCodeLimitLength[ i ][ 3 ];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tnLimit = QRCodeLimitLength[ i ][ 1 ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( length <= nLimit ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnType ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( nType > QRCodeLimitLength.length ) {\r\n\r\n\t\tthrow new Error( \"Too long data\" );\r\n\r\n\t}\r\n\r\n\treturn nType;\r\n\r\n}\r\n\r\nfunction _getUTF8Length( sText ) {\r\n\r\n\tlet replacedText = encodeURI( sText )\r\n\t\t.toString()\r\n\t\t.replace( /\\%[0-9a-fA-F]{2}/g, 'a' );\r\n\treturn replacedText.length + ( replacedText.length !== sText ? 3 : 0 );\r\n\r\n}\r\n\r\nlet QRCode = function ( str, correctLevel = QRErrorCorrectLevel.H ) {\r\n\r\n\tthis.correctLevel = correctLevel;\r\n\tif ( str ) {\r\n\r\n\t\tthis.makeCode( str );\r\n\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * Make the QRCode\r\n *\r\n * @param {String} sText link data\r\n */\r\nQRCode.prototype.makeCode = function ( sText ) {\r\n\r\n\tlet oQRCode = new QRCodeModel( _getTypeNumber( sText, this.correctLevel ),\r\n\t\tthis.correctLevel );\r\n\toQRCode.addData( sText );\r\n\toQRCode.make();\r\n\tthis.size = oQRCode.moduleCount;\r\n\tthis.data = oQRCode.modules;\r\n\r\n};\r\n\r\n/**\r\n * @name QRCode.CorrectLevel\r\n */\r\nQRCode.CorrectLevel = QRErrorCorrectLevel;\r\n\r\nexport {\r\n\tQRCode\r\n};\r\n","import { World } from './World';\r\nimport { ShaderMaterial, OrthographicCamera, PlaneBufferGeometry, Mesh } from \"three\";\r\nimport { defaults } from \"lodash\";\r\n\r\nclass Transitioner {\r\n\r\n\tconstructor( app, world, texture, options = {} ) {\r\n\r\n\t\tthis.options = defaults( options, {\r\n\t\t\t'useTexture': true,\r\n\t\t\t'transition': 0,\r\n\t\t\t'speed': 10,\r\n\t\t\t'texture': 5,\r\n\t\t\t'loopTexture': true,\r\n\t\t\t'isAnimate': true,\r\n\t\t\t'threshold': 0.3\r\n\t\t} );\r\n\t\tthis.app = app;\r\n\t\tthis.targetWorld = world;\r\n\t\tthis.maskTexture = texture;\r\n\t\tthis.material = new ShaderMaterial( {\r\n\t\t\tuniforms: {\r\n\t\t\t\ttDiffuse1: {\r\n\t\t\t\t\tvalue: null\r\n\t\t\t\t},\r\n\t\t\t\ttDiffuse2: {\r\n\t\t\t\t\tvalue: null\r\n\t\t\t\t},\r\n\t\t\t\tmixRatio: {\r\n\t\t\t\t\tvalue: 0.0\r\n\t\t\t\t},\r\n\t\t\t\tthreshold: {\r\n\t\t\t\t\tvalue: 0.1\r\n\t\t\t\t},\r\n\t\t\t\tuseTexture: {\r\n\t\t\t\t\tvalue: 1\r\n\t\t\t\t},\r\n\t\t\t\ttMixTexture: {\r\n\t\t\t\t\tvalue: this.maskTexture\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tvertexShader: `varying vec2 vUv;\r\n        void main() {\r\n        vUv = vec2( uv.x, uv.y );\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n        }`,\r\n\t\t\tfragmentShader: `uniform float mixRatio;\r\n        uniform sampler2D tDiffuse1;\r\n        uniform sampler2D tDiffuse2;\r\n        uniform sampler2D tMixTexture;\r\n        uniform int useTexture;\r\n        uniform float threshold;\r\n        varying vec2 vUv;\r\n        \r\n        void main() {\r\n\r\n        vec4 texel1 = texture2D( tDiffuse1, vUv );\r\n        vec4 texel2 = texture2D( tDiffuse2, vUv );\r\n\r\n        if (useTexture==1) {\r\n\r\n        vec4 transitionTexel = texture2D( tMixTexture, vUv );\r\n        float r = mixRatio * (1.0 + threshold * 2.0) - threshold;\r\n        float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);\r\n\r\n        gl_FragColor = mix( texel1, texel2, mixf );\r\n        } else {\r\n\r\n        gl_FragColor = mix( texel2, texel1, mixRatio );\r\n\r\n        }\r\n        }`\r\n\t\t} );\r\n\t\tlet halfWidth = app.getWorldWidth() / 2;\r\n\t\tlet halfHeight = app.getWorldHeight() / 2;\r\n\t\tthis.world = new World( app, new OrthographicCamera( - halfWidth,\r\n\t\t\thalfWidth, halfHeight, - halfHeight, - 10, 10 ) );\r\n\r\n\t\tlet geometry = new PlaneBufferGeometry( halfWidth * 2,\r\n\t\t\thalfHeight * 2 );\r\n\r\n\t\tlet quad = new Mesh( geometry, this.material );\r\n\t\tthis.world.scene.add( quad );\r\n\r\n\t\tthis.sceneA = world;\r\n\t\tthis.sceneB = app.world;\r\n\r\n\t\tthis.material.uniforms.tDiffuse1.value = this.sceneA.fbo.texture;\r\n\t\tthis.material.uniforms.tDiffuse2.value = this.sceneB.fbo.texture;\r\n\r\n\t\tthis.needChange = false;\r\n\r\n\t}\r\n\r\n\tsetThreshold( value ) {\r\n\r\n\t\tthis.material.uniforms.threshold.value = value;\r\n\r\n\t}\r\n\r\n\tuseTexture( value ) {\r\n\r\n\t\tthis.material.uniforms.useTexture.value = value ? 1 : 0;\r\n\r\n\t}\r\n\r\n\tsetTexture() {\r\n\r\n\t\tthis.material.uniforms.tMixTexture.value = this.texture;\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tlet value = Math.min( this.options.transition, 1 );\r\n\t\tvalue = Math.max( value, 0 );\r\n\t\tthis.material.uniforms.mixRatio.value = value;\r\n\t\tthis.app.renderer.setClearColor( this.sceneB.clearColor || 0 );\r\n\t\tthis.sceneB.update();\r\n\t\tthis.app.renderer.render( this.sceneB.scene, this.sceneB.camera, this.sceneB\r\n\t\t\t.fbo, true );\r\n\t\tthis.app.renderer.setClearColor( this.sceneA.clearColor || 0 );\r\n\t\tthis.sceneA.update();\r\n\t\tthis.app.renderer.render( this.sceneA.scene, this.sceneA.camera, this.sceneA\r\n\t\t\t.fbo, true );\r\n\t\tthis.app.renderer.render( this.world.scene, this.world.camera, null, true );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tTransitioner\r\n};\r\n","import { PerspectiveCamera, WebGLRenderTarget, LinearFilter, RGBFormat } from \"three\";\r\n\r\nclass View {\r\n\r\n\tconstructor( world, camera, {\r\n\t\tclearColor = 0x000000,\r\n\t\ttop = 0,\r\n\t\tleft = 0,\r\n\t\twidth = 1,\r\n\t\theight = 1\r\n\t} ) {\r\n\r\n\t\tthis.world = world;\r\n\t\tthis.scene = world.scene;\r\n\t\tthis.worldWidth = world.app.getWorldWidth();\r\n\t\tthis.worldHeight = world.app.getWorldHeight();\r\n\t\tthis.renderer = world.app.renderer;\r\n\t\tthis.camera = camera || PerspectiveCamera( 45, this.worldWidth /\r\n      this.worldHeight, 0.01, 1000 );\r\n\t\tthis.renderTargetParameters = {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tformat: RGBFormat,\r\n\t\t\tstencilBuffer: false\r\n\t\t};\r\n\t\tthis.isRTT = false;\r\n\t\tthis.clearColor = clearColor;\r\n\t\tthis.left = left;\r\n\t\tthis.top = top;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\r\n\t\tthis.fbo = new WebGLRenderTarget(\r\n\t\t\tthis.worldWidth * this.width,\r\n\t\t\tthis.worldHeight * this.height, this.renderTargetParameters\r\n\t\t);\r\n\r\n\t\tthis.resize();\r\n\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tvar left = Math.floor( this.worldWidth * this.left );\r\n\t\tvar top = Math.floor( this.worldHeight * this.top );\r\n\t\tvar width = Math.floor( this.worldWidth * this.width );\r\n\t\tvar height = Math.floor( this.worldHeight * this.height );\r\n\t\tthis.renderer.setViewport( left, top, width, height );\r\n\t\tthis.renderer.setScissor( left, top, width, height );\r\n\t\tthis.renderer.setScissorTest( true );\r\n\t\tthis.renderer.setClearColor( this.clearColor );\r\n\t\tthis.renderer.render( this.scene, this.camera );\r\n\r\n\t}\r\n\r\n\tresize() {\r\n\r\n\t\tthis.worldWidth = this.world.app.getWorldWidth();\r\n\t\tthis.worldHeight = this.world.app.getWorldHeight();\r\n\t\tlet width = Math.floor( this.worldWidth * this.width );\r\n\t\tlet height = Math.floor( this.worldHeight * this.height );\r\n\t\tif ( this.camera.type === 'PerspectiveCamera' ) {\r\n\r\n\t\t\tthis.camera.aspect = width / height;\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.camera.left = - width / 2;\r\n\t\t\tthis.camera.right = width / 2;\r\n\t\t\tthis.camera.top = height / 2;\r\n\t\t\tthis.camera.bottom = - height / 2;\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tView\r\n};\r\n","import { NotFunctionError } from './../error/NotFunctionError';\r\nimport { remove } from \"lodash\";\r\n/**\r\n * 用于事件处理\r\n *\r\n * */\r\nclass Signal {\r\n\r\n\tconstructor( type ) {\r\n\r\n\t\tthis.type = type;\r\n\t\tthis.functionArr = [];\r\n\r\n\t}\r\n\r\n\tadd( func ) {\r\n\r\n\t\tif ( typeof func !== 'function' ) {\r\n\r\n\t\t\tthrow new NotFunctionError();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.functionArr.push( func );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tremove( func ) {\r\n\r\n\t\treturn remove( this.functionArr, function ( n ) {\r\n\r\n\t\t\treturn n === func;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\trun( event, intersect ) {\r\n\r\n\t\tthis.functionArr.forEach(\r\n\t\t\t( func ) => {\r\n\r\n\t\t\t\tfunc( event, intersect );\r\n\r\n\t\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tSignal\r\n};\r\n","import { Signal } from './Signal';\r\n\r\n/**\r\n * 由于事件处理\r\n *\r\n * */\r\nclass Events {\r\n\r\n\tconstructor( list ) {\r\n\r\n\t\tlist = list || [ 'press', 'tap', 'pressup', 'pan', 'swipe', 'click',\r\n\t\t\t'mousedown', 'mouseup', 'touchstart', 'touchend', 'touchmove',\r\n\t\t\t'mousemove'\r\n\t\t];\r\n\t\tfor ( let eventItem of list ) {\r\n\r\n\t\t\tthis[ eventItem ] = new Signal( eventItem );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tEvents\r\n};\r\n","import { Raycaster, Vector2 } from \"three\";\r\n\r\nclass FBOEventMapper {\r\n\r\n\tconstructor( fboWorld, mesh, faceIndexArr ) {\r\n\r\n\t\tthis.world = fboWorld;\r\n\t\tthis.disable = false;\r\n\t\tthis.isDeep = true;\r\n\t\tthis.receivers = fboWorld.receivers;\r\n\t\tthis.raycaster = new Raycaster();\r\n\t\tthis.mesh = mesh;\r\n\t\tthis.faceIndexArr = faceIndexArr || [];\r\n\r\n\t}\r\n\r\n\tdispatch( event, intersect ) {\r\n\r\n\t\tif ( intersect.object === this.mesh ) {\r\n\r\n\t\t\tif ( this.faceIndexArr && this.faceIndexArr.length === 0 ) {\r\n\r\n\t\t\t\tthis.raycastCheck( event, intersect );\r\n\r\n\t\t\t} else if ( ! this.faceIndexArr ) {\r\n\r\n\t\t\t\tthis.raycastCheck( event, intersect );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( this.faceIndexArr.includes( intersect.faceIndex ) ) {\r\n\r\n\t\t\t\t\tthis.raycastCheck( event, intersect );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ttoNovaEvent( event ) {\r\n\r\n\t\treturn {\r\n\t\t\tchangedPointers: [ event ],\r\n\t\t\tcenter: new Vector2( event.clientX, event.clientY ),\r\n\t\t\ttype: event.type,\r\n\t\t\ttarget: event.target\r\n\t\t};\r\n\r\n\t}\r\n\r\n\traycastCheck( event, intersect ) {\r\n\r\n\t\tlet uv = intersect.uv;\r\n\t\tlet vec2 = new Vector2( uv.x * 2 - 1, uv.y * 2 - 1 );\r\n\t\tthis.raycaster.setFromCamera( vec2, this.world.camera );\r\n\t\tintersect = undefined;\r\n\r\n\t\tlet intersects = this.raycaster.intersectObjects( this.world.receivers, this.isDeep );\r\n\t\tfor ( let i = 0; i < intersects.length; i ++ ) {\r\n\r\n\t\t\tif ( intersects[ i ].object.isPenetrated ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tintersect = intersects[ i ];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( intersect && intersect.object.events && intersect.object.events[ event\r\n\t\t\t.type ] ) {\r\n\r\n\t\t\tintersect.object.events[ event.type ].run( event, intersect );\r\n\r\n\t\t}\r\n\t\treturn intersect;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tFBOEventMapper\r\n};\r\n","import { Group, Sprite, Vector3, SpriteMaterial, CanvasTexture, LinearFilter, Mesh, MeshBasicMaterial, PlaneBufferGeometry } from \"three\";\r\nimport { defaultsDeep } from \"lodash\";\r\n\r\nclass GUI extends Group {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper();\r\n\t\tthis.css = {\r\n\t\t\tbackgroundColor: \"rgba(0,0,0,0)\",\r\n\t\t\topacity: 1,\r\n\t\t\twidth: 1,\r\n\t\t\theight: 1\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass Body extends GUI {\r\n\r\n\tconstructor( world, css ) {\r\n\r\n\t\tsuper();\r\n\t\tthis.world = world;\r\n\t\tthis.distanceFromCamera = 50;\r\n\t\tthis.css = defaultsDeep( css || {}, this.css );\r\n\t\tthis.canvas = document.createElement( \"canvas\" );\r\n\t\tvar spriteMaterial = new SpriteMaterial( {\r\n\t\t\tmap: this.canvas,\r\n\t\t\tcolor: 0xffffff\r\n\t\t} );\r\n\t\tthis.element = new Sprite( spriteMaterial );\r\n\t\tthis.vector = new Vector3();\r\n\t\tthis.update();\r\n\t\tthis.add( this.element );\r\n\r\n\t}\r\n\r\n\tlockToScreen() {\r\n\r\n\t\tvar c = this.world.camera;\r\n\t\tc.getWorldDirection( this.vector );\r\n\t\tthis.rotation.set( c.rotation.x, c.rotation.y, c.rotation.z );\r\n\t\tthis.position.set( c.position.x + this.vector.x * this.distanceFromCamera,\r\n\t\t\tc.position.y +\r\n      this.vector.y * this.distanceFromCamera, c.position.z + this.vector.z *\r\n      this.distanceFromCamera\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tthis.canvas.width = this.css.width;\r\n\t\tthis.canvas.height = this.css.height;\r\n\t\tlet ctx = this.canvas.getContext( \"2d\" );\r\n\t\tctx.fillStyle = this.css.backgroundColor;\r\n\t\tctx.fillRect( 0, 0, this.css.width, this.css.height );\r\n\t\tvar texture = new CanvasTexture( this.canvas );\r\n\t\ttexture.generateMipmaps = false;\r\n\t\ttexture.minFilter = LinearFilter;\r\n\t\ttexture.magFilter = LinearFilter;\r\n\t\tvar spriteMaterial = new SpriteMaterial( {\r\n\t\t\tmap: texture,\r\n\t\t\tcolor: 0xffffff\r\n\t\t} );\r\n\t\tthis.element.material.dispose();\r\n\t\tthis.element.material = spriteMaterial;\r\n\t\tthis.element.scale.set( this.css.width / 4, this.css.height / 4, 1 );\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass Div extends GUI {\r\n\r\n\tconstructor( world, css ) {\r\n\r\n\t\tsuper();\r\n\t\tthis.world = world;\r\n\t\tthis.css = defaultsDeep( css || {}, this.css );\r\n\t\tthis.canvas = document.createElement( \"canvas\" );\r\n\t\tvar spriteMaterial = new SpriteMaterial( {\r\n\t\t\tmap: this.canvas,\r\n\t\t\tcolor: 0xffffff\r\n\t\t} );\r\n\t\tthis.element = new Sprite( spriteMaterial );\r\n\t\tthis.vector = new Vector3();\r\n\t\tthis.update();\r\n\t\tthis.add( this.element );\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tthis.canvas.width = this.css.width;\r\n\t\tthis.canvas.height = this.css.height;\r\n\t\tlet ctx = this.canvas.getContext( \"2d\" );\r\n\t\tctx.fillStyle = this.css.backgroundColor;\r\n\t\tctx.fillRect( 0, 0, this.css.width, this.css.height );\r\n\t\tvar texture = new CanvasTexture( this.canvas );\r\n\t\ttexture.generateMipmaps = false;\r\n\t\ttexture.minFilter = LinearFilter;\r\n\t\ttexture.magFilter = LinearFilter;\r\n\t\tvar spriteMaterial = new SpriteMaterial( {\r\n\t\t\tmap: texture,\r\n\t\t\tcolor: 0xffffff\r\n\t\t} );\r\n\t\tthis.element.material.dispose();\r\n\t\tthis.element.material = spriteMaterial;\r\n\t\tthis.element.scale.set( this.css.width / 4, this.css.height / 4, 1 );\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass Txt extends Mesh {\r\n\r\n\tconstructor( text, css ) {\r\n\r\n\t\tcss = defaultsDeep( css || {}, {\r\n\t\t\tfontStyle: \"normal\",\r\n\t\t\tfontVariant: \"normal\",\r\n\t\t\tfontSize: 12,\r\n\t\t\tfontWeight: \"normal\",\r\n\t\t\tfontFamily: \"微软雅黑\",\r\n\t\t\tcolor: \"#ffffff\",\r\n\t\t\ttextAlign: \"center\",\r\n\t\t\tbackgroundColor: \"rgba(0,0,0,0)\",\r\n\t\t\topacity: 1,\r\n\t\t\twidth: 1,\r\n\t\t\theight: 1,\r\n\t\t\tscale: {\r\n\t\t\t\tx: 0.25,\r\n\t\t\t\ty: 0.25,\r\n\t\t\t\tz: 1,\r\n\t\t\t}\r\n\t\t} );\r\n\t\tlet canvas = document.createElement( \"canvas\" );\r\n\t\tvar material = new MeshBasicMaterial( {\r\n\t\t\ttransparent: true,\r\n\t\t\tneedsUpdate: false,\r\n\t\t\tcolor: 0xffffff\r\n\t\t} );\r\n\t\tsuper( new PlaneBufferGeometry( css.width / 8, css.height / 8 ),\r\n\t\t\tmaterial );\r\n\t\tthis.text = text;\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.css = css;\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tthis.material.map.dispose();\r\n\t\tthis.canvas.width = this.css.width;\r\n\t\tthis.canvas.height = this.css.height;\r\n\t\tlet ctx = this.canvas.getContext( \"2d\" );\r\n\t\tctx.fillStyle = this.css.backgroundColor;\r\n\t\tctx.fillRect( 0, 0, this.css.width, this.css.height );\r\n\t\tctx.textAlign = this.css.textAlign;\r\n\t\tctx.font = this.css.fontStyle + \" \" + this.css.fontVariant + \" \" + this\r\n\t\t\t.css.fontWeight + \" \" + this.css.fontSize + \"px \" + this.css.fontFamily;\r\n\t\tctx.fillStyle = this.css.color;\r\n\t\t// let width = ctx.measureText( this.text ).width;\r\n\t\tctx.fillText( this.text, this.css.width / 2, this.css.height / 2 + this.css\r\n\t\t\t.fontSize / 4 );\r\n\t\tlet texture = new CanvasTexture( this.canvas );\r\n\t\ttexture.generateMipmaps = false;\r\n\t\ttexture.minFilter = LinearFilter;\r\n\t\ttexture.magFilter = LinearFilter;\r\n\t\tthis.material.map = texture;\r\n\t\tthis.scale.set( this.css.scale.x, this.css.scale.y, this.css.scale.z );\r\n\t\tthis.material.opacity = this.css.opacity;\r\n\r\n\t}\r\n\r\n}\r\n\r\n//$$.Img = function(url, css, callback) {\r\n//$$.DOM.call(this);\r\n//var that = this;\r\n//if ($$.Loader.RESOURCE.textures[url]) {\r\n//  var spriteMaterial = new THREE.SpriteMaterial({\r\n//    map: $$.Loader.RESOURCE.textures[url],\r\n//    color: 0xffffff\r\n//  });\r\n//  var sprite = new THREE.Sprite(spriteMaterial);\r\n//  that.element = sprite;\r\n//  that.add(that.element);\r\n//  this.css = $$.extends({}, [this.css, {\r\n//    width: $$.Loader.RESOURCE.textures[url].image.naturalWidth,\r\n//    height: $$.Loader.RESOURCE.textures[url].image.naturalHeight\r\n//  }, css]);\r\n//  sprite.scale.set(this.css.width / 4, this.css.height / 4, 1);\r\n//  sprite.material.opacity = that.css.opacity;\r\n//  if (callback) {\r\n//    callback();\r\n//  }\r\n//} else {\r\n//  that.element = {};\r\n//  $$.Loader.loadTexture([url], function(texture) {\r\n//    texture.generateMipmaps = false;\r\n//    texture.minFilter = THREE.LinearFilter;\r\n//    texture.magFilter = THREE.LinearFilter;\r\n//    var tmpProperty = that.element;\r\n//    var spriteMaterial = new THREE.SpriteMaterial({\r\n//      map: texture,\r\n//      color: 0xffffff\r\n//    });\r\n//    var sprite = new THREE.Sprite(spriteMaterial);\r\n//    that.element = sprite;\r\n//    that.add(that.element);\r\n//    this.css = $$.extends({}, [this.css, {\r\n//      width: texture.image.naturalWidth,\r\n//      height: texture.image.naturalHeight\r\n//    }, css]);\r\n//    if (css.opacity != null) {\r\n//      that.css.opacity = css.opacity;\r\n//    }\r\n//    sprite.scale.set(this.css.width / 4, this.css.height / 4, 1);\r\n//\r\n//    for (var i in tmpProperty) {\r\n//      that.element[i] = tmpProperty[i];\r\n//    }\r\n//    sprite.material.opacity = that.css.opacity;\r\n//    if (callback) {\r\n//      callback();\r\n//    }\r\n//  });\r\n//}\r\n//};\r\n//(function() {\r\n//var Super = function() {};\r\n//Super.prototype = $$.DOM.prototype;\r\n//$$.Img.prototype = new Super();\r\n//})();\r\n//\r\n//$$.Video = function(url, css) {\r\n//$$.DOM.call(this);\r\n//var that = this;\r\n//this.video = document.createElement(\"video\");\r\n//this.video.src = url;\r\n//var texture = new THREE.VideoTexture(this.video);\r\n//texture.generateMipmaps = false;\r\n//texture.minFilter = THREE.LinearFilter;\r\n//texture.magFilter = THREE.LinearFilter;\r\n//var spriteMaterial = new THREE.SpriteMaterial({\r\n//  map: texture,\r\n//  color: 0xffffff\r\n//});\r\n//var sprite = new THREE.Sprite(spriteMaterial);\r\n//that.element = sprite;\r\n//that.add(that.element);\r\n//this.css = $$.extends({}, [this.css, {\r\n//  width: texture.image.naturalWidth,\r\n//  height: texture.image.naturalHeight,\r\n//}, css]);\r\n//sprite.scale.set(this.css.width / 4, this.css.height / 4, 1);\r\n//};\r\n//(function() {\r\n//var Super = function() {};\r\n//Super.prototype = $$.DOM.prototype;\r\n//$$.Video.prototype = new Super();\r\n//})();\r\n\r\nexport {\r\n\tGUI,\r\n\tBody,\r\n\tTxt,\r\n\tDiv\r\n};\r\n","import { LoadingManager, ImageLoader, TextureLoader, AudioListener } from \"three\";\r\n\r\nclass LoaderFactory {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.manager = new LoadingManager();\r\n\t\tthis.Resource = {\r\n\t\t\timages: {},\r\n\t\t\tmaterials: {},\r\n\t\t\ttextures: {},\r\n\t\t\tmodels: {},\r\n\t\t\tsounds: {},\r\n\t\t\tfonts: {},\r\n\t\t\tunloaded: {\r\n\t\t\t\ttextures: [],\r\n\t\t\t\tmodels: [],\r\n\t\t\t\tsounds: [],\r\n\t\t\t\tfonts: [],\r\n\t\t\t\timages: []\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.manager.onStart = ( url, itemsLoaded, itemsTotal ) => {\r\n\r\n\t\t\tif ( this.onStart && typeof this.onStart === 'function' ) {\r\n\r\n\t\t\t\tthis.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.manager.onLoad = () => {\r\n\r\n\t\t\tif ( this.onLoad && typeof this.onLoad === 'function' ) {\r\n\r\n\t\t\t\tthis.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.manager.onProgress = ( url, itemsLoaded, itemsTotal ) => {\r\n\r\n\t\t\tif ( this.onProgress && typeof this.onProgress === 'function' ) {\r\n\r\n\t\t\t\tthis.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.manager.onError = ( url ) => {\r\n\r\n\t\t\tif ( this.onError && typeof this.onError === 'function' ) {\r\n\r\n\t\t\t\tthis.onError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.imageLoader = new ImageLoader( this.manager );\r\n\t\tthis.textureLoader = new TextureLoader( this.manager );\r\n\t\tthis.audioListener = new AudioListener( this.manager );\r\n\r\n\t}\r\n\r\n\tloadImage( key, src, sucFunc, errFunc ) {\r\n\r\n\t\treturn this.imageLoader.load( src,\r\n\t\t\t( data ) => {\r\n\r\n\t\t\t\tthis.Resource.images[ key ] = data;\r\n\t\t\t\tif ( sucFunc ) sucFunc( data );\r\n\r\n\t\t\t}, undefined, ( err ) => {\r\n\r\n\t\t\t\tthis.Resource.unloaded.images.push( src );\r\n\t\t\t\tif ( errFunc ) errFunc( err );\r\n\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tloadTexture( key, src, sucFunc, errFunc ) {\r\n\r\n\t\treturn this.textureLoader.load( src,\r\n\t\t\t( data ) => {\r\n\r\n\t\t\t\tthis.Resource.textures[ key ] = data;\r\n\t\t\t\tif ( sucFunc ) sucFunc( data );\r\n\r\n\t\t\t}, undefined, ( err ) => {\r\n\r\n\t\t\t\tthis.Resource.unloaded.textures.push( src );\r\n\t\t\t\tif ( errFunc ) errFunc( err );\r\n\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tLoaderFactory\r\n};\r\n","let CopyShader = {\r\n\tuniforms: {\r\n\t\t'tDiffuse': { value: null },\r\n\t\t'opacity': { value: 1.0 }\r\n\t},\r\n\r\n\tvertexShader: `\r\n    varying vec2 vUv;\r\n    void main() {\r\n      vUv = uv;\r\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n    }`,\r\n\r\n\tfragmentShader: `\r\n    uniform float opacity;\r\n    uniform sampler2D tDiffuse;\r\n    varying vec2 vUv;\r\n    void main() {\r\n      vec4 texel = texture2D( tDiffuse, vUv );\r\n      gl_FragColor = opacity * texel;\r\n    }`\r\n};\r\n\r\nexport {\r\n\tCopyShader\r\n};\r\n","class Pass {\r\n\r\n\tconstructor( effectComposer, renderToScreen = false ) {\r\n\r\n\t\t// if set to true, the pass is processed by the composer\r\n\t\tthis.enabled = true;\r\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\r\n\t\tthis.needsSwap = true;\r\n\t\t// if set to true, the pass clears its buffer before rendering\r\n\t\tthis.clear = false;\r\n\t\t// if set to true, the result of the pass is rendered to screen\r\n\t\tthis.renderToScreen = renderToScreen;\r\n\t\tif ( effectComposer ) {\r\n\r\n\t\t\teffectComposer.addPass( this );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\tsetSize() {} // width, height\r\n\trender() {} // renderer, writeBuffer, readBuffer, delta, maskActive\r\n\r\n}\r\n\r\nexport {\r\n\tPass\r\n};\r\n","import { Pass } from './Pass.js';\r\nimport { UniformsUtils, ShaderMaterial, OrthographicCamera, Scene, Mesh, PlaneBufferGeometry } from \"three\";\r\nclass ShaderPass extends Pass {\r\n\r\n\tconstructor( shader, effectComposer, renderToScreen = false,\r\n\t\ttextureID = \"tDiffuse\" ) {\r\n\r\n\t\tsuper( effectComposer, renderToScreen );\r\n\t\tthis.textureID = textureID;\r\n\r\n\t\tif ( shader instanceof ShaderMaterial ) {\r\n\r\n\t\t\tthis.uniforms = shader.uniforms;\r\n\t\t\tthis.material = shader;\r\n\r\n\t\t} else if ( shader ) {\r\n\r\n\t\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\r\n\t\t\tthis.material = new ShaderMaterial( {\r\n\t\t\t\tdefines: shader.defines || {},\r\n\t\t\t\tuniforms: this.uniforms,\r\n\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tthis.camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\t\tthis.scene = new Scene();\r\n\t\tthis.quad = new Mesh( new PlaneBufferGeometry( 2, 2 ), null );\r\n\t\tthis.quad.frustumCulled = false;\r\n\t\tthis.scene.add( this.quad );\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer ) {\r\n\r\n\t\tif ( this.uniforms[ this.textureID ] ) {\r\n\r\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\r\n\r\n\t\t}\r\n\r\n\t\tthis.quad.material = this.material;\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tShaderPass\r\n};\r\n","import { Pass } from './Pass.js';\r\n\r\nclass RenderPass extends Pass {\r\n\r\n\tconstructor( scene, camera, overrideMaterial, clearColor, clearAlpha = 0 ) {\r\n\r\n\t\tsuper();\r\n\t\tthis.scene = scene;\r\n\t\tthis.camera = camera;\r\n\t\tthis.overrideMaterial = overrideMaterial;\r\n\t\tthis.clearColor = clearColor;\r\n\t\tthis.clearAlpha = clearAlpha;\r\n\t\tthis.clear = true;\r\n\t\tthis.clearDepth = false;\r\n\t\tthis.needsSwap = false;\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer ) {\r\n\r\n\t\tlet oldAutoClear = renderer.autoClear;\r\n\t\trenderer.autoClear = false;\r\n\t\tthis.scene.overrideMaterial = this.overrideMaterial;\r\n\t\tthis.writeBuffer = writeBuffer;\r\n\t\tlet oldClearColor, oldClearAlpha;\r\n\t\tif ( this.clearColor ) {\r\n\r\n\t\t\toldClearColor = renderer.getClearColor()\r\n\t\t\t\t.getHex();\r\n\t\t\toldClearAlpha = renderer.getClearAlpha();\r\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\r\n\r\n\t\t}\r\n\t\tif ( this.clearDepth ) {\r\n\r\n\t\t\trenderer.clearDepth();\r\n\r\n\t\t}\r\n\t\trenderer.render( this.scene, this.camera, this.renderToScreen ? undefined :\r\n\t\t\treadBuffer, this.clear );\r\n\t\tif ( this.clearColor ) {\r\n\r\n\t\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\r\n\r\n\t\t}\r\n\t\tthis.scene.overrideMaterial = undefined;\r\n\t\trenderer.autoClear = oldAutoClear;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tRenderPass\r\n};\r\n","import { Pass } from './Pass.js';\r\n\r\nclass MaskPass extends Pass {\r\n\r\n\tconstructor( scene, camera ) {\r\n\r\n\t\tsuper();\r\n\t\tthis.scene = scene;\r\n\t\tthis.camera = camera;\r\n\r\n\t\tthis.clear = true;\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\tthis.inverse = false;\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer ) {\r\n\r\n\t\tvar context = renderer.context;\r\n\t\tvar state = renderer.state;\r\n\r\n\t\t// don't update color or depth\r\n\r\n\t\tstate.buffers.color.setMask( false );\r\n\t\tstate.buffers.depth.setMask( false );\r\n\r\n\t\t// lock buffers\r\n\r\n\t\tstate.buffers.color.setLocked( true );\r\n\t\tstate.buffers.depth.setLocked( true );\r\n\r\n\t\t// set up stencil\r\n\r\n\t\tvar writeValue, clearValue;\r\n\r\n\t\tif ( this.inverse ) {\r\n\r\n\t\t\twriteValue = 0;\r\n\t\t\tclearValue = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\twriteValue = 1;\r\n\t\t\tclearValue = 0;\r\n\r\n\t\t}\r\n\r\n\t\tstate.buffers.stencil.setTest( true );\r\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\r\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\r\n\t\tstate.buffers.stencil.setClear( clearValue );\r\n\r\n\t\t// draw into the stencil buffer\r\n\r\n\t\trenderer.render( this.scene, this.camera, readBuffer, this.clear );\r\n\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\r\n\r\n\t\t// unlock color and depth buffer for subsequent rendering\r\n\r\n\t\tstate.buffers.color.setLocked( false );\r\n\t\tstate.buffers.depth.setLocked( false );\r\n\r\n\t\t// only render where stencil is set to 1\r\n\r\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\r\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tMaskPass\r\n};\r\n","import { Pass } from './Pass.js';\r\n\r\nclass ClearMaskPass extends Pass {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper();\r\n\t\tthis.needsSwap = false;\r\n\r\n\t}\r\n\r\n\trender( renderer ) {\r\n\r\n\t\trenderer.state.buffers.stencil.setTest( false );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tClearMaskPass\r\n};\r\n","import { CopyShader } from './shader/CopyShader.js';\r\nimport { ShaderPass } from './ShaderPass.js';\r\nimport { RenderPass } from './RenderPass.js';\r\nimport { MaskPass } from './MaskPass';\r\nimport { ClearMaskPass } from './ClearMaskPass';\r\nimport { defaults } from \"lodash\";\r\nimport { WebGLRenderTarget, LinearFilter, RGBAFormat } from \"three\";\r\n\r\nclass EffectComposer {\r\n\r\n\tconstructor( world, options = {}, renderTarget ) {\r\n\r\n\t\toptions = defaults( options, {\r\n\t\t\trenderer: undefined,\r\n\t\t\tcamera: undefined,\r\n\t\t\tscene: undefined,\r\n\t\t\toverrideMaterial: undefined,\r\n\t\t\tclearColor: undefined,\r\n\t\t\tclearAlpha: 0\r\n\t\t} );\r\n\t\tthis.renderer = options.renderer || world.app.renderer;\r\n\t\tif ( renderTarget === undefined ) {\r\n\r\n\t\t\tlet parameters = {\r\n\t\t\t\tminFilter: LinearFilter,\r\n\t\t\t\tmagFilter: LinearFilter,\r\n\t\t\t\tformat: RGBAFormat,\r\n\t\t\t\tstencilBuffer: false\r\n\t\t\t};\r\n\t\t\tlet size = this.renderer.getDrawingBufferSize();\r\n\t\t\trenderTarget = new WebGLRenderTarget( size.width, size.height,\r\n\t\t\t\tparameters );\r\n\t\t\trenderTarget.texture.name = 'EffectComposer.rt1';\r\n\r\n\t\t}\r\n\r\n\t\tthis.renderTarget1 = renderTarget;\r\n\t\tthis.renderTarget2 = renderTarget.clone();\r\n\t\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\r\n\t\tthis.writeBuffer = this.renderTarget1;\r\n\t\tthis.readBuffer = this.renderTarget2;\r\n\r\n\t\tthis.passes = [];\r\n\t\tthis.copyPass = new ShaderPass( CopyShader );\r\n\r\n\t\tthis.addPass( new RenderPass( options.scene || world.scene,\r\n\t\t\toptions.scene || world.camera ) );\r\n\r\n\t}\r\n\r\n\tswapBuffers() {\r\n\r\n\t\tlet tmp = this.readBuffer;\r\n\t\tthis.readBuffer = this.writeBuffer;\r\n\t\tthis.writeBuffer = tmp;\r\n\r\n\t}\r\n\r\n\taddPass( pass ) {\r\n\r\n\t\tthis.passes.push( pass );\r\n\t\tlet size = this.renderer.getDrawingBufferSize();\r\n\t\tpass.setSize( size.width, size.height );\r\n\r\n\t}\r\n\r\n\tinsertPass( pass, index ) {\r\n\r\n\t\tthis.passes.splice( index, 0, pass );\r\n\r\n\t}\r\n\r\n\trender( delta ) {\r\n\r\n\t\tlet maskActive = false;\r\n\t\tlet pass, i, il = this.passes.length;\r\n\t\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\t\tpass = this.passes[ i ];\r\n\t\t\tif ( pass.enabled === false ) continue;\r\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, delta,\r\n\t\t\t\tmaskActive );\r\n\r\n\t\t\tif ( pass.needsSwap ) {\r\n\r\n\t\t\t\tif ( maskActive ) {\r\n\r\n\t\t\t\t\tlet context = this.renderer.context;\r\n\t\t\t\t\tcontext.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\r\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer,\r\n\t\t\t\t\t\tdelta );\r\n\t\t\t\t\tcontext.stencilFunc( context.EQUAL, 1, 0xffffffff );\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthis.swapBuffers();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( MaskPass !== undefined ) {\r\n\r\n\t\t\t\tif ( pass instanceof MaskPass ) {\r\n\r\n\t\t\t\t\tmaskActive = true;\r\n\r\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\r\n\r\n\t\t\t\t\tmaskActive = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treset( renderTarget ) {\r\n\r\n\t\tif ( renderTarget === undefined ) {\r\n\r\n\t\t\tlet size = this.renderer.getDrawingBufferSize();\r\n\t\t\trenderTarget = this.renderTarget1.clone();\r\n\t\t\trenderTarget.setSize( size.width, size.height );\r\n\r\n\t\t}\r\n\t\tthis.renderTarget1.dispose();\r\n\t\tthis.renderTarget2.dispose();\r\n\t\tthis.renderTarget1 = renderTarget;\r\n\t\tthis.renderTarget2 = renderTarget.clone();\r\n\t\tthis.writeBuffer = this.renderTarget1;\r\n\t\tthis.readBuffer = this.renderTarget2;\r\n\r\n\t}\r\n\r\n\tsetSize( width, height ) {\r\n\r\n\t\tthis.renderTarget1.setSize( width, height );\r\n\t\tthis.renderTarget2.setSize( width, height );\r\n\t\tfor ( let i = 0; i < this.passes.length; i ++ ) {\r\n\r\n\t\t\tthis.passes[ i ].setSize( width, height );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tEffectComposer\r\n};\r\n","let AfterimageShader = {\r\n\tuniforms: {\r\n\t\t\"damp\": { value: 0.96 },\r\n\t\t\"tOld\": { value: null },\r\n\t\t\"tNew\": { value: null }\r\n\t},\r\n\r\n\tvertexShader: `\r\n    varying vec2 vUv;\r\n    void main() {\r\n      vUv = uv;\r\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n    }`,\r\n\r\n\tfragmentShader: `\r\n    uniform sampler2D tOld;\r\n    uniform sampler2D tNew;\r\n    uniform float damp;\r\n\r\n    varying vec2 vUv;\r\n\r\n    vec4 when_gt( vec4 texel, float y ) {\r\n      return max( sign( texel - y ), 0. );\r\n    }\r\n\r\n    void main() {\r\n      vec4 texelOld = texture2D( tOld, vUv );\r\n      vec4 texelNew = texture2D( tNew, vUv );\r\n\r\n      texelOld *= damp * when_gt( texelOld, 0.1 );\r\n\r\n      gl_FragColor = max( texelNew, texelOld );\r\n    }`\r\n};\r\n\r\nexport {\r\n\tAfterimageShader\r\n};\r\n","import { Pass } from './Pass.js';\r\nimport { AfterimageShader } from './shader/AfterimageShader.js';\r\nimport { WebGLRenderTarget, LinearFilter, NearestFilter, RGBAFormat, UniformsUtils, Scene, OrthographicCamera, PlaneBufferGeometry, Mesh, MeshBasicMaterial, ShaderMaterial } from \"three\";\r\n\r\nclass AfterimagePass extends Pass {\r\n\r\n\tconstructor( damp = 0.96, effectComposer, renderToScreen = false ) {\r\n\r\n\t\tsuper( effectComposer, renderToScreen );\r\n\t\tthis.uniforms = UniformsUtils.clone( AfterimageShader.uniforms );\r\n\t\tthis.uniforms[ \"damp\" ].value = damp;\r\n\r\n\t\tthis.textureComp = new WebGLRenderTarget( window.innerWidth, window.innerHeight, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: NearestFilter,\r\n\t\t\tformat: RGBAFormat\r\n\t\t} );\r\n\r\n\t\tthis.textureOld = new WebGLRenderTarget( window.innerWidth, window.innerHeight, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: NearestFilter,\r\n\t\t\tformat: RGBAFormat\r\n\t\t} );\r\n\r\n\t\tthis.shaderMaterial = new ShaderMaterial( {\r\n\t\t\tuniforms: this.uniforms,\r\n\t\t\tvertexShader: AfterimageShader.vertexShader,\r\n\t\t\tfragmentShader: AfterimageShader.fragmentShader\r\n\t\t} );\r\n\r\n\t\tthis.sceneComp = new Scene();\r\n\t\tthis.sceneScreen = new Scene();\r\n\r\n\t\tthis.camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\t\tthis.camera.position.z = 1;\r\n\t\tvar geometry = new PlaneBufferGeometry( 2, 2 );\r\n\r\n\t\tthis.quadComp = new Mesh( geometry, this.shaderMaterial );\r\n\t\tthis.sceneComp.add( this.quadComp );\r\n\r\n\t\tlet material = new MeshBasicMaterial( { map: this.textureComp.texture } );\r\n\t\tvar quadScreen = new Mesh( geometry, material );\r\n\t\tthis.sceneScreen.add( quadScreen );\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer ) {\r\n\r\n\t\tthis.uniforms[ \"tOld\" ].value = this.textureOld.texture;\r\n\t\tthis.uniforms[ \"tNew\" ].value = readBuffer.texture;\r\n\t\tthis.quadComp.material = this.shaderMaterial;\r\n\r\n\t\trenderer.render( this.sceneComp, this.camera, this.textureComp );\r\n\t\trenderer.render( this.sceneScreen, this.camera, this.textureOld );\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.render( this.sceneScreen, this.camera );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( this.sceneScreen, this.camera, writeBuffer, this.clear );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tAfterimagePass\r\n};\r\n","import { Vector2 } from \"three\";\r\n\r\nlet DotScreenShader = {\r\n\tuniforms: {\r\n\t\t\"tDiffuse\": { value: null },\r\n\t\t\"tSize\": { value: new Vector2( 256, 256 ) },\r\n\t\t\"center\": { value: new Vector2( 0.5, 0.5 ) },\r\n\t\t\"angle\": { value: 1.57 },\r\n\t\t\"scale\": { value: 1.0 }\r\n\t},\r\n\r\n\tvertexShader: [\r\n\t\t\"varying vec2 vUv;\",\r\n\t\t\"void main() {\",\r\n\t\t\"vUv = uv;\",\r\n\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\"}\"\r\n\t].join( \"\\n\" ),\r\n\r\n\tfragmentShader: [\r\n\t\t\"uniform vec2 center;\",\r\n\t\t\"uniform float angle;\",\r\n\t\t\"uniform float scale;\",\r\n\t\t\"uniform vec2 tSize;\",\r\n\t\t\"uniform sampler2D tDiffuse;\",\r\n\t\t\"varying vec2 vUv;\",\r\n\t\t\"float pattern() {\",\r\n\t\t\"float s = sin( angle ), c = cos( angle );\",\r\n\t\t\"vec2 tex = vUv * tSize - center;\",\r\n\t\t\"vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\",\r\n\t\t\"return ( sin( point.x ) * sin( point.y ) ) * 4.0;\",\r\n\t\t\"}\",\r\n\r\n\t\t\"void main() {\",\r\n\t\t\"vec4 color = texture2D( tDiffuse, vUv );\",\r\n\t\t\"float average = ( color.r + color.g + color.b ) / 3.0;\",\r\n\t\t\"gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );\",\r\n\t\t\"}\"\r\n\t].join( \"\\n\" )\r\n};\r\n\r\nexport {\r\n\tDotScreenShader\r\n};\r\n","import { Pass } from './Pass.js';\r\nimport { DotScreenShader } from './shader/DotScreenShader.js';\r\nimport { Scene, OrthographicCamera, PlaneBufferGeometry, Mesh, ShaderMaterial, UniformsUtils } from \"three\";\r\n\r\nclass DotScreenPass extends Pass {\r\n\r\n\tconstructor( center, angle, scale, effectComposer, renderToScreen = false ) {\r\n\r\n\t\tsuper( effectComposer, renderToScreen );\r\n\t\tthis.uniforms = UniformsUtils.clone( DotScreenShader.uniforms );\r\n\t\tif ( center !== undefined ) this.uniforms[ \"center\" ].value.copy( center );\r\n\t\tif ( angle !== undefined ) this.uniforms[ \"angle\" ].value = angle;\r\n\t\tif ( scale !== undefined ) this.uniforms[ \"scale\" ].value = scale;\r\n\r\n\t\tthis.material = new ShaderMaterial( {\r\n\t\t\tuniforms: this.uniforms,\r\n\t\t\tvertexShader: DotScreenShader.vertexShader,\r\n\t\t\tfragmentShader: DotScreenShader.fragmentShader\r\n\t\t} );\r\n\r\n\t\tthis.camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\t\tthis.scene = new Scene();\r\n\t\tthis.quad = new Mesh( new PlaneBufferGeometry( 2, 2 ), undefined );\r\n\t\tthis.quad.frustumCulled = false; // Avoid getting clipped\r\n\t\tthis.scene.add( this.quad );\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer ) {\r\n\r\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer.texture;\r\n\t\tthis.uniforms[ \"tSize\" ].value.set( readBuffer.width, readBuffer.height );\r\n\r\n\t\tthis.quad.material = this.material;\r\n\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tDotScreenPass\r\n};\r\n","let GlitchShader = {\r\n\tuniforms: {\r\n\t\t\"tDiffuse\": { value: null }, //diffuse texture\r\n\t\t\"tDisp\": { value: null }, //displacement texture for digital glitch squares\r\n\t\t\"byp\": { value: 0 }, //apply the glitch ?\r\n\t\t\"amount\": { value: 0.08 },\r\n\t\t\"angle\": { value: 0.02 },\r\n\t\t\"seed\": { value: 0.02 },\r\n\t\t\"seed_x\": { value: 0.02 }, //-1,1\r\n\t\t\"seed_y\": { value: 0.02 }, //-1,1\r\n\t\t\"distortion_x\": { value: 0.5 },\r\n\t\t\"distortion_y\": { value: 0.6 },\r\n\t\t\"col_s\": { value: 0.05 }\r\n\t},\r\n\r\n\tvertexShader: [\r\n\t\t\"varying vec2 vUv;\",\r\n\t\t\"void main() {\",\r\n\t\t\"vUv = uv;\",\r\n\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\"}\"\r\n\t].join( \"\\n\" ),\r\n\r\n\tfragmentShader: [\r\n\t\t\"uniform int byp;\", //should we apply the glitch ?\r\n\t\t\"uniform sampler2D tDiffuse;\",\r\n\t\t\"uniform sampler2D tDisp;\",\r\n\r\n\t\t\"uniform float amount;\",\r\n\t\t\"uniform float angle;\",\r\n\t\t\"uniform float seed;\",\r\n\t\t\"uniform float seed_x;\",\r\n\t\t\"uniform float seed_y;\",\r\n\t\t\"uniform float distortion_x;\",\r\n\t\t\"uniform float distortion_y;\",\r\n\t\t\"uniform float col_s;\",\r\n\r\n\t\t\"varying vec2 vUv;\",\r\n\r\n\t\t\"float rand(vec2 co){\",\r\n\t\t\"return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\",\r\n\t\t\"}\",\r\n\r\n\t\t\"void main() {\",\r\n\t\t\"if(byp<1) {\",\r\n\t\t\"vec2 p = vUv;\",\r\n\t\t\"float xs = floor(gl_FragCoord.x / 0.5);\",\r\n\t\t\"float ys = floor(gl_FragCoord.y / 0.5);\",\r\n\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\r\n\t\t\"vec4 normal = texture2D (tDisp, p*seed*seed);\",\r\n\t\t\"if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\",\r\n\t\t\"if(seed_x>0.){\",\r\n\t\t\"p.y = 1. - (p.y + distortion_y);\",\r\n\t\t\"}\",\r\n\t\t\"else {\",\r\n\t\t\"p.y = distortion_y;\",\r\n\t\t\"}\",\r\n\t\t\"}\",\r\n\t\t\"if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\",\r\n\t\t\"if(seed_y>0.){\",\r\n\t\t\"p.x=distortion_x;\",\r\n\t\t\"}\",\r\n\t\t\"else {\",\r\n\t\t\"p.x = 1. - (p.x + distortion_x);\",\r\n\t\t\"}\",\r\n\t\t\"}\",\r\n\t\t\"p.x+=normal.x*seed_x*(seed/5.);\",\r\n\t\t\"p.y+=normal.y*seed_y*(seed/5.);\",\r\n\t\t//base from RGB shift shader\r\n\t\t\"vec2 offset = amount * vec2( cos(angle), sin(angle));\",\r\n\t\t\"vec4 cr = texture2D(tDiffuse, p + offset);\",\r\n\t\t\"vec4 cga = texture2D(tDiffuse, p);\",\r\n\t\t\"vec4 cb = texture2D(tDiffuse, p - offset);\",\r\n\t\t\"gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\",\r\n\t\t//add noise\r\n\t\t\"vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\",\r\n\t\t\"gl_FragColor = gl_FragColor+ snow;\",\r\n\t\t\"}\",\r\n\t\t\"else {\",\r\n\t\t\"gl_FragColor=texture2D (tDiffuse, vUv);\",\r\n\t\t\"}\",\r\n\t\t\"}\"\r\n\t].join( \"\\n\" )\r\n};\r\n\r\nexport {\r\n\tGlitchShader\r\n};\r\n","import { Pass } from './Pass.js';\r\nimport { GlitchShader } from './shader/GlitchShader.js';\r\nimport { FloatType, RGBFormat, DataTexture, UniformsUtils, Scene, OrthographicCamera, PlaneBufferGeometry, Mesh, ShaderMaterial, Math as THREEMath } from \"three\";\r\n\r\nclass GlitchPass extends Pass {\r\n\r\n\tconstructor( size = 64, goWild = false, effectComposer, renderToScreen = false ) {\r\n\r\n\t\tsuper( effectComposer, renderToScreen );\r\n\t\tthis.uniforms = UniformsUtils.clone( GlitchShader.uniforms );\r\n\t\tthis.uniforms[ \"tDisp\" ].value = this.generateHeightmap( size );\r\n\r\n\t\tthis.material = new ShaderMaterial( {\r\n\t\t\tuniforms: this.uniforms,\r\n\t\t\tvertexShader: GlitchShader.vertexShader,\r\n\t\t\tfragmentShader: GlitchShader.fragmentShader\r\n\t\t} );\r\n\r\n\t\tthis.camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\t\tthis.scene = new Scene();\r\n\r\n\t\tthis.quad = new Mesh( new PlaneBufferGeometry( 2, 2 ), null );\r\n\t\tthis.quad.frustumCulled = false;\r\n\t\tthis.scene.add( this.quad );\r\n\r\n\t\tthis.goWild = goWild;\r\n\t\tthis.curF = 0;\r\n\t\tthis.generateTrigger();\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer ) {\r\n\r\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer.texture;\r\n\t\tthis.uniforms[ 'seed' ].value = Math.random();\r\n\t\tthis.uniforms[ 'byp' ].value = 0;\r\n\r\n\t\tif ( this.curF % this.randX === 0 || this.goWild === true ) {\r\n\r\n\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 30;\r\n\t\t\tthis.uniforms[ 'angle' ].value = THREEMath.randFloat( - Math.PI, Math.PI );\r\n\t\t\tthis.uniforms[ 'seed_x' ].value = THREEMath.randFloat( - 1, 1 );\r\n\t\t\tthis.uniforms[ 'seed_y' ].value = THREEMath.randFloat( - 1, 1 );\r\n\t\t\tthis.uniforms[ 'distortion_x' ].value = THREEMath.randFloat( 0, 1 );\r\n\t\t\tthis.uniforms[ 'distortion_y' ].value = THREEMath.randFloat( 0, 1 );\r\n\t\t\tthis.curF = 0;\r\n\t\t\tthis.generateTrigger();\r\n\r\n\t\t} else if ( this.curF % this.randX < this.randX / 5 ) {\r\n\r\n\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 90;\r\n\t\t\tthis.uniforms[ 'angle' ].value = THREEMath.randFloat( - Math.PI, Math.PI );\r\n\t\t\tthis.uniforms[ 'distortion_x' ].value = THREEMath.randFloat( 0, 1 );\r\n\t\t\tthis.uniforms[ 'distortion_y' ].value = THREEMath.randFloat( 0, 1 );\r\n\t\t\tthis.uniforms[ 'seed_x' ].value = THREEMath.randFloat( - 0.3, 0.3 );\r\n\t\t\tthis.uniforms[ 'seed_y' ].value = THREEMath.randFloat( - 0.3, 0.3 );\r\n\r\n\t\t} else if ( this.goWild === false ) {\r\n\r\n\t\t\tthis.uniforms[ 'byp' ].value = 1;\r\n\r\n\t\t}\r\n\r\n\t\tthis.curF ++;\r\n\t\tthis.quad.material = this.material;\r\n\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgenerateTrigger() {\r\n\r\n\t\tthis.randX = THREEMath.randInt( 120, 240 );\r\n\r\n\t}\r\n\r\n\tgenerateHeightmap( size ) {\r\n\r\n\t\tlet dataArr = new Float32Array( size * size * 3 );\r\n\t\tlet length = size * size;\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tlet val = THREEMath.randFloat( 0, 1 );\r\n\t\t\tdataArr[ i * 3 + 0 ] = val;\r\n\t\t\tdataArr[ i * 3 + 1 ] = val;\r\n\t\t\tdataArr[ i * 3 + 2 ] = val;\r\n\r\n\t\t}\r\n\r\n\t\tlet texture = new DataTexture( dataArr, size, size, RGBFormat, FloatType );\r\n\t\ttexture.needsUpdate = true;\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tGlitchPass\r\n};\r\n","import { Pass } from \"./Pass.js\";\r\nimport { CopyShader } from \"./shader/CopyShader.js\";\r\nimport { AdditiveBlending, PlaneBufferGeometry, Vector3, ShaderMaterial, Mesh, Matrix4, Vector2, Color, MeshBasicMaterial, WebGLRenderTarget, MeshDepthMaterial, LinearFilter, RGBAFormat, DoubleSide, RGBADepthPacking, NoBlending, UniformsUtils, OrthographicCamera, Scene, Sprite, Line } from \"three\";\r\n\r\nclass OutlinePass extends Pass {\r\n\r\n\tconstructor( resolution, world, selectedObjects = [], effectComposer ) {\r\n\r\n\t\tsuper( undefined, false );\r\n\t\tthis.BlurDirectionX = new Vector2( 1.0, 0.0 );\r\n\t\tthis.BlurDirectionY = new Vector2( 0.0, 1.0 );\r\n\t\tthis.renderScene = world.scene;\r\n\t\tthis.renderCamera = world.camera;\r\n\t\tthis.selectedObjects = selectedObjects;\r\n\t\tthis.visibleEdgeColor = new Color( 1, 1, 1 );\r\n\t\tthis.hiddenEdgeColor = new Color( 0.1, 0.04, 0.02 );\r\n\t\tthis.edgeGlow = 0.0;\r\n\t\tthis.usePatternTexture = false;\r\n\t\tthis.edgeThickness = 1.0;\r\n\t\tthis.edgeStrength = 3.0;\r\n\t\tthis.downSampleRatio = 2;\r\n\t\tthis.pulsePeriod = 0;\r\n\r\n\t\tthis.resolution = ( resolution !== undefined ) ? new Vector2(\r\n\t\t\tresolution.x, resolution.y ) : new Vector2( 256, 256 );\r\n\r\n\t\tlet pars = {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tformat: RGBAFormat\r\n\t\t};\r\n\r\n\t\tlet resx = Math.round( this.resolution.x / this.downSampleRatio );\r\n\t\tlet resy = Math.round( this.resolution.y / this.downSampleRatio );\r\n\r\n\t\tthis.maskBufferMaterial = new MeshBasicMaterial( { color: 0xffffff } );\r\n\t\tthis.maskBufferMaterial.side = DoubleSide;\r\n\t\tthis.renderTargetMaskBuffer = new WebGLRenderTarget(\r\n\t\t\tthis.resolution.x, this.resolution.y, pars );\r\n\t\tthis.renderTargetMaskBuffer.texture.name = \"OutlinePass.mask\";\r\n\t\tthis.renderTargetMaskBuffer.texture.generateMipmaps = false;\r\n\r\n\t\tthis.depthMaterial = new MeshDepthMaterial();\r\n\t\tthis.depthMaterial.side = DoubleSide;\r\n\t\tthis.depthMaterial.depthPacking = RGBADepthPacking;\r\n\t\tthis.depthMaterial.blending = NoBlending;\r\n\r\n\t\tthis.prepareMaskMaterial = this.getPrepareMaskMaterial();\r\n\t\tthis.prepareMaskMaterial.side = DoubleSide;\r\n\t\tthis.prepareMaskMaterial.fragmentShader = replaceDepthToViewZ( this.prepareMaskMaterial\r\n\t\t\t.fragmentShader, this.renderCamera );\r\n\r\n\t\tthis.renderTargetDepthBuffer = new WebGLRenderTarget( this.resolution\r\n\t\t\t.x,\r\n\t\tthis.resolution.y, pars );\r\n\t\tthis.renderTargetDepthBuffer.texture.name = \"OutlinePass.depth\";\r\n\t\tthis.renderTargetDepthBuffer.texture.generateMipmaps = false;\r\n\r\n\t\tthis.renderTargetMaskDownSampleBuffer = new WebGLRenderTarget( resx,\r\n\t\t\tresy, pars );\r\n\t\tthis.renderTargetMaskDownSampleBuffer.texture.name =\r\n\t\t\t\"OutlinePass.depthDownSample\";\r\n\t\tthis.renderTargetMaskDownSampleBuffer.texture.generateMipmaps = false;\r\n\r\n\t\tthis.renderTargetBlurBuffer1 = new WebGLRenderTarget( resx, resy,\r\n\t\t\tpars );\r\n\t\tthis.renderTargetBlurBuffer1.texture.name = \"OutlinePass.blur1\";\r\n\t\tthis.renderTargetBlurBuffer1.texture.generateMipmaps = false;\r\n\t\tthis.renderTargetBlurBuffer2 = new WebGLRenderTarget( Math.round(\r\n\t\t\tresx / 2 ), Math.round( resy / 2 ), pars );\r\n\t\tthis.renderTargetBlurBuffer2.texture.name = \"OutlinePass.blur2\";\r\n\t\tthis.renderTargetBlurBuffer2.texture.generateMipmaps = false;\r\n\r\n\t\tthis.edgeDetectionMaterial = this.getEdgeDetectionMaterial();\r\n\t\tthis.renderTargetEdgeBuffer1 = new WebGLRenderTarget( resx, resy,\r\n\t\t\tpars );\r\n\t\tthis.renderTargetEdgeBuffer1.texture.name = \"OutlinePass.edge1\";\r\n\t\tthis.renderTargetEdgeBuffer1.texture.generateMipmaps = false;\r\n\t\tthis.renderTargetEdgeBuffer2 = new WebGLRenderTarget( Math.round(\r\n\t\t\tresx /\r\n\t\t\t2 ), Math.round( resy / 2 ), pars );\r\n\t\tthis.renderTargetEdgeBuffer2.texture.name = \"OutlinePass.edge2\";\r\n\t\tthis.renderTargetEdgeBuffer2.texture.generateMipmaps = false;\r\n\r\n\t\tlet MAX_EDGE_THICKNESS = 4;\r\n\t\tlet MAX_EDGE_GLOW = 4;\r\n\r\n\t\tthis.separableBlurMaterial1 = this.getSeperableBlurMaterial(\r\n\t\t\tMAX_EDGE_THICKNESS );\r\n\t\tthis.separableBlurMaterial1.uniforms[ \"texSize\" ].value = new Vector2(\r\n\t\t\tresx, resy );\r\n\t\tthis.separableBlurMaterial1.uniforms[ \"kernelRadius\" ].value = 1;\r\n\t\tthis.separableBlurMaterial2 = this.getSeperableBlurMaterial( MAX_EDGE_GLOW );\r\n\t\tthis.separableBlurMaterial2.uniforms[ \"texSize\" ].value = new Vector2(\r\n\t\t\tMath.round( resx / 2 ), Math.round( resy / 2 ) );\r\n\t\tthis.separableBlurMaterial2.uniforms[ \"kernelRadius\" ].value =\r\n\t\t\tMAX_EDGE_GLOW;\r\n\r\n\t\t// Overlay material\r\n\t\tthis.overlayMaterial = this.getOverlayMaterial();\r\n\r\n\t\tthis.copyUniforms = UniformsUtils.clone( CopyShader.uniforms );\r\n\t\tthis.copyUniforms[ \"opacity\" ].value = 1.0;\r\n\r\n\t\tthis.materialCopy = new ShaderMaterial( {\r\n\t\t\tuniforms: this.copyUniforms,\r\n\t\t\tvertexShader: CopyShader.vertexShader,\r\n\t\t\tfragmentShader: CopyShader.fragmentShader,\r\n\t\t\tblending: NoBlending,\r\n\t\t\tdepthTest: false,\r\n\t\t\tdepthWrite: false,\r\n\t\t\ttransparent: true\r\n\t\t} );\r\n\r\n\t\tthis.enabled = true;\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\tthis.oldClearColor = new Color();\r\n\t\tthis.oldClearAlpha = 1;\r\n\r\n\t\tthis.camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\t\tthis.scene = new Scene();\r\n\r\n\t\tthis.quad = new Mesh( new PlaneBufferGeometry( 2, 2 ), null );\r\n\t\tthis.quad.frustumCulled = false; // Avoid getting clipped\r\n\t\tthis.scene.add( this.quad );\r\n\r\n\t\tthis.tempPulseColor1 = new Color();\r\n\t\tthis.tempPulseColor2 = new Color();\r\n\t\tthis.textureMatrix = new Matrix4();\r\n\r\n\t\tfunction replaceDepthToViewZ( string, camera ) {\r\n\r\n\t\t\tlet type = camera.isPerspectiveCamera ? \"perspective\" : \"orthographic\";\r\n\t\t\treturn string.replace( /DEPTH_TO_VIEW_Z/g, type + \"DepthToViewZ\" );\r\n\r\n\t\t}\r\n\r\n\t\tif ( effectComposer ) {\r\n\r\n\t\t\teffectComposer.addPass( this );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.renderTargetMaskBuffer.dispose();\r\n\t\tthis.renderTargetDepthBuffer.dispose();\r\n\t\tthis.renderTargetMaskDownSampleBuffer.dispose();\r\n\t\tthis.renderTargetBlurBuffer1.dispose();\r\n\t\tthis.renderTargetBlurBuffer2.dispose();\r\n\t\tthis.renderTargetEdgeBuffer1.dispose();\r\n\t\tthis.renderTargetEdgeBuffer2.dispose();\r\n\r\n\t}\r\n\r\n\tsetSize( width, height ) {\r\n\r\n\t\tthis.renderTargetMaskBuffer.setSize( width, height );\r\n\r\n\t\tlet resx = Math.round( width / this.downSampleRatio );\r\n\t\tlet resy = Math.round( height / this.downSampleRatio );\r\n\t\tthis.renderTargetMaskDownSampleBuffer.setSize( resx, resy );\r\n\t\tthis.renderTargetBlurBuffer1.setSize( resx, resy );\r\n\t\tthis.renderTargetEdgeBuffer1.setSize( resx, resy );\r\n\t\tthis.separableBlurMaterial1.uniforms[ \"texSize\" ].value = new Vector2(\r\n\t\t\tresx, resy );\r\n\r\n\t\tresx = Math.round( resx / 2 );\r\n\t\tresy = Math.round( resy / 2 );\r\n\r\n\t\tthis.renderTargetBlurBuffer2.setSize( resx, resy );\r\n\t\tthis.renderTargetEdgeBuffer2.setSize( resx, resy );\r\n\r\n\t\tthis.separableBlurMaterial2.uniforms[ \"texSize\" ].value = new Vector2(\r\n\t\t\tresx, resy );\r\n\r\n\t}\r\n\r\n\tchangeVisibilityOfSelectedObjects( bVisible ) {\r\n\r\n\t\tfunction gatherSelectedMeshesCallBack( object ) {\r\n\r\n\t\t\tif ( object instanceof Mesh ) object.visible = bVisible;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < this.selectedObjects.length; i ++ ) {\r\n\r\n\t\t\tlet selectedObject = this.selectedObjects[ i ];\r\n\t\t\tselectedObject.traverse( gatherSelectedMeshesCallBack );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tchangeVisibilityOfNonSelectedObjects( bVisible ) {\r\n\r\n\t\tlet selectedMeshes = [];\r\n\r\n\t\tfunction gatherSelectedMeshesCallBack( object ) {\r\n\r\n\t\t\tif ( object instanceof Mesh ) selectedMeshes.push( object );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < this.selectedObjects.length; i ++ ) {\r\n\r\n\t\t\tlet selectedObject = this.selectedObjects[ i ];\r\n\t\t\tselectedObject.traverse( gatherSelectedMeshesCallBack );\r\n\r\n\t\t}\r\n\r\n\t\tfunction VisibilityChangeCallBack( object ) {\r\n\r\n\t\t\tif ( object instanceof Mesh || object instanceof Line ||\r\n\t\t\t\tobject instanceof Sprite ) {\r\n\r\n\t\t\t\tlet bFound = false;\r\n\r\n\t\t\t\tfor ( let i = 0; i < selectedMeshes.length; i ++ ) {\r\n\r\n\t\t\t\t\tlet selectedObjectId = selectedMeshes[ i ].id;\r\n\t\t\t\t\tif ( selectedObjectId === object.id ) {\r\n\r\n\t\t\t\t\t\tbFound = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! bFound ) {\r\n\r\n\t\t\t\t\tlet visibility = object.visible;\r\n\t\t\t\t\tif ( ! bVisible || object.bVisible ) object.visible = bVisible;\r\n\t\t\t\t\tobject.bVisible = visibility;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.renderScene.traverse( VisibilityChangeCallBack );\r\n\r\n\t}\r\n\r\n\tupdateTextureMatrix() {\r\n\r\n\t\tthis.textureMatrix.set( 0.5, 0.0, 0.0, 0.5,\r\n\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t0.0, 0.0, 0.0, 1.0 );\r\n\t\tthis.textureMatrix.multiply( this.renderCamera.projectionMatrix );\r\n\t\tthis.textureMatrix.multiply( this.renderCamera.matrixWorldInverse );\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer, delta, maskActive ) {\r\n\r\n\t\tif ( this.selectedObjects.length === 0 ) return;\r\n\r\n\t\tthis.oldClearColor.copy( renderer.getClearColor() );\r\n\t\tthis.oldClearAlpha = renderer.getClearAlpha();\r\n\t\tlet oldAutoClear = renderer.autoClear;\r\n\r\n\t\trenderer.autoClear = false;\r\n\r\n\t\tif ( maskActive ) renderer.context.disable( renderer.context.STENCIL_TEST );\r\n\r\n\t\trenderer.setClearColor( 0xffffff, 1 );\r\n\r\n\t\t// Make selected objects invisible\r\n\t\tthis.changeVisibilityOfSelectedObjects( false );\r\n\r\n\t\tlet currentBackground = this.renderScene.background;\r\n\t\tthis.renderScene.background = null;\r\n\r\n\t\t// 1. Draw Non Selected objects in the depth buffer\r\n\t\tthis.renderScene.overrideMaterial = this.depthMaterial;\r\n\t\trenderer.render( this.renderScene, this.renderCamera, this.renderTargetDepthBuffer,\r\n\t\t\ttrue );\r\n\r\n\t\t// Make selected objects visible\r\n\t\tthis.changeVisibilityOfSelectedObjects( true );\r\n\r\n\t\t// Update Texture Matrix for Depth compare\r\n\t\tthis.updateTextureMatrix();\r\n\r\n\t\t// Make non selected objects invisible, and draw only the selected objects, by comparing the depth buffer of non selected objects\r\n\t\tthis.changeVisibilityOfNonSelectedObjects( false );\r\n\t\tthis.renderScene.overrideMaterial = this.prepareMaskMaterial;\r\n\t\tthis.prepareMaskMaterial.uniforms[ \"cameraNearFar\" ].value = new Vector2(\r\n\t\t\tthis.renderCamera.near, this.renderCamera.far );\r\n\t\tthis.prepareMaskMaterial.uniforms[ \"depthTexture\" ].value = this.renderTargetDepthBuffer\r\n\t\t\t.texture;\r\n\t\tthis.prepareMaskMaterial.uniforms[ \"textureMatrix\" ].value = this.textureMatrix;\r\n\t\trenderer.render( this.renderScene, this.renderCamera, this.renderTargetMaskBuffer,\r\n\t\t\ttrue );\r\n\t\tthis.renderScene.overrideMaterial = null;\r\n\t\tthis.changeVisibilityOfNonSelectedObjects( true );\r\n\r\n\t\tthis.renderScene.background = currentBackground;\r\n\r\n\t\t// 2. Downsample to Half resolution\r\n\t\tthis.quad.material = this.materialCopy;\r\n\t\tthis.copyUniforms[ \"tDiffuse\" ].value = this.renderTargetMaskBuffer.texture;\r\n\t\trenderer.render( this.scene, this.camera, this.renderTargetMaskDownSampleBuffer,\r\n\t\t\ttrue );\r\n\r\n\t\tthis.tempPulseColor1.copy( this.visibleEdgeColor );\r\n\t\tthis.tempPulseColor2.copy( this.hiddenEdgeColor );\r\n\r\n\t\tif ( this.pulsePeriod > 0 ) {\r\n\r\n\t\t\tlet scalar = ( 1 + 0.25 ) / 2 + Math.cos( performance.now() * 0.01 /\r\n\t\t\t\tthis.pulsePeriod ) * ( 1.0 - 0.25 ) / 2;\r\n\t\t\tthis.tempPulseColor1.multiplyScalar( scalar );\r\n\t\t\tthis.tempPulseColor2.multiplyScalar( scalar );\r\n\r\n\t\t}\r\n\r\n\t\t// 3. Apply Edge Detection Pass\r\n\t\tthis.quad.material = this.edgeDetectionMaterial;\r\n\t\tthis.edgeDetectionMaterial.uniforms[ \"maskTexture\" ].value = this.renderTargetMaskDownSampleBuffer\r\n\t\t\t.texture;\r\n\t\tthis.edgeDetectionMaterial.uniforms[ \"texSize\" ].value = new Vector2(\r\n\t\t\tthis.renderTargetMaskDownSampleBuffer.width, this.renderTargetMaskDownSampleBuffer\r\n\t\t\t\t.height );\r\n\t\tthis.edgeDetectionMaterial.uniforms[ \"visibleEdgeColor\" ].value = this.tempPulseColor1;\r\n\t\tthis.edgeDetectionMaterial.uniforms[ \"hiddenEdgeColor\" ].value = this.tempPulseColor2;\r\n\t\trenderer.render( this.scene, this.camera, this.renderTargetEdgeBuffer1,\r\n\t\t\ttrue );\r\n\r\n\t\t// 4. Apply Blur on Half res\r\n\t\tthis.quad.material = this.separableBlurMaterial1;\r\n\t\tthis.separableBlurMaterial1.uniforms[ \"colorTexture\" ].value = this.renderTargetEdgeBuffer1\r\n\t\t\t.texture;\r\n\t\tthis.separableBlurMaterial1.uniforms[ \"direction\" ].value = this.BlurDirectionX;\r\n\t\tthis.separableBlurMaterial1.uniforms[ \"kernelRadius\" ].value = this.edgeThickness;\r\n\t\trenderer.render( this.scene, this.camera, this.renderTargetBlurBuffer1,\r\n\t\t\ttrue );\r\n\t\tthis.separableBlurMaterial1.uniforms[ \"colorTexture\" ].value = this.renderTargetBlurBuffer1\r\n\t\t\t.texture;\r\n\t\tthis.separableBlurMaterial1.uniforms[ \"direction\" ].value = this\r\n\t\t\t.BlurDirectionY;\r\n\t\trenderer.render( this.scene, this.camera, this.renderTargetEdgeBuffer1,\r\n\t\t\ttrue );\r\n\r\n\t\t// Apply Blur on quarter res\r\n\t\tthis.quad.material = this.separableBlurMaterial2;\r\n\t\tthis.separableBlurMaterial2.uniforms[ \"colorTexture\" ].value = this.renderTargetEdgeBuffer1.texture;\r\n\t\tthis.separableBlurMaterial2.uniforms[ \"direction\" ].value = this.BlurDirectionX;\r\n\t\trenderer.render( this.scene, this.camera, this.renderTargetBlurBuffer2, true );\r\n\t\tthis.separableBlurMaterial2.uniforms[ \"colorTexture\" ].value = this.renderTargetBlurBuffer2.texture;\r\n\t\tthis.separableBlurMaterial2.uniforms[ \"direction\" ].value = this.BlurDirectionY;\r\n\t\trenderer.render( this.scene, this.camera, this.renderTargetEdgeBuffer2, true );\r\n\r\n\t\t// Blend it additively over the input texture\r\n\t\tthis.quad.material = this.overlayMaterial;\r\n\t\tthis.overlayMaterial.uniforms[ \"maskTexture\" ].value = this.renderTargetMaskBuffer\r\n\t\t\t.texture;\r\n\t\tthis.overlayMaterial.uniforms[ \"edgeTexture1\" ].value = this.renderTargetEdgeBuffer1\r\n\t\t\t.texture;\r\n\t\tthis.overlayMaterial.uniforms[ \"edgeTexture2\" ].value = this.renderTargetEdgeBuffer2\r\n\t\t\t.texture;\r\n\t\tthis.overlayMaterial.uniforms[ \"patternTexture\" ].value = this.patternTexture;\r\n\t\tthis.overlayMaterial.uniforms[ \"edgeStrength\" ].value = this.edgeStrength;\r\n\t\tthis.overlayMaterial.uniforms[ \"edgeGlow\" ].value = this.edgeGlow;\r\n\t\tthis.overlayMaterial.uniforms[ \"usePatternTexture\" ].value = this.usePatternTexture;\r\n\r\n\t\tif ( maskActive ) renderer.context.enable( renderer.context.STENCIL_TEST );\r\n\r\n\t\trenderer.render( this.scene, this.camera, readBuffer, false );\r\n\r\n\t\trenderer.setClearColor( this.oldClearColor, this.oldClearAlpha );\r\n\t\trenderer.autoClear = oldAutoClear;\r\n\r\n\t}\r\n\r\n\tgetPrepareMaskMaterial() {\r\n\r\n\t\treturn new ShaderMaterial( {\r\n\t\t\tuniforms: {\r\n\t\t\t\t\"depthTexture\": { value: null },\r\n\t\t\t\t\"cameraNearFar\": { value: new Vector2( 0.5, 0.5 ) },\r\n\t\t\t\t\"textureMatrix\": { value: new Matrix4() }\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: [\r\n\t\t\t\t'varying vec4 projTexCoord;',\r\n\t\t\t\t'varying vec4 vPosition;',\r\n\t\t\t\t'uniform mat4 textureMatrix;',\r\n\r\n\t\t\t\t'void main() {',\r\n\r\n\t\t\t\t'\tvPosition = modelViewMatrix * vec4( position, 1.0 );',\r\n\t\t\t\t'\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );',\r\n\t\t\t\t'\tprojTexCoord = textureMatrix * worldPosition;',\r\n\t\t\t\t'\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\r\n\r\n\t\t\t\t'}'\r\n\t\t\t].join( '\\n' ),\r\n\r\n\t\t\tfragmentShader: [\r\n\t\t\t\t'#include <packing>',\r\n\t\t\t\t'varying vec4 vPosition;',\r\n\t\t\t\t'varying vec4 projTexCoord;',\r\n\t\t\t\t'uniform sampler2D depthTexture;',\r\n\t\t\t\t'uniform vec2 cameraNearFar;',\r\n\r\n\t\t\t\t'void main() {',\r\n\r\n\t\t\t\t'\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));',\r\n\t\t\t\t'\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );',\r\n\t\t\t\t'\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;',\r\n\t\t\t\t'\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);',\r\n\r\n\t\t\t\t'}'\r\n\t\t\t].join( '\\n' )\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tgetEdgeDetectionMaterial() {\r\n\r\n\t\treturn new ShaderMaterial( {\r\n\t\t\tuniforms: {\r\n\t\t\t\t\"maskTexture\": { value: null },\r\n\t\t\t\t\"texSize\": { value: new Vector2( 0.5, 0.5 ) },\r\n\t\t\t\t\"visibleEdgeColor\": { value: new Vector3( 1.0, 1.0, 1.0 ) },\r\n\t\t\t\t\"hiddenEdgeColor\": { value: new Vector3( 1.0, 1.0, 1.0 ) },\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: `varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n\t\t\tfragmentShader: `varying vec2 vUv;\r\n\t\t\t\tuniform sampler2D maskTexture;\r\n\t\t\t\tuniform vec2 texSize;\r\n\t\t\t\tuniform vec3 visibleEdgeColor;\r\n\t\t\t\tuniform vec3 hiddenEdgeColor;\r\n\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\r\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\r\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\r\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\r\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\r\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\r\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\r\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\r\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\r\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\r\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\r\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\r\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\r\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\r\n\t\t\t\t}`\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tgetSeperableBlurMaterial( maxRadius ) {\r\n\r\n\t\treturn new ShaderMaterial( {\r\n\t\t\tdefines: {\r\n\t\t\t\t\"MAX_RADIUS\": maxRadius,\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\t\"colorTexture\": { value: null },\r\n\t\t\t\t\"texSize\": { value: new Vector2( 0.5, 0.5 ) },\r\n\t\t\t\t\"direction\": { value: new Vector2( 0.5, 0.5 ) },\r\n\t\t\t\t\"kernelRadius\": { value: 1.0 }\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: `varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n\t\t\tfragmentShader: `#include <common>\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tuniform sampler2D colorTexture;\r\n\t\t\t\tuniform vec2 texSize;\r\n\t\t\t\tuniform vec2 direction;\r\n\t\t\t\tuniform float kernelRadius;\r\n\r\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\r\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\r\n\t\t\t\t}\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\r\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\r\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\r\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\r\n\t\t\t\t\tvec2 uvOffset = delta;\r\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\r\n\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\r\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\r\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\r\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\r\n\t\t\t\t\t\tweightSum += (2.0 * w);\r\n\t\t\t\t\t\tuvOffset += delta;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\r\n\t\t\t\t}`\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tgetOverlayMaterial() {\r\n\r\n\t\treturn new ShaderMaterial( {\r\n\t\t\tuniforms: {\r\n\t\t\t\t\"maskTexture\": { value: null },\r\n\t\t\t\t\"edgeTexture1\": { value: null },\r\n\t\t\t\t\"edgeTexture2\": { value: null },\r\n\t\t\t\t\"patternTexture\": { value: null },\r\n\t\t\t\t\"edgeStrength\": { value: 1.0 },\r\n\t\t\t\t\"edgeGlow\": { value: 1.0 },\r\n\t\t\t\t\"usePatternTexture\": { value: 0.0 }\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: `varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n\t\t\tfragmentShader: `varying vec2 vUv;\r\n\t\t\t\tuniform sampler2D maskTexture;\r\n\t\t\t\tuniform sampler2D edgeTexture1;\r\n\t\t\t\tuniform sampler2D edgeTexture2;\r\n\t\t\t\tuniform sampler2D patternTexture;\r\n\t\t\t\tuniform float edgeStrength;\r\n\t\t\t\tuniform float edgeGlow;\r\n\t\t\t\tuniform bool usePatternTexture;\r\n\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\r\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\r\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\r\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\r\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\r\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\r\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\r\n\t\t\t\t\tif(usePatternTexture)\r\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\r\n\t\t\t\t\tgl_FragColor = finalColor;\r\n\t\t\t\t}`,\r\n\t\t\tblending: AdditiveBlending,\r\n\t\t\tdepthTest: false,\r\n\t\t\tdepthWrite: false,\r\n\t\t\ttransparent: true\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tOutlinePass\r\n};\r\n","/**\r\n * @author mattatz / http://mattatz.github.io\r\n *\r\n * Based on\r\n * Charlotte Hoare MSc Project / http://nccastaff.bournemouth.ac.uk/jmacey/MastersProjects/MSc12/Hoare/index.html\r\n * and\r\n * Su et al. Real-Time rendering of watercolor effects for virtual environments. / http://dl.acm.org/citation.cfm?id=2131253\r\n */\r\n\r\nimport { Vector2 } from \"three\";\r\n\r\nlet WatercolorShader = {\r\n\r\n\tuniforms: {\r\n\t\t\"tDiffuse\": { type: \"t\", value: null }, // diffuse texture\r\n\t\t\"tPaper\": { type: \"t\", value: null }, // paper texture\r\n\t\t\"texel\": { type: \"v2\", value: new Vector2( 1.0 / 512, 1.0 / 512 ) },\r\n\t\t\"scale\": { type: \"f\", value: 0.03 }, // wobble scale\r\n\t\t\"threshold\": { type: \"f\", value: 0.7 }, // edge threshold\r\n\t\t\"darkening\": { type: \"f\", value: 1.75 }, // edge darkening\r\n\t\t\"pigment\": { type: \"f\", value: 1.2 }, // pigment dispersion\r\n\t},\r\n\r\n\tvertexShader: [\r\n\t\t\"varying vec2 vUv;\",\r\n\t\t\"void main() {\",\r\n\t\t\"vUv = uv;\",\r\n\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\"}\"\r\n\t].join( \"\\n\" ),\r\n\r\n\tfragmentShader: [\r\n\t\t\"uniform sampler2D tDiffuse;\",\r\n\t\t\"uniform sampler2D tPaper;\",\r\n\r\n\t\t\"uniform vec2 texel;\",\r\n\t\t\"uniform float scale;\",\r\n\t\t\"uniform float threshold;\",\r\n\t\t\"uniform float darkening;\",\r\n\t\t\"uniform float pigment;\",\r\n\r\n\t\t\"varying vec2 vUv;\",\r\n\r\n\t\t\"float sobel(sampler2D tex, vec2 uv) {\",\r\n\r\n\t\t\"vec3 hr = vec3(0., 0., 0.);\",\r\n\t\t\"hr += texture2D(tex, (uv + vec2(-1.0, -1.0) * texel)).rgb *  1.0;\",\r\n\t\t\"hr += texture2D(tex, (uv + vec2( 0.0, -1.0) * texel)).rgb *  0.0;\",\r\n\t\t\"hr += texture2D(tex, (uv + vec2( 1.0, -1.0) * texel)).rgb * -1.0;\",\r\n\t\t\"hr += texture2D(tex, (uv + vec2(-1.0,  0.0) * texel)).rgb *  2.0;\",\r\n\t\t\"hr += texture2D(tex, (uv + vec2( 0.0,  0.0) * texel)).rgb *  0.0;\",\r\n\t\t\"hr += texture2D(tex, (uv + vec2( 1.0,  0.0) * texel)).rgb * -2.0;\",\r\n\t\t\"hr += texture2D(tex, (uv + vec2(-1.0,  1.0) * texel)).rgb *  1.0;\",\r\n\t\t\"hr += texture2D(tex, (uv + vec2( 0.0,  1.0) * texel)).rgb *  0.0;\",\r\n\t\t\"hr += texture2D(tex, (uv + vec2( 1.0,  1.0) * texel)).rgb * -1.0;\",\r\n\r\n\t\t\"vec3 vt = vec3(0., 0., 0.);\",\r\n\t\t\"vt += texture2D(tex, (uv + vec2(-1.0, -1.0) * texel)).rgb *  1.0;\",\r\n\t\t\"vt += texture2D(tex, (uv + vec2( 0.0, -1.0) * texel)).rgb *  2.0;\",\r\n\t\t\"vt += texture2D(tex, (uv + vec2( 1.0, -1.0) * texel)).rgb *  1.0;\",\r\n\t\t\"vt += texture2D(tex, (uv + vec2(-1.0,  0.0) * texel)).rgb *  0.0;\",\r\n\t\t\"vt += texture2D(tex, (uv + vec2( 0.0,  0.0) * texel)).rgb *  0.0;\",\r\n\t\t\"vt += texture2D(tex, (uv + vec2( 1.0,  0.0) * texel)).rgb *  0.0;\",\r\n\t\t\"vt += texture2D(tex, (uv + vec2(-1.0,  1.0) * texel)).rgb * -1.0;\",\r\n\t\t\"vt += texture2D(tex, (uv + vec2( 0.0,  1.0) * texel)).rgb * -2.0;\",\r\n\t\t\"vt += texture2D(tex, (uv + vec2( 1.0,  1.0) * texel)).rgb * -1.0;\",\r\n\r\n\t\t\"return sqrt(dot(hr, hr) + dot(vt, vt));\",\r\n\t\t\"}\",\r\n\r\n\t\t\"vec2 wobble(sampler2D tex, vec2 uv) {\",\r\n\t\t\"return uv + (texture2D(tex, uv).xy - 0.5) * scale;\",\r\n\t\t\"}\",\r\n\r\n\t\t\"vec4 edgeDarkening(sampler2D tex, vec2 uv) {\",\r\n\t\t\"vec4 c = texture2D(tex, uv);\",\r\n\t\t\"return c * (1.0 - (1.0 - c) * (darkening - 1.0));\",\r\n\t\t\"}\",\r\n\r\n\t\t\"float granulation(sampler2D tex, vec2 uv, float beta) {\",\r\n\t\t\"vec4 c = texture2D(tex, uv);\",\r\n\t\t\"float intensity = (c.r + c.g + c.b) / 3.0;\",\r\n\t\t\"return 1.0 + beta * (intensity - 0.5);\",\r\n\t\t\"}\",\r\n\r\n\t\t\"void main() {\",\r\n\t\t\"vec2 uv = vUv;\",\r\n\t\t\"uv = wobble(tPaper, uv);\",\r\n\r\n\t\t\"float pd = granulation(tPaper, vUv, pigment);\", // pigment dispersion\r\n\r\n\t\t\"float edge = sobel(tDiffuse, uv);\",\r\n\t\t\"if (edge > threshold) {\",\r\n\t\t\"gl_FragColor = pd * edgeDarkening(tDiffuse, uv);\",\r\n\t\t\"} else {\",\r\n\t\t\"gl_FragColor = pd * texture2D(tDiffuse, uv);\",\r\n\t\t\"}\",\r\n\t\t\"}\"\r\n\r\n\t].join( \"\\n\" )\r\n\r\n};\r\n\r\nexport {\r\n\tWatercolorShader\r\n};\r\n","/**\r\n * @author mattatz / http://mattatz.github.io\r\n */\r\nimport { Pass } from './Pass.js';\r\nimport { WatercolorShader } from './shader/WatercolorShader.js';\r\nimport { PlaneBufferGeometry, ShaderMaterial, Mesh, Vector2, UniformsUtils, OrthographicCamera, Scene, RepeatWrapping } from \"three\";\r\n\r\nclass WatercolorPass extends Pass {\r\n\r\n\tconstructor( tPaper, effectComposer, renderToScreen ) {\r\n\r\n\t\tsuper( effectComposer, renderToScreen );\r\n\t\tlet shader = WatercolorShader;\r\n\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\ttPaper.wrapS = tPaper.wrapT = RepeatWrapping;\r\n\t\tthis.uniforms[ \"tPaper\" ].value = tPaper;\r\n\r\n\t\tthis.material = new ShaderMaterial( {\r\n\t\t\tuniforms: this.uniforms,\r\n\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t} );\r\n\r\n\t\tthis.enabled = true;\r\n\t\tthis.renderToScreen = renderToScreen;\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\tthis.camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\t\tthis.scene = new Scene();\r\n\r\n\t\tthis.quad = new Mesh( new PlaneBufferGeometry( 2, 2 ), undefined );\r\n\t\tthis.scene.add( this.quad );\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer ) {\r\n\r\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer;\r\n\t\tthis.uniforms[ \"texel\" ].value = new Vector2( 1.0 / readBuffer.width,\r\n\t\t\t1.0 / readBuffer.height );\r\n\r\n\t\tthis.quad.material = this.material;\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera, writeBuffer, false );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tWatercolorPass\r\n};\r\n","import { Vector2 } from \"three\";\r\n\r\nlet TestShader = {\r\n\tuniforms: {\r\n\t\t\"tDiffuse\": { value: null },\r\n\t\t\"tSize\": { value: new Vector2( 256, 256 ) },\r\n\t\t\"center\": { value: new Vector2( 0.5, 0.5 ) },\r\n\t\t\"angle\": { value: 1.57 },\r\n\t\t\"scale\": { value: 1.0 }\r\n\t},\r\n\r\n\tvertexShader: [\r\n\t\t\"varying vec2 vUv;\",\r\n\t\t\"void main() {\",\r\n\t\t\"vUv = uv;\",\r\n\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\"}\"\r\n\t].join( \"\\n\" ),\r\n\r\n\tfragmentShader: [\r\n\t\t`uniform vec2 center;\r\n    uniform float angle;\r\n    uniform float scale;\r\n    uniform vec2 tSize;\r\n    uniform sampler2D tDiffuse;\r\n    varying vec2 vUv;\r\n    float pattern() {\r\n      float s = sin( angle ), c = cos( angle );\r\n      vec2 tex = vUv * tSize - center;\r\n      vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\r\n      return ( sin( point.x ) * sin( point.y ) ) * 4.0;\r\n    }\r\n\r\nconst float PI = 3.1415926536;\r\nconst float PI2 = PI * 2.0; \r\nconst int mSize = 9;\r\nconst int kSize = (mSize-1)/2;\r\nconst float sigma = 3.0;\r\nfloat kernel[mSize];\r\n\r\nfloat normpdf(in float x, in float sigma) \r\n{\r\n\treturn 0.39894 * exp(-0.5 * x * x / (sigma * sigma)) / sigma;\r\n}\r\n\r\nvec3 colorDodge(in vec3 src, in vec3 dst)\r\n{\r\n    return step(0.0, dst) * mix(min(vec3(1.0), dst/ (1.0 - src)), vec3(1.0), step(1.0, src)); \r\n}\r\n\r\nfloat greyScale(in vec3 col) \r\n{\r\n    return dot(col, vec3(0.3, 0.59, 0.11));\r\n    //return dot(col, vec3(0.2126, 0.7152, 0.0722)); //sRGB\r\n}\r\n\r\nvec2 random(vec2 p){\r\n\tp = fract(p * vec2(443.897, 441.423));\r\n    p += dot(p, p.yx+19.19);\r\n    return fract((p.xx+p.yx)*p.xy);\r\n}\r\n\r\n\r\n    void main() {\r\n    \tvec2 q = -1.0 + 2.0 *vUv;\r\n      vec4 color = texture2D( tDiffuse, vUv );\r\n      vec3 col = color.rgb;\r\n      \r\n      vec2 r = random(q);\r\n      r.x *= PI2;\r\n      vec2 cr = vec2(sin(r.x),cos(r.x))*sqrt(r.y);\r\n    \r\n      vec3 blurred = color.rgb;\r\n    \r\n    \r\n    vec3 inv = vec3(1.0) - blurred; \r\n    // color dodge\r\n    vec3 lighten = colorDodge(col, inv);\r\n    // grey scale\r\n    vec3 res = vec3(greyScale(lighten));\r\n    \r\n    // more contrast\r\n    res = vec3(pow(res.x, 3.0)); \r\n      \r\n      \r\n      gl_FragColor = vec4( res,1.0 );\r\n    }`\r\n\t].join( \"\\n\" )\r\n};\r\n\r\nexport {\r\n\tTestShader\r\n};\r\n","import { Pass } from './Pass.js';\r\nimport { TestShader } from './shader/TestShader.js';\r\nimport { PlaneBufferGeometry, ShaderMaterial, Mesh, UniformsUtils, OrthographicCamera, Scene } from \"three\";\r\n\r\nclass TestPass extends Pass {\r\n\r\n\tconstructor( center, angle, scale, effectComposer, renderToScreen = false ) {\r\n\r\n\t\tsuper( effectComposer, renderToScreen );\r\n\t\tthis.uniforms = UniformsUtils.clone( TestShader.uniforms );\r\n\t\tif ( center !== undefined ) this.uniforms[ \"center\" ].value.copy( center );\r\n\t\tif ( angle !== undefined ) this.uniforms[ \"angle\" ].value = angle;\r\n\t\tif ( scale !== undefined ) this.uniforms[ \"scale\" ].value = scale;\r\n\r\n\t\tthis.material = new ShaderMaterial( {\r\n\t\t\tuniforms: this.uniforms,\r\n\t\t\tvertexShader: TestShader.vertexShader,\r\n\t\t\tfragmentShader: TestShader.fragmentShader\r\n\t\t} );\r\n\r\n\t\tthis.camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\t\tthis.scene = new Scene();\r\n\t\tthis.quad = new Mesh( new PlaneBufferGeometry( 2, 2 ), null );\r\n\t\tthis.quad.frustumCulled = false; // Avoid getting clipped\r\n\t\tthis.scene.add( this.quad );\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer ) {\r\n\r\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer.texture;\r\n\t\tthis.uniforms[ \"tSize\" ].value.set( readBuffer.width, readBuffer.height );\r\n\r\n\t\tthis.quad.material = this.material;\r\n\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport {\r\n\tTestPass\r\n};\r\n","/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author davidedc / http://www.sketchpatch.net/\r\n *\r\n * NVIDIA FXAA by Timothy Lottes\r\n * http://timothylottes.blogspot.com/2011/06/fxaa3-source-released.html\r\n * - WebGL port by @supereggbert\r\n * http://www.glge.org/demos/fxaa/\r\n */\r\n\r\nimport { Vector2 } from \"three\";\r\n\r\nlet FXAAShader = {\r\n\r\n\tuniforms: {\r\n\r\n\t\t\"tDiffuse\": { value: null },\r\n\t\t\"resolution\": { value: new Vector2( 1 / 1024, 1 / 512 ) }\r\n\r\n\t},\r\n\r\n\tvertexShader: [\r\n\r\n\t\t\"varying vec2 vUv;\",\r\n\r\n\t\t\"void main() {\",\r\n\r\n\t\t\"vUv = uv;\",\r\n\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\"}\"\r\n\r\n\t].join( \"\\n\" ),\r\n\r\n\tfragmentShader: [\r\n\t\t\"precision highp float;\",\r\n\t\t\"\",\r\n\t\t\"uniform sampler2D tDiffuse;\",\r\n\t\t\"\",\r\n\t\t\"uniform vec2 resolution;\",\r\n\t\t\"\",\r\n\t\t\"varying vec2 vUv;\",\r\n\t\t\"\",\r\n\t\t\"// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\",\r\n\t\t\"\",\r\n\t\t\"//----------------------------------------------------------------------------------\",\r\n\t\t\"// File:        es3-kepler\\FXAA\\assets\\shaders/FXAA_DefaultES.frag\",\r\n\t\t\"// SDK Version: v3.00\",\r\n\t\t\"// Email:       gameworks@nvidia.com\",\r\n\t\t\"// Site:        http://developer.nvidia.com/\",\r\n\t\t\"//\",\r\n\t\t\"// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\",\r\n\t\t\"//\",\r\n\t\t\"// Redistribution and use in source and binary forms, with or without\",\r\n\t\t\"// modification, are permitted provided that the following conditions\",\r\n\t\t\"// are met:\",\r\n\t\t\"//  * Redistributions of source code must retain the above copyright\",\r\n\t\t\"//    notice, this list of conditions and the following disclaimer.\",\r\n\t\t\"//  * Redistributions in binary form must reproduce the above copyright\",\r\n\t\t\"//    notice, this list of conditions and the following disclaimer in the\",\r\n\t\t\"//    documentation and/or other materials provided with the distribution.\",\r\n\t\t\"//  * Neither the name of NVIDIA CORPORATION nor the names of its\",\r\n\t\t\"//    contributors may be used to endorse or promote products derived\",\r\n\t\t\"//    from this software without specific prior written permission.\",\r\n\t\t\"//\",\r\n\t\t\"// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\",\r\n\t\t\"// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\",\r\n\t\t\"// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\",\r\n\t\t\"// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\",\r\n\t\t\"// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\",\r\n\t\t\"// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\",\r\n\t\t\"// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\",\r\n\t\t\"// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\",\r\n\t\t\"// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\",\r\n\t\t\"// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\",\r\n\t\t\"// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\",\r\n\t\t\"//\",\r\n\t\t\"//----------------------------------------------------------------------------------\",\r\n\t\t\"\",\r\n\t\t\"#define FXAA_PC 1\",\r\n\t\t\"#define FXAA_GLSL_100 1\",\r\n\t\t\"#define FXAA_QUALITY_PRESET 12\",\r\n\t\t\"\",\r\n\t\t\"#define FXAA_GREEN_AS_LUMA 1\",\r\n\t\t\"\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_PC_CONSOLE\",\r\n\t\t\"    //\",\r\n\t\t\"    // The console algorithm for PC is included\",\r\n\t\t\"    // for developers targeting really low spec machines.\",\r\n\t\t\"    // Likely better to just run FXAA_PC, and use a really low preset.\",\r\n\t\t\"    //\",\r\n\t\t\"    #define FXAA_PC_CONSOLE 0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_GLSL_120\",\r\n\t\t\"    #define FXAA_GLSL_120 0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_GLSL_130\",\r\n\t\t\"    #define FXAA_GLSL_130 0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_HLSL_3\",\r\n\t\t\"    #define FXAA_HLSL_3 0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_HLSL_4\",\r\n\t\t\"    #define FXAA_HLSL_4 0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_HLSL_5\",\r\n\t\t\"    #define FXAA_HLSL_5 0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*==========================================================================*/\",\r\n\t\t\"#ifndef FXAA_GREEN_AS_LUMA\",\r\n\t\t\"    //\",\r\n\t\t\"    // For those using non-linear color,\",\r\n\t\t\"    // and either not able to get luma in alpha, or not wanting to,\",\r\n\t\t\"    // this enables FXAA to run using green as a proxy for luma.\",\r\n\t\t\"    // So with this enabled, no need to pack luma in alpha.\",\r\n\t\t\"    //\",\r\n\t\t\"    // This will turn off AA on anything which lacks some amount of green.\",\r\n\t\t\"    // Pure red and blue or combination of only R and B, will get no AA.\",\r\n\t\t\"    //\",\r\n\t\t\"    // Might want to lower the settings for both,\",\r\n\t\t\"    //    fxaaConsoleEdgeThresholdMin\",\r\n\t\t\"    //    fxaaQualityEdgeThresholdMin\",\r\n\t\t\"    // In order to insure AA does not get turned off on colors\",\r\n\t\t\"    // which contain a minor amount of green.\",\r\n\t\t\"    //\",\r\n\t\t\"    // 1 = On.\",\r\n\t\t\"    // 0 = Off.\",\r\n\t\t\"    //\",\r\n\t\t\"    #define FXAA_GREEN_AS_LUMA 0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_EARLY_EXIT\",\r\n\t\t\"    //\",\r\n\t\t\"    // Controls algorithm's early exit path.\",\r\n\t\t\"    // On PS3 turning this ON adds 2 cycles to the shader.\",\r\n\t\t\"    // On 360 turning this OFF adds 10ths of a millisecond to the shader.\",\r\n\t\t\"    // Turning this off on console will result in a more blurry image.\",\r\n\t\t\"    // So this defaults to on.\",\r\n\t\t\"    //\",\r\n\t\t\"    // 1 = On.\",\r\n\t\t\"    // 0 = Off.\",\r\n\t\t\"    //\",\r\n\t\t\"    #define FXAA_EARLY_EXIT 1\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_DISCARD\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only valid for PC OpenGL currently.\",\r\n\t\t\"    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\",\r\n\t\t\"    //\",\r\n\t\t\"    // 1 = Use discard on pixels which don't need AA.\",\r\n\t\t\"    //     For APIs which enable concurrent TEX+ROP from same surface.\",\r\n\t\t\"    // 0 = Return unchanged color on pixels which don't need AA.\",\r\n\t\t\"    //\",\r\n\t\t\"    #define FXAA_DISCARD 0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_FAST_PIXEL_OFFSET\",\r\n\t\t\"    //\",\r\n\t\t\"    // Used for GLSL 120 only.\",\r\n\t\t\"    //\",\r\n\t\t\"    // 1 = GL API supports fast pixel offsets\",\r\n\t\t\"    // 0 = do not use fast pixel offsets\",\r\n\t\t\"    //\",\r\n\t\t\"    #ifdef GL_EXT_gpu_shader4\",\r\n\t\t\"        #define FXAA_FAST_PIXEL_OFFSET 1\",\r\n\t\t\"    #endif\",\r\n\t\t\"    #ifdef GL_NV_gpu_shader5\",\r\n\t\t\"        #define FXAA_FAST_PIXEL_OFFSET 1\",\r\n\t\t\"    #endif\",\r\n\t\t\"    #ifdef GL_ARB_gpu_shader5\",\r\n\t\t\"        #define FXAA_FAST_PIXEL_OFFSET 1\",\r\n\t\t\"    #endif\",\r\n\t\t\"    #ifndef FXAA_FAST_PIXEL_OFFSET\",\r\n\t\t\"        #define FXAA_FAST_PIXEL_OFFSET 0\",\r\n\t\t\"    #endif\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#ifndef FXAA_GATHER4_ALPHA\",\r\n\t\t\"    //\",\r\n\t\t\"    // 1 = API supports gather4 on alpha channel.\",\r\n\t\t\"    // 0 = API does not support gather4 on alpha channel.\",\r\n\t\t\"    //\",\r\n\t\t\"    #if (FXAA_HLSL_5 == 1)\",\r\n\t\t\"        #define FXAA_GATHER4_ALPHA 1\",\r\n\t\t\"    #endif\",\r\n\t\t\"    #ifdef GL_ARB_gpu_shader5\",\r\n\t\t\"        #define FXAA_GATHER4_ALPHA 1\",\r\n\t\t\"    #endif\",\r\n\t\t\"    #ifdef GL_NV_gpu_shader5\",\r\n\t\t\"        #define FXAA_GATHER4_ALPHA 1\",\r\n\t\t\"    #endif\",\r\n\t\t\"    #ifndef FXAA_GATHER4_ALPHA\",\r\n\t\t\"        #define FXAA_GATHER4_ALPHA 0\",\r\n\t\t\"    #endif\",\r\n\t\t\"#endif\",\r\n\t\t\"\",\r\n\t\t\"\",\r\n\t\t\"/*============================================================================\",\r\n\t\t\"                        FXAA QUALITY - TUNING KNOBS\",\r\n\t\t\"------------------------------------------------------------------------------\",\r\n\t\t\"NOTE the other tuning knobs are now in the shader function inputs!\",\r\n\t\t\"============================================================================*/\",\r\n\t\t\"#ifndef FXAA_QUALITY_PRESET\",\r\n\t\t\"    //\",\r\n\t\t\"    // Choose the quality preset.\",\r\n\t\t\"    // This needs to be compiled into the shader as it effects code.\",\r\n\t\t\"    // Best option to include multiple presets is to\",\r\n\t\t\"    // in each shader define the preset, then include this file.\",\r\n\t\t\"    //\",\r\n\t\t\"    // OPTIONS\",\r\n\t\t\"    // -----------------------------------------------------------------------\",\r\n\t\t\"    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\",\r\n\t\t\"    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\",\r\n\t\t\"    // 39       - no dither, very expensive\",\r\n\t\t\"    //\",\r\n\t\t\"    // NOTES\",\r\n\t\t\"    // -----------------------------------------------------------------------\",\r\n\t\t\"    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\",\r\n\t\t\"    // 13 = about same speed as FXAA 3.9 and better than 12\",\r\n\t\t\"    // 23 = closest to FXAA 3.9 visually and performance wise\",\r\n\t\t\"    //  _ = the lowest digit is directly related to performance\",\r\n\t\t\"    // _  = the highest digit is directly related to style\",\r\n\t\t\"    //\",\r\n\t\t\"    #define FXAA_QUALITY_PRESET 12\",\r\n\t\t\"#endif\",\r\n\t\t\"\",\r\n\t\t\"\",\r\n\t\t\"/*============================================================================\",\r\n\t\t\"\",\r\n\t\t\"                           FXAA QUALITY - PRESETS\",\r\n\t\t\"\",\r\n\t\t\"============================================================================*/\",\r\n\t\t\"\",\r\n\t\t\"/*============================================================================\",\r\n\t\t\"                     FXAA QUALITY - MEDIUM DITHER PRESETS\",\r\n\t\t\"============================================================================*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 10)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 3\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P1 3.0\",\r\n\t\t\"    #define FXAA_QUALITY_P2 12.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 11)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 4\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 3.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 12.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 12)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 5\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 12.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 13)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 6\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 12.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 14)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 7\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P6 12.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 15)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 8\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P6 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P7 12.0\",\r\n\t\t\"#endif\",\r\n\t\t\"\",\r\n\t\t\"/*============================================================================\",\r\n\t\t\"                     FXAA QUALITY - LOW DITHER PRESETS\",\r\n\t\t\"============================================================================*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 20)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 3\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P1 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P2 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 21)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 4\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 22)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 5\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 23)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 6\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 24)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 7\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 3.0\",\r\n\t\t\"    #define FXAA_QUALITY_P6 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 25)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 8\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P6 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P7 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 26)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 9\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P6 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P7 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P8 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 27)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 10\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P6 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P7 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P8 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P9 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 28)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 11\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P6 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P7 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P8 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P9 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P10 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 29)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 12\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P2 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P6 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P7 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P8 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P9 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P10 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P11 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"\",\r\n\t\t\"/*============================================================================\",\r\n\t\t\"                     FXAA QUALITY - EXTREME QUALITY\",\r\n\t\t\"============================================================================*/\",\r\n\t\t\"#if (FXAA_QUALITY_PRESET == 39)\",\r\n\t\t\"    #define FXAA_QUALITY_PS 12\",\r\n\t\t\"    #define FXAA_QUALITY_P0 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P1 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P2 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P3 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P4 1.0\",\r\n\t\t\"    #define FXAA_QUALITY_P5 1.5\",\r\n\t\t\"    #define FXAA_QUALITY_P6 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P7 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P8 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P9 2.0\",\r\n\t\t\"    #define FXAA_QUALITY_P10 4.0\",\r\n\t\t\"    #define FXAA_QUALITY_P11 8.0\",\r\n\t\t\"#endif\",\r\n\t\t\"\",\r\n\t\t\"\",\r\n\t\t\"\",\r\n\t\t\"/*============================================================================\",\r\n\t\t\"\",\r\n\t\t\"                                API PORTING\",\r\n\t\t\"\",\r\n\t\t\"============================================================================*/\",\r\n\t\t\"#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\",\r\n\t\t\"    #define FxaaBool bool\",\r\n\t\t\"    #define FxaaDiscard discard\",\r\n\t\t\"    #define FxaaFloat float\",\r\n\t\t\"    #define FxaaFloat2 vec2\",\r\n\t\t\"    #define FxaaFloat3 vec3\",\r\n\t\t\"    #define FxaaFloat4 vec4\",\r\n\t\t\"    #define FxaaHalf float\",\r\n\t\t\"    #define FxaaHalf2 vec2\",\r\n\t\t\"    #define FxaaHalf3 vec3\",\r\n\t\t\"    #define FxaaHalf4 vec4\",\r\n\t\t\"    #define FxaaInt2 ivec2\",\r\n\t\t\"    #define FxaaSat(x) clamp(x, 0.0, 1.0)\",\r\n\t\t\"    #define FxaaTex sampler2D\",\r\n\t\t\"#else\",\r\n\t\t\"    #define FxaaBool bool\",\r\n\t\t\"    #define FxaaDiscard clip(-1)\",\r\n\t\t\"    #define FxaaFloat float\",\r\n\t\t\"    #define FxaaFloat2 float2\",\r\n\t\t\"    #define FxaaFloat3 float3\",\r\n\t\t\"    #define FxaaFloat4 float4\",\r\n\t\t\"    #define FxaaHalf half\",\r\n\t\t\"    #define FxaaHalf2 half2\",\r\n\t\t\"    #define FxaaHalf3 half3\",\r\n\t\t\"    #define FxaaHalf4 half4\",\r\n\t\t\"    #define FxaaSat(x) saturate(x)\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_GLSL_100 == 1)\",\r\n\t\t\"  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)\",\r\n\t\t\"  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_GLSL_120 == 1)\",\r\n\t\t\"    // Requires,\",\r\n\t\t\"    //  #version 120\",\r\n\t\t\"    // And at least,\",\r\n\t\t\"    //  #extension GL_EXT_gpu_shader4 : enable\",\r\n\t\t\"    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\",\r\n\t\t\"    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\",\r\n\t\t\"    #if (FXAA_FAST_PIXEL_OFFSET == 1)\",\r\n\t\t\"        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\",\r\n\t\t\"    #else\",\r\n\t\t\"        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\",\r\n\t\t\"    #endif\",\r\n\t\t\"    #if (FXAA_GATHER4_ALPHA == 1)\",\r\n\t\t\"        // use #extension GL_ARB_gpu_shader5 : enable\",\r\n\t\t\"        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\",\r\n\t\t\"        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\",\r\n\t\t\"        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\",\r\n\t\t\"        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\",\r\n\t\t\"    #endif\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_GLSL_130 == 1)\",\r\n\t\t\"    // Requires \\\"#version 130\\\" or better\",\r\n\t\t\"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)\",\r\n\t\t\"    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\",\r\n\t\t\"    #if (FXAA_GATHER4_ALPHA == 1)\",\r\n\t\t\"        // use #extension GL_ARB_gpu_shader5 : enable\",\r\n\t\t\"        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\",\r\n\t\t\"        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\",\r\n\t\t\"        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\",\r\n\t\t\"        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\",\r\n\t\t\"    #endif\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_HLSL_3 == 1)\",\r\n\t\t\"    #define FxaaInt2 float2\",\r\n\t\t\"    #define FxaaTex sampler2D\",\r\n\t\t\"    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))\",\r\n\t\t\"    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_HLSL_4 == 1)\",\r\n\t\t\"    #define FxaaInt2 int2\",\r\n\t\t\"    struct FxaaTex { SamplerState smpl; Texture2D tex; };\",\r\n\t\t\"    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\",\r\n\t\t\"    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\",\r\n\t\t\"#endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"#if (FXAA_HLSL_5 == 1)\",\r\n\t\t\"    #define FxaaInt2 int2\",\r\n\t\t\"    struct FxaaTex { SamplerState smpl; Texture2D tex; };\",\r\n\t\t\"    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\",\r\n\t\t\"    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\",\r\n\t\t\"    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)\",\r\n\t\t\"    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)\",\r\n\t\t\"    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)\",\r\n\t\t\"    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)\",\r\n\t\t\"#endif\",\r\n\t\t\"\",\r\n\t\t\"\",\r\n\t\t\"/*============================================================================\",\r\n\t\t\"                   GREEN AS LUMA OPTION SUPPORT FUNCTION\",\r\n\t\t\"============================================================================*/\",\r\n\t\t\"#if (FXAA_GREEN_AS_LUMA == 0)\",\r\n\t\t\"    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\",\r\n\t\t\"#else\",\r\n\t\t\"    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\",\r\n\t\t\"#endif\",\r\n\t\t\"\",\r\n\t\t\"\",\r\n\t\t\"\",\r\n\t\t\"\",\r\n\t\t\"/*============================================================================\",\r\n\t\t\"\",\r\n\t\t\"                             FXAA3 QUALITY - PC\",\r\n\t\t\"\",\r\n\t\t\"============================================================================*/\",\r\n\t\t\"#if (FXAA_PC == 1)\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"FxaaFloat4 FxaaPixelShader(\",\r\n\t\t\"    //\",\r\n\t\t\"    // Use noperspective interpolation here (turn off perspective interpolation).\",\r\n\t\t\"    // {xy} = center of pixel\",\r\n\t\t\"    FxaaFloat2 pos,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Used only for FXAA Console, and not used on the 360 version.\",\r\n\t\t\"    // Use noperspective interpolation here (turn off perspective interpolation).\",\r\n\t\t\"    // {xy_} = upper left of pixel\",\r\n\t\t\"    // {_zw} = lower right of pixel\",\r\n\t\t\"    FxaaFloat4 fxaaConsolePosPos,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Input color texture.\",\r\n\t\t\"    // {rgb_} = color in linear or perceptual color space\",\r\n\t\t\"    // if (FXAA_GREEN_AS_LUMA == 0)\",\r\n\t\t\"    //     {__a} = luma in perceptual color space (not linear)\",\r\n\t\t\"    FxaaTex tex,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on the optimized 360 version of FXAA Console.\",\r\n\t\t\"    // For everything but 360, just use the same input here as for \\\"tex\\\".\",\r\n\t\t\"    // For 360, same texture, just alias with a 2nd sampler.\",\r\n\t\t\"    // This sampler needs to have an exponent bias of -1.\",\r\n\t\t\"    FxaaTex fxaaConsole360TexExpBiasNegOne,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on the optimized 360 version of FXAA Console.\",\r\n\t\t\"    // For everything but 360, just use the same input here as for \\\"tex\\\".\",\r\n\t\t\"    // For 360, same texture, just alias with a 3nd sampler.\",\r\n\t\t\"    // This sampler needs to have an exponent bias of -2.\",\r\n\t\t\"    FxaaTex fxaaConsole360TexExpBiasNegTwo,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Quality.\",\r\n\t\t\"    // This must be from a constant/uniform.\",\r\n\t\t\"    // {x_} = 1.0/screenWidthInPixels\",\r\n\t\t\"    // {_y} = 1.0/screenHeightInPixels\",\r\n\t\t\"    FxaaFloat2 fxaaQualityRcpFrame,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Console.\",\r\n\t\t\"    // This must be from a constant/uniform.\",\r\n\t\t\"    // This effects sub-pixel AA quality and inversely sharpness.\",\r\n\t\t\"    //   Where N ranges between,\",\r\n\t\t\"    //     N = 0.50 (default)\",\r\n\t\t\"    //     N = 0.33 (sharper)\",\r\n\t\t\"    // {x__} = -N/screenWidthInPixels\",\r\n\t\t\"    // {_y_} = -N/screenHeightInPixels\",\r\n\t\t\"    // {_z_} =  N/screenWidthInPixels\",\r\n\t\t\"    // {__w} =  N/screenHeightInPixels\",\r\n\t\t\"    FxaaFloat4 fxaaConsoleRcpFrameOpt,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Console.\",\r\n\t\t\"    // Not used on 360, but used on PS3 and PC.\",\r\n\t\t\"    // This must be from a constant/uniform.\",\r\n\t\t\"    // {x__} = -2.0/screenWidthInPixels\",\r\n\t\t\"    // {_y_} = -2.0/screenHeightInPixels\",\r\n\t\t\"    // {_z_} =  2.0/screenWidthInPixels\",\r\n\t\t\"    // {__w} =  2.0/screenHeightInPixels\",\r\n\t\t\"    FxaaFloat4 fxaaConsoleRcpFrameOpt2,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Console.\",\r\n\t\t\"    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\",\r\n\t\t\"    // This must be from a constant/uniform.\",\r\n\t\t\"    // {x__} =  8.0/screenWidthInPixels\",\r\n\t\t\"    // {_y_} =  8.0/screenHeightInPixels\",\r\n\t\t\"    // {_z_} = -4.0/screenWidthInPixels\",\r\n\t\t\"    // {__w} = -4.0/screenHeightInPixels\",\r\n\t\t\"    FxaaFloat4 fxaaConsole360RcpFrameOpt2,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Quality.\",\r\n\t\t\"    // This used to be the FXAA_QUALITY_SUBPIX define.\",\r\n\t\t\"    // It is here now to allow easier tuning.\",\r\n\t\t\"    // Choose the amount of sub-pixel aliasing removal.\",\r\n\t\t\"    // This can effect sharpness.\",\r\n\t\t\"    //   1.00 - upper limit (softer)\",\r\n\t\t\"    //   0.75 - default amount of filtering\",\r\n\t\t\"    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\",\r\n\t\t\"    //   0.25 - almost off\",\r\n\t\t\"    //   0.00 - completely off\",\r\n\t\t\"    FxaaFloat fxaaQualitySubpix,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Quality.\",\r\n\t\t\"    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\",\r\n\t\t\"    // It is here now to allow easier tuning.\",\r\n\t\t\"    // The minimum amount of local contrast required to apply algorithm.\",\r\n\t\t\"    //   0.333 - too little (faster)\",\r\n\t\t\"    //   0.250 - low quality\",\r\n\t\t\"    //   0.166 - default\",\r\n\t\t\"    //   0.125 - high quality\",\r\n\t\t\"    //   0.063 - overkill (slower)\",\r\n\t\t\"    FxaaFloat fxaaQualityEdgeThreshold,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Quality.\",\r\n\t\t\"    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\",\r\n\t\t\"    // It is here now to allow easier tuning.\",\r\n\t\t\"    // Trims the algorithm from processing darks.\",\r\n\t\t\"    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\",\r\n\t\t\"    //   0.0625 - high quality (faster)\",\r\n\t\t\"    //   0.0312 - visible limit (slower)\",\r\n\t\t\"    // Special notes when using FXAA_GREEN_AS_LUMA,\",\r\n\t\t\"    //   Likely want to set this to zero.\",\r\n\t\t\"    //   As colors that are mostly not-green\",\r\n\t\t\"    //   will appear very dark in the green channel!\",\r\n\t\t\"    //   Tune by looking at mostly non-green content,\",\r\n\t\t\"    //   then start at zero and increase until aliasing is a problem.\",\r\n\t\t\"    FxaaFloat fxaaQualityEdgeThresholdMin,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Console.\",\r\n\t\t\"    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.\",\r\n\t\t\"    // It is here now to allow easier tuning.\",\r\n\t\t\"    // This does not effect PS3, as this needs to be compiled in.\",\r\n\t\t\"    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.\",\r\n\t\t\"    //   Due to the PS3 being ALU bound,\",\r\n\t\t\"    //   there are only three safe values here: 2 and 4 and 8.\",\r\n\t\t\"    //   These options use the shaders ability to a free *|/ by 2|4|8.\",\r\n\t\t\"    // For all other platforms can be a non-power of two.\",\r\n\t\t\"    //   8.0 is sharper (default!!!)\",\r\n\t\t\"    //   4.0 is softer\",\r\n\t\t\"    //   2.0 is really soft (good only for vector graphics inputs)\",\r\n\t\t\"    FxaaFloat fxaaConsoleEdgeSharpness,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Console.\",\r\n\t\t\"    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.\",\r\n\t\t\"    // It is here now to allow easier tuning.\",\r\n\t\t\"    // This does not effect PS3, as this needs to be compiled in.\",\r\n\t\t\"    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.\",\r\n\t\t\"    //   Due to the PS3 being ALU bound,\",\r\n\t\t\"    //   there are only two safe values here: 1/4 and 1/8.\",\r\n\t\t\"    //   These options use the shaders ability to a free *|/ by 2|4|8.\",\r\n\t\t\"    // The console setting has a different mapping than the quality setting.\",\r\n\t\t\"    // Other platforms can use other values.\",\r\n\t\t\"    //   0.125 leaves less aliasing, but is softer (default!!!)\",\r\n\t\t\"    //   0.25 leaves more aliasing, and is sharper\",\r\n\t\t\"    FxaaFloat fxaaConsoleEdgeThreshold,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Only used on FXAA Console.\",\r\n\t\t\"    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.\",\r\n\t\t\"    // It is here now to allow easier tuning.\",\r\n\t\t\"    // Trims the algorithm from processing darks.\",\r\n\t\t\"    // The console setting has a different mapping than the quality setting.\",\r\n\t\t\"    // This only applies when FXAA_EARLY_EXIT is 1.\",\r\n\t\t\"    // This does not apply to PS3,\",\r\n\t\t\"    // PS3 was simplified to avoid more shader instructions.\",\r\n\t\t\"    //   0.06 - faster but more aliasing in darks\",\r\n\t\t\"    //   0.05 - default\",\r\n\t\t\"    //   0.04 - slower and less aliasing in darks\",\r\n\t\t\"    // Special notes when using FXAA_GREEN_AS_LUMA,\",\r\n\t\t\"    //   Likely want to set this to zero.\",\r\n\t\t\"    //   As colors that are mostly not-green\",\r\n\t\t\"    //   will appear very dark in the green channel!\",\r\n\t\t\"    //   Tune by looking at mostly non-green content,\",\r\n\t\t\"    //   then start at zero and increase until aliasing is a problem.\",\r\n\t\t\"    FxaaFloat fxaaConsoleEdgeThresholdMin,\",\r\n\t\t\"    //\",\r\n\t\t\"    // Extra constants for 360 FXAA Console only.\",\r\n\t\t\"    // Use zeros or anything else for other platforms.\",\r\n\t\t\"    // These must be in physical constant registers and NOT immedates.\",\r\n\t\t\"    // Immedates will result in compiler un-optimizing.\",\r\n\t\t\"    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\",\r\n\t\t\"    FxaaFloat4 fxaaConsole360ConstDir\",\r\n\t\t\") {\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat2 posM;\",\r\n\t\t\"    posM.x = pos.x;\",\r\n\t\t\"    posM.y = pos.y;\",\r\n\t\t\"    #if (FXAA_GATHER4_ALPHA == 1)\",\r\n\t\t\"        #if (FXAA_DISCARD == 0)\",\r\n\t\t\"            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\",\r\n\t\t\"            #if (FXAA_GREEN_AS_LUMA == 0)\",\r\n\t\t\"                #define lumaM rgbyM.w\",\r\n\t\t\"            #else\",\r\n\t\t\"                #define lumaM rgbyM.y\",\r\n\t\t\"            #endif\",\r\n\t\t\"        #endif\",\r\n\t\t\"        #if (FXAA_GREEN_AS_LUMA == 0)\",\r\n\t\t\"            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\",\r\n\t\t\"            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\",\r\n\t\t\"        #else\",\r\n\t\t\"            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\",\r\n\t\t\"            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\",\r\n\t\t\"        #endif\",\r\n\t\t\"        #if (FXAA_DISCARD == 1)\",\r\n\t\t\"            #define lumaM luma4A.w\",\r\n\t\t\"        #endif\",\r\n\t\t\"        #define lumaE luma4A.z\",\r\n\t\t\"        #define lumaS luma4A.x\",\r\n\t\t\"        #define lumaSE luma4A.y\",\r\n\t\t\"        #define lumaNW luma4B.w\",\r\n\t\t\"        #define lumaN luma4B.z\",\r\n\t\t\"        #define lumaW luma4B.x\",\r\n\t\t\"    #else\",\r\n\t\t\"        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\",\r\n\t\t\"        #if (FXAA_GREEN_AS_LUMA == 0)\",\r\n\t\t\"            #define lumaM rgbyM.w\",\r\n\t\t\"        #else\",\r\n\t\t\"            #define lumaM rgbyM.y\",\r\n\t\t\"        #endif\",\r\n\t\t\"        #if (FXAA_GLSL_100 == 1)\",\r\n\t\t\"          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"        #else\",\r\n\t\t\"          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"        #endif\",\r\n\t\t\"    #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat maxSM = max(lumaS, lumaM);\",\r\n\t\t\"    FxaaFloat minSM = min(lumaS, lumaM);\",\r\n\t\t\"    FxaaFloat maxESM = max(lumaE, maxSM);\",\r\n\t\t\"    FxaaFloat minESM = min(lumaE, minSM);\",\r\n\t\t\"    FxaaFloat maxWN = max(lumaN, lumaW);\",\r\n\t\t\"    FxaaFloat minWN = min(lumaN, lumaW);\",\r\n\t\t\"    FxaaFloat rangeMax = max(maxWN, maxESM);\",\r\n\t\t\"    FxaaFloat rangeMin = min(minWN, minESM);\",\r\n\t\t\"    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\",\r\n\t\t\"    FxaaFloat range = rangeMax - rangeMin;\",\r\n\t\t\"    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\",\r\n\t\t\"    FxaaBool earlyExit = range < rangeMaxClamped;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    if(earlyExit)\",\r\n\t\t\"        #if (FXAA_DISCARD == 1)\",\r\n\t\t\"            FxaaDiscard;\",\r\n\t\t\"        #else\",\r\n\t\t\"            return rgbyM;\",\r\n\t\t\"        #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    #if (FXAA_GATHER4_ALPHA == 0)\",\r\n\t\t\"        #if (FXAA_GLSL_100 == 1)\",\r\n\t\t\"          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"        #else\",\r\n\t\t\"          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"        #endif\",\r\n\t\t\"    #else\",\r\n\t\t\"        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\",\r\n\t\t\"    #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat lumaNS = lumaN + lumaS;\",\r\n\t\t\"    FxaaFloat lumaWE = lumaW + lumaE;\",\r\n\t\t\"    FxaaFloat subpixRcpRange = 1.0/range;\",\r\n\t\t\"    FxaaFloat subpixNSWE = lumaNS + lumaWE;\",\r\n\t\t\"    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\",\r\n\t\t\"    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat lumaNESE = lumaNE + lumaSE;\",\r\n\t\t\"    FxaaFloat lumaNWNE = lumaNW + lumaNE;\",\r\n\t\t\"    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\",\r\n\t\t\"    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat lumaNWSW = lumaNW + lumaSW;\",\r\n\t\t\"    FxaaFloat lumaSWSE = lumaSW + lumaSE;\",\r\n\t\t\"    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\",\r\n\t\t\"    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\",\r\n\t\t\"    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\",\r\n\t\t\"    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\",\r\n\t\t\"    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\",\r\n\t\t\"    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\",\r\n\t\t\"    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\",\r\n\t\t\"    FxaaBool horzSpan = edgeHorz >= edgeVert;\",\r\n\t\t\"    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    if(!horzSpan) lumaN = lumaW;\",\r\n\t\t\"    if(!horzSpan) lumaS = lumaE;\",\r\n\t\t\"    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\",\r\n\t\t\"    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat gradientN = lumaN - lumaM;\",\r\n\t\t\"    FxaaFloat gradientS = lumaS - lumaM;\",\r\n\t\t\"    FxaaFloat lumaNN = lumaN + lumaM;\",\r\n\t\t\"    FxaaFloat lumaSS = lumaS + lumaM;\",\r\n\t\t\"    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\",\r\n\t\t\"    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\",\r\n\t\t\"    if(pairN) lengthSign = -lengthSign;\",\r\n\t\t\"    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat2 posB;\",\r\n\t\t\"    posB.x = posM.x;\",\r\n\t\t\"    posB.y = posM.y;\",\r\n\t\t\"    FxaaFloat2 offNP;\",\r\n\t\t\"    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\",\r\n\t\t\"    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\",\r\n\t\t\"    if(!horzSpan) posB.x += lengthSign * 0.5;\",\r\n\t\t\"    if( horzSpan) posB.y += lengthSign * 0.5;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat2 posN;\",\r\n\t\t\"    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\",\r\n\t\t\"    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\",\r\n\t\t\"    FxaaFloat2 posP;\",\r\n\t\t\"    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\",\r\n\t\t\"    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\",\r\n\t\t\"    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\",\r\n\t\t\"    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\",\r\n\t\t\"    FxaaFloat subpixE = subpixC * subpixC;\",\r\n\t\t\"    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    if(!pairN) lumaNN = lumaSS;\",\r\n\t\t\"    FxaaFloat gradientScaled = gradient * 1.0/4.0;\",\r\n\t\t\"    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\",\r\n\t\t\"    FxaaFloat subpixF = subpixD * subpixE;\",\r\n\t\t\"    FxaaBool lumaMLTZero = lumaMM < 0.0;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    lumaEndN -= lumaNN * 0.5;\",\r\n\t\t\"    lumaEndP -= lumaNN * 0.5;\",\r\n\t\t\"    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\",\r\n\t\t\"    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\",\r\n\t\t\"    FxaaBool doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\",\r\n\t\t\"    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    if(doneNP) {\",\r\n\t\t\"        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"        doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"        doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\",\r\n\t\t\"        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\",\r\n\t\t\"        doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\",\r\n\t\t\"        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"        #if (FXAA_QUALITY_PS > 3)\",\r\n\t\t\"        if(doneNP) {\",\r\n\t\t\"            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"            doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"            doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\",\r\n\t\t\"            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\",\r\n\t\t\"            doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\",\r\n\t\t\"            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"            #if (FXAA_QUALITY_PS > 4)\",\r\n\t\t\"            if(doneNP) {\",\r\n\t\t\"                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"                doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"                doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\",\r\n\t\t\"                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\",\r\n\t\t\"                doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\",\r\n\t\t\"                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                #if (FXAA_QUALITY_PS > 5)\",\r\n\t\t\"                if(doneNP) {\",\r\n\t\t\"                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"                    doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"                    doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\",\r\n\t\t\"                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\",\r\n\t\t\"                    doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\",\r\n\t\t\"                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                    #if (FXAA_QUALITY_PS > 6)\",\r\n\t\t\"                    if(doneNP) {\",\r\n\t\t\"                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"                        doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"                        doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\",\r\n\t\t\"                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\",\r\n\t\t\"                        doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\",\r\n\t\t\"                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                        #if (FXAA_QUALITY_PS > 7)\",\r\n\t\t\"                        if(doneNP) {\",\r\n\t\t\"                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"                            doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"                            doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\",\r\n\t\t\"                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\",\r\n\t\t\"                            doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\",\r\n\t\t\"                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    #if (FXAA_QUALITY_PS > 8)\",\r\n\t\t\"    if(doneNP) {\",\r\n\t\t\"        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"        doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"        doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\",\r\n\t\t\"        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\",\r\n\t\t\"        doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\",\r\n\t\t\"        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"        #if (FXAA_QUALITY_PS > 9)\",\r\n\t\t\"        if(doneNP) {\",\r\n\t\t\"            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"            doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"            doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\",\r\n\t\t\"            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\",\r\n\t\t\"            doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\",\r\n\t\t\"            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"            #if (FXAA_QUALITY_PS > 10)\",\r\n\t\t\"            if(doneNP) {\",\r\n\t\t\"                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"                doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"                doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\",\r\n\t\t\"                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\",\r\n\t\t\"                doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\",\r\n\t\t\"                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                #if (FXAA_QUALITY_PS > 11)\",\r\n\t\t\"                if(doneNP) {\",\r\n\t\t\"                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"                    doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"                    doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\",\r\n\t\t\"                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\",\r\n\t\t\"                    doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\",\r\n\t\t\"                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                    #if (FXAA_QUALITY_PS > 12)\",\r\n\t\t\"                    if(doneNP) {\",\r\n\t\t\"                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n\t\t\"                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n\t\t\"                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n\t\t\"                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n\t\t\"                        doneN = abs(lumaEndN) >= gradientScaled;\",\r\n\t\t\"                        doneP = abs(lumaEndP) >= gradientScaled;\",\r\n\t\t\"                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\",\r\n\t\t\"                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\",\r\n\t\t\"                        doneNP = (!doneN) || (!doneP);\",\r\n\t\t\"                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\",\r\n\t\t\"                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                    }\",\r\n\t\t\"                    #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                }\",\r\n\t\t\"                #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"            }\",\r\n\t\t\"            #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"        }\",\r\n\t\t\"        #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    }\",\r\n\t\t\"    #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                        }\",\r\n\t\t\"                        #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                    }\",\r\n\t\t\"                    #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"                }\",\r\n\t\t\"                #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"            }\",\r\n\t\t\"            #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"        }\",\r\n\t\t\"        #endif\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    }\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat dstN = posM.x - posN.x;\",\r\n\t\t\"    FxaaFloat dstP = posP.x - posM.x;\",\r\n\t\t\"    if(!horzSpan) dstN = posM.y - posN.y;\",\r\n\t\t\"    if(!horzSpan) dstP = posP.y - posM.y;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\",\r\n\t\t\"    FxaaFloat spanLength = (dstP + dstN);\",\r\n\t\t\"    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\",\r\n\t\t\"    FxaaFloat spanLengthRcp = 1.0/spanLength;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaBool directionN = dstN < dstP;\",\r\n\t\t\"    FxaaFloat dst = min(dstN, dstP);\",\r\n\t\t\"    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\",\r\n\t\t\"    FxaaFloat subpixG = subpixF * subpixF;\",\r\n\t\t\"    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\",\r\n\t\t\"    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\",\r\n\t\t\"/*--------------------------------------------------------------------------*/\",\r\n\t\t\"    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\",\r\n\t\t\"    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\",\r\n\t\t\"    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\",\r\n\t\t\"    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\",\r\n\t\t\"    #if (FXAA_DISCARD == 1)\",\r\n\t\t\"        return FxaaTexTop(tex, posM);\",\r\n\t\t\"    #else\",\r\n\t\t\"        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\",\r\n\t\t\"    #endif\",\r\n\t\t\"}\",\r\n\t\t\"/*==========================================================================*/\",\r\n\t\t\"#endif\",\r\n\t\t\"\",\r\n\t\t\"void main() {\",\r\n\t\t\"  gl_FragColor = FxaaPixelShader(\",\r\n\t\t\"    vUv,\",\r\n\t\t\"    vec4(0.0),\",\r\n\t\t\"    tDiffuse,\",\r\n\t\t\"    tDiffuse,\",\r\n\t\t\"    tDiffuse,\",\r\n\t\t\"    resolution,\",\r\n\t\t\"    vec4(0.0),\",\r\n\t\t\"    vec4(0.0),\",\r\n\t\t\"    vec4(0.0),\",\r\n\t\t\"    0.75,\",\r\n\t\t\"    0.166,\",\r\n\t\t\"    0.0833,\",\r\n\t\t\"    0.0,\",\r\n\t\t\"    0.0,\",\r\n\t\t\"    0.0,\",\r\n\t\t\"    vec4(0.0)\",\r\n\t\t\"  );\",\r\n\t\t\"\",\r\n\t\t\"  // TODO avoid querying texture twice for same texel\",\r\n\t\t\"  gl_FragColor.a = texture2D(tDiffuse, vUv).a;\",\r\n\t\t\"}\"\r\n\t].join( \"\\n\" )\r\n\r\n};\r\n\r\nexport {\r\n\tFXAAShader\r\n};\r\n","let _extends = ( des, src, over ) => {\r\n\r\n\tlet res = _extend( des, src, over );\r\n\r\n\tfunction _extend( des, src, over ) {\r\n\r\n\t\tlet override = true;\r\n\t\tif ( over === false ) {\r\n\r\n\t\t\toverride = false;\r\n\r\n\t\t}\r\n\t\tif ( src instanceof Array ) {\r\n\r\n\t\t\tfor ( let i = 0, len = src.length; i < len; i ++ )\r\n\t\t\t\t_extend( des, src[ i ], override );\r\n\r\n\t\t}\r\n\t\tfor ( let i in src ) {\r\n\r\n\t\t\tif ( override || ! ( i in des ) ) {\r\n\r\n\t\t\t\tdes[ i ] = src[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn des;\r\n\r\n\t}\r\n\tfor ( let i in src ) {\r\n\r\n\t\tdelete res[ i ];\r\n\r\n\t}\r\n\treturn res;\r\n\r\n};\r\n\r\nexport {\r\n\t_extends\r\n};\r\n","let rndInt = ( max ) => {\r\n\r\n\treturn Math.floor( Math.random() * max );\r\n\r\n};\r\nexport {\r\n\trndInt\r\n};\r\n","let rndString = ( len ) => {\r\n\r\n\tif ( len <= 0 ) {\r\n\r\n\t\treturn '';\r\n\r\n\t}\r\n\tlen = len - 1 || 31;\r\n\tlet $chars =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\tlet maxPos = $chars.length + 1;\r\n\tlet pwd = $chars.charAt( Math.floor( Math.random() * ( maxPos - 10 ) ) );\r\n\tfor ( let i = 0; i < len; i ++ ) {\r\n\r\n\t\tpwd += $chars.charAt( Math.floor( Math.random() * maxPos ) );\r\n\r\n\t}\r\n\treturn pwd;\r\n\r\n};\r\n\r\nexport {\r\n\trndString\r\n};\r\n","import { Vector3 } from 'three';\r\n\r\nlet geoToCartesian = ( lat = 0, lon = 0, radius = 1 ) => {\r\n\r\n\tlat *= Math.PI / 180;\r\n\tlon *= Math.PI / 180;\r\n\treturn new Vector3( - radius * Math.cos( lat ) * Math.cos( lon ),\r\n\t\tradius * Math.sin( lat ),\r\n\t\tradius * Math.cos( lat ) * Math.sin( lon )\r\n\t);\r\n\r\n};\r\n\r\nexport {\r\n\tgeoToCartesian\r\n};\r\n","import { _extends as extend } from './extends';\r\nimport { rndInt } from './rndInt';\r\nimport { rndString } from './rndString';\r\nimport { geoToCartesian } from './geoToCartesian';\r\n\r\nlet Util = {\r\n\textend,\r\n\trndInt,\r\n\trndString,\r\n\tgeoToCartesian\r\n};\r\n\r\nexport {\r\n\tUtil\r\n};\r\n","/* eslint-disable */\r\n\r\nexport { DefaultSettings } from './core/settings/DefaultSettings.js';\r\nexport { App } from './core/App.js';\r\nexport { Bind } from './core/Bind.js';\r\nexport { FBOWorld } from './core/FBOWorld.js';\r\nexport { LoopManager } from './core/LoopManager.js';\r\nexport { Monitor } from './core/Monitor.js';\r\nexport { QRCode } from './core/QRCode.js';\r\nexport { Transitioner } from './core/Transitioner.js';\r\nexport { View } from './core/View.js';\r\nexport { VR } from './core/VR.js';\r\nexport { World } from './core/World.js';\r\n\r\nexport { NotFunctionError } from './error/NotFunctionError.js';\r\n\r\nexport { EventManager } from './events/EventManager.js';\r\nexport { Events } from './events/Events.js';\r\nexport { FBOEventMapper } from './events/FBOEventMapper.js';\r\nexport { Signal } from './events/Signal.js';\r\n\r\nexport { GUI, Body, Txt, Div } from './gui/GUI.js';\r\n\r\nexport { LoaderFactory } from './loader/LoaderFactory.js';\r\n\r\nexport { EffectComposer } from './postprocessing/EffectComposer.js';\r\n\r\nexport { AfterimagePass } from './postprocessing/AfterimagePass.js';\r\nexport { Pass } from './postprocessing/Pass.js';\r\nexport { DotScreenPass } from './postprocessing/DotScreenPass.js';\r\nexport { RenderPass } from './postprocessing/RenderPass.js';\r\nexport { ShaderPass } from './postprocessing/ShaderPass.js';\r\nexport { GlitchPass } from './postprocessing/GlitchPass.js';\r\nexport { OutlinePass } from './postprocessing/OutlinePass.js';\r\nexport { WatercolorPass } from './postprocessing/WatercolorPass.js';\r\nexport { TestPass } from './postprocessing/TestPass.js';\r\n\r\nexport { AfterimageShader } from './postprocessing/shader/AfterimageShader.js';\r\nexport { CopyShader } from './postprocessing/shader/CopyShader.js';\r\nexport { DotScreenShader } from './postprocessing/shader/DotScreenShader.js';\r\nexport { FXAAShader } from './postprocessing/shader/FXAAShader.js';\r\nexport { GlitchShader } from './postprocessing/shader/GlitchShader.js';\r\nexport { WatercolorShader } from './postprocessing/shader/WatercolorShader.js';\r\nexport { TestShader } from './postprocessing/shader/TestShader.js';\r\n\r\nexport { Util } from './util/Util.js';\r\n\r\n// //export * from './thirdparty/three.module.js';"],"names":["DefaultSettings","parent","document","body","setCommonCSS","autoStart","autoResize","VRSupport","renderer","clearColor","clearAlpha","pixelRatio","window","devicePixelRatio","precision","antialias","alpha","logarithmicDepthBuffer","preserveDrawingBuffer","normalEventList","hammerEventList","NotFunctionError","message","name","Error","LoopManager","cycleLevel","disable","times","functionMap","Map","time","forEach","value","func","key","set","Symbol","clear","funcOrKey","delete","EventManager","world","eventManager","isDeep","receivers","raycaster","Raycaster","centerRaycaster","selectedObj","centerSelectedObj","isDetectingEnter","app","options","eventItem","addEventListener","event","raycastCheck","toNovaEvent","Hammer","undefined","e","console","warn","hammer","domElement","on","changedPointers","center","Vector2","clientX","clientY","type","target","vec2","x","getWorldWidth","y","getWorldHeight","setFromCamera","camera","receiverMap","Array","intersect","values","intersects","intersectObjects","i","length","object","isPenetrated","events","run","World","scene","Scene","logicLoop","renderLoop","PerspectiveCamera","children","renderTargetParameters","minFilter","LinearFilter","magFilter","format","RGBFormat","stencilBuffer","isRTT","fbo","WebGLRenderTarget","defaultRenderID","add","render","defaultUpdateID","update","width","height","aspect","updateProjectionMatrix","left","right","top","bottom","APP_STOP","APP_RUNNING","APP_PAUSE","VERSION","log","VR","display","polyfill","isOpenVR","vrEffect","getVRDisplay","createVREffect","THREE","VREffect","setSize","clientWidth","clientHeight","isOpened","updateId","WebVRPolyfill","config","q","location","search","substring","params","split","param","parseFloat","navigator","getVRDisplays","setPolyfill","then","vrDisplays","requestPresent","source","remove","App","settings","defaultsDeep","WebGLRenderer","setClearColor","state","resize","start","setPixelRatio","requestAnimationFrame","write","innerWidth","offsetWidth","innerHeight","offsetHeight","appendChild","destroy","container","isFullScreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullScreen","msExitFullscreen","webkitCancelFullScreen","closeFullScreen","openFullScreen","img","Image","src","toDataURL","w","open","title","obj","worldVector","Vector3","clone","position","vector","project","halfWidth","halfHeight","Math","round","Bind","bindMap","defineReactive","funcs","data","val","Object","defineProperty","enumerable","configurable","get","newVal","FBOWorld","Monitor","option","fullWidth","fullHeight","canvas","setViewOffset","viewX","viewY","viewWidth","viewHeight","QRMode","MODE_NUMBER","MODE_ALPHA_NUM","MODE_8BIT_BYTE","MODE_KANJI","QR8bitByte","mode","parsedData","l","byteArray","code","charCodeAt","push","prototype","concat","apply","unshift","buffer","put","QRCodeModel","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","newData","row","col","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","minLostPoint","pattern","lostPoint","QRUtil","getLostPoint","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","cs","make","dark","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","j","bits","getBCHTypeNumber","mod","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","mask","getMask","PAD0","PAD1","rsBlocks","QRRSBlock","getRSBlocks","QRBitBuffer","getLength","getLengthInBits","totalDataCount","dataCount","putBit","createBytes","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","rsPoly","getErrorCorrectPolynomial","rawPoly","QRPolynomial","modPoly","modIndex","totalCodeCount","index","QRErrorCorrectLevel","L","M","Q","H","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","d","getBCHDigit","digit","errorCorrectLength","a","multiply","QRMath","gexp","qrCode","getModuleCount","sameCount","isDark","count","darkCount","ratio","abs","glog","n","LOG_TABLE","EXP_TABLE","num","shift","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","QRCodeLimitLength","_getTypeNumber","sText","nCorrectLevel","nType","_getUTF8Length","len","nLimit","replacedText","encodeURI","toString","replace","QRCode","str","correctLevel","makeCode","oQRCode","addData","size","CorrectLevel","Transitioner","texture","defaults","targetWorld","maskTexture","material","ShaderMaterial","uniforms","tDiffuse1","tDiffuse2","mixRatio","threshold","useTexture","tMixTexture","vertexShader","fragmentShader","OrthographicCamera","geometry","PlaneBufferGeometry","quad","Mesh","sceneA","sceneB","needChange","min","transition","View","worldWidth","worldHeight","setViewport","setScissor","setScissorTest","Signal","functionArr","Events","FBOEventMapper","fboWorld","mesh","faceIndexArr","includes","faceIndex","uv","GUI","css","backgroundColor","opacity","Group","Body","distanceFromCamera","createElement","spriteMaterial","SpriteMaterial","map","color","element","Sprite","getWorldDirection","rotation","z","ctx","getContext","fillStyle","fillRect","CanvasTexture","generateMipmaps","dispose","scale","Div","Txt","text","fontStyle","fontVariant","fontSize","fontWeight","fontFamily","textAlign","MeshBasicMaterial","transparent","needsUpdate","font","fillText","LoaderFactory","manager","LoadingManager","Resource","images","materials","textures","models","sounds","fonts","unloaded","onStart","url","itemsLoaded","itemsTotal","onLoad","onProgress","onError","imageLoader","ImageLoader","textureLoader","TextureLoader","audioListener","AudioListener","sucFunc","errFunc","load","err","CopyShader","Pass","effectComposer","renderToScreen","enabled","needsSwap","addPass","ShaderPass","shader","textureID","UniformsUtils","defines","frustumCulled","writeBuffer","readBuffer","RenderPass","overrideMaterial","clearDepth","oldAutoClear","autoClear","oldClearColor","oldClearAlpha","getClearColor","getHex","getClearAlpha","MaskPass","inverse","context","buffers","setMask","setLocked","writeValue","clearValue","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","ClearMaskPass","EffectComposer","renderTarget","parameters","RGBAFormat","getDrawingBufferSize","renderTarget1","renderTarget2","passes","copyPass","tmp","pass","splice","delta","maskActive","il","stencilFunc","NOTEQUAL","swapBuffers","AfterimageShader","AfterimagePass","damp","textureComp","NearestFilter","textureOld","shaderMaterial","sceneComp","sceneScreen","quadComp","quadScreen","DotScreenShader","join","DotScreenPass","angle","copy","GlitchShader","GlitchPass","goWild","generateHeightmap","curF","generateTrigger","random","randX","THREEMath","randFloat","PI","randInt","dataArr","Float32Array","DataTexture","FloatType","OutlinePass","resolution","selectedObjects","BlurDirectionX","BlurDirectionY","renderScene","renderCamera","visibleEdgeColor","Color","hiddenEdgeColor","edgeGlow","usePatternTexture","edgeThickness","edgeStrength","downSampleRatio","pulsePeriod","pars","resx","resy","maskBufferMaterial","side","DoubleSide","renderTargetMaskBuffer","depthMaterial","MeshDepthMaterial","depthPacking","RGBADepthPacking","blending","NoBlending","prepareMaskMaterial","getPrepareMaskMaterial","replaceDepthToViewZ","renderTargetDepthBuffer","renderTargetMaskDownSampleBuffer","renderTargetBlurBuffer1","renderTargetBlurBuffer2","edgeDetectionMaterial","getEdgeDetectionMaterial","renderTargetEdgeBuffer1","renderTargetEdgeBuffer2","MAX_EDGE_THICKNESS","MAX_EDGE_GLOW","separableBlurMaterial1","getSeperableBlurMaterial","separableBlurMaterial2","overlayMaterial","getOverlayMaterial","copyUniforms","materialCopy","depthTest","depthWrite","tempPulseColor1","tempPulseColor2","textureMatrix","Matrix4","string","isPerspectiveCamera","bVisible","gatherSelectedMeshesCallBack","visible","selectedObject","traverse","selectedMeshes","VisibilityChangeCallBack","Line","bFound","selectedObjectId","id","visibility","projectionMatrix","matrixWorldInverse","STENCIL_TEST","changeVisibilityOfSelectedObjects","currentBackground","background","updateTextureMatrix","changeVisibilityOfNonSelectedObjects","near","far","scalar","cos","performance","now","multiplyScalar","patternTexture","enable","maxRadius","AdditiveBlending","WatercolorShader","WatercolorPass","tPaper","wrapS","wrapT","RepeatWrapping","TestShader","TestPass","FXAAShader","_extends","des","over","res","_extend","override","rndInt","rndString","$chars","maxPos","pwd","charAt","geoToCartesian","lat","lon","radius","sin","Util","extend"],"mappings":"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"}